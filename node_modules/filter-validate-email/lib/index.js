"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.validateEmail = validateEmail;
exports.validateAsciiEmail = validateAsciiEmail;
exports.validateUnicodeEmail = validateUnicodeEmail;
exports.default = void 0;

var _regexp = require("./regexp");

function validateEmail(input) {
  var unicode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
  return (unicode ? validateUnicodeEmail : validateAsciiEmail)(input);
}

function validateAsciiEmail(input) {
  return validate(_regexp.regexpAsciiEmail, input);
}

function validateUnicodeEmail(input) {
  return validate(_regexp.regexpUnicodeEmail, input);
}

var _default = validateEmail;
exports.default = _default;

var validate = function validate(regexp, input) {
  return typeof input === 'string' && input.length <= 320 && regexp.test(input) && input.slice(-1) !== '\n' && encodeURIComponent(input).replace(/%../g, 'x').length <= 320;
};