{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jeguglie/Desktop/MatchApp/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jeguglie/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/jeguglie/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jeguglie/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/jeguglie/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/jeguglie/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/jeguglie/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/jeguglie/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import axios from'axios';var FileUpload=/*#__PURE__*/function(_React$Component){_inherits(FileUpload,_React$Component);function FileUpload(props){var _this;_classCallCheck(this,FileUpload);_this=_possibleConstructorReturn(this,_getPrototypeOf(FileUpload).call(this,props));_this.imagesFilesUpload=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(file){var fileSize,formData,_ref2,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:fileSize=Math.round(file.size/1024);if(!(fileSize>=4096)){_context.next=5;break;}_this.props.setWarnings([\"File is too big. Max limit is 4Mb\"]);_context.next=12;break;case 5:formData=new FormData();formData.append('file',file);_context.next=9;return axios.post(process.env.NODE_ENV===\"production\"?\"https://matchappli.herokuapp.com/api/user-profile\":\"http://localhost:5000/api/user-profile\",formData,{withCredentials:'true'});case 9:_ref2=_context.sent;data=_ref2.data;if(data.warnings)_this.props.setWarnings(data.warnings);case 12:_this.props.handleImageUpload();case 13:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.onSubmit=function(){if(_this.state.file!=null){_this.imagesFilesUpload(_this.state.file);_this.setState({file:''});}};_this.simulateClick=function(e){e.click();};_this.onFileChange=_this.onFileChange.bind(_assertThisInitialized(_this));_this.onSubmit=_this.onSubmit.bind(_assertThisInitialized(_this));_this.state={file:''};return _this;}_createClass(FileUpload,[{key:\"onFileChange\",value:function onFileChange(e){// Add file to queue in state\nthis.setState({file:e.target.files[0]},this.onSubmit);}},{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"containerUpload\"},React.createElement(\"div\",{className:\"file-upload\"},React.createElement(\"div\",{className:\"image-upload-wrap\"},React.createElement(\"input\",{className:\"file-upload-input\",type:\"file\",onChange:this.onFileChange,accept:\"image/png, image/jpg, image/jpeg\"}),React.createElement(\"br\",null),React.createElement(\"div\",{className:\"drag-text\"},React.createElement(\"h3\",null,\"Drag and Drop \",React.createElement(\"strong\",null,\"or\"),\" add file\")))));}}]);return FileUpload;}(React.Component);export{FileUpload as default};","map":{"version":3,"sources":["/Users/jeguglie/Desktop/MatchApp/client/src/components/fileUpload/fileUpload.js"],"names":["React","axios","FileUpload","props","imagesFilesUpload","file","fileSize","Math","round","size","setWarnings","formData","FormData","append","post","process","env","NODE_ENV","withCredentials","data","warnings","handleImageUpload","onSubmit","state","setState","simulateClick","e","click","onFileChange","bind","target","files","Component"],"mappings":"2+BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,GACqBC,CAAAA,U,gFACjB,oBAAYC,KAAZ,CAAkB,4CACd,4EAAMA,KAAN,GADc,MAclBC,iBAdkB,0FAcE,iBAAOC,IAAP,mJACVC,QADU,CACCC,IAAI,CAACC,KAAL,CAAYH,IAAI,CAACI,IAAL,CAAY,IAAxB,CADD,MAEZH,QAAQ,EAAI,IAFA,0BAGZ,MAAKH,KAAL,CAAWO,WAAX,CAAuB,CAAC,mCAAD,CAAvB,EAHY,8BAKNC,QALM,CAKK,GAAIC,CAAAA,QAAJ,EALL,CAMZD,QAAQ,CAACE,MAAT,CAAgB,MAAhB,CAAwBR,IAAxB,EANY,sBAOSJ,CAAAA,KAAK,CAACa,IAAN,CAAWC,OAAO,CAACC,GAAR,CAAYC,QAAZ,GAAyB,YAAzB,CAAwC,mDAAxC,CAA8F,wCAAzG,CAAmJN,QAAnJ,CAA6J,CAACO,eAAe,CAAE,MAAlB,CAA7J,CAPT,4BAOLC,IAPK,OAOLA,IAPK,CAQZ,GAAIA,IAAI,CAACC,QAAT,CACI,MAAKjB,KAAL,CAAWO,WAAX,CAAuBS,IAAI,CAACC,QAA5B,EATQ,QAWhB,MAAKjB,KAAL,CAAWkB,iBAAX,GAXgB,uDAdF,qEA2BlBC,QA3BkB,CA2BP,UAAM,CACb,GAAI,MAAKC,KAAL,CAAWlB,IAAX,EAAmB,IAAvB,CAA6B,CACzB,MAAKD,iBAAL,CAAuB,MAAKmB,KAAL,CAAWlB,IAAlC,EACA,MAAKmB,QAAL,CAAc,CAACnB,IAAI,CAAE,EAAP,CAAd,EACH,CACJ,CAhCiB,OAkClBoB,aAlCkB,CAkCF,SAACC,CAAD,CAAO,CACnBA,CAAC,CAACC,KAAF,GACH,CApCiB,CAEd,MAAKC,YAAL,CAAoB,MAAKA,YAAL,CAAkBC,IAAlB,+BAApB,CACA,MAAKP,QAAL,CAAgB,MAAKA,QAAL,CAAcO,IAAd,+BAAhB,CACA,MAAKN,KAAL,CAAa,CACTlB,IAAI,CAAE,EADG,CAAb,CAJc,aAOjB,C,yEAEYqB,C,CAAG,CACZ;AACA,KAAKF,QAAL,CAAc,CAACnB,IAAI,CAAEqB,CAAC,CAACI,MAAF,CAASC,KAAT,CAAe,CAAf,CAAP,CAAd,CAAyC,KAAKT,QAA9C,EACH,C,uCA2BO,CACJ,MACI,4BAAK,SAAS,CAAC,iBAAf,EACI,2BAAK,SAAS,CAAC,aAAf,EACI,2BAAK,SAAS,CAAC,mBAAf,EACK,6BACM,SAAS,CAAC,mBADhB,CAEM,IAAI,CAAC,MAFX,CAGM,QAAQ,CAAE,KAAKM,YAHrB,CAIM,MAAM,CAAC,kCAJb,EADL,CAMO,8BANP,CAOK,2BAAK,SAAS,CAAC,WAAf,EACI,+CAAkB,uCAAlB,aADJ,CAPL,CADJ,CADJ,CADJ,CAiBH,C,wBA1DmC5B,KAAK,CAACgC,S,SAAzB9B,U","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nexport default class FileUpload extends React.Component {\n    constructor(props){\n        super(props);\n        this.onFileChange = this.onFileChange.bind(this);\n        this.onSubmit = this.onSubmit.bind(this);\n        this.state = {\n            file: ''\n        };\n    }\n\n    onFileChange(e) {\n        // Add file to queue in state\n        this.setState({file: e.target.files[0]}, this.onSubmit);\n    }\n\n    imagesFilesUpload = async (file) => {\n        const fileSize = Math.round((file.size / 1024));\n        if (fileSize >= 4096)\n            this.props.setWarnings([\"File is too big. Max limit is 4Mb\"]);\n        else {\n            const formData = new FormData();\n            formData.append('file', file);\n            const {data} = await axios.post(process.env.NODE_ENV === \"production\" ? \"https://matchappli.herokuapp.com/api/user-profile\" : \"http://localhost:5000/api/user-profile\", formData, {withCredentials: 'true'});\n            if (data.warnings)\n                this.props.setWarnings(data.warnings);\n        }\n        this.props.handleImageUpload();\n    };\n    onSubmit = () => {\n        if (this.state.file != null) {\n            this.imagesFilesUpload(this.state.file);\n            this.setState({file: ''});\n        }\n    };\n\n    simulateClick = (e) => {\n        e.click()\n    }\n\n\n    render(){\n        return (\n            <div className=\"containerUpload\">\n                <div className=\"file-upload\">\n                    <div className=\"image-upload-wrap\">\n                         <input\n                               className=\"file-upload-input\"\n                               type=\"file\"\n                               onChange={this.onFileChange}\n                               accept=\"image/png, image/jpg, image/jpeg\"\n                         /><br />\n                         <div className=\"drag-text\">\n                             <h3>Drag and Drop <strong>or</strong> add file</h3>\n                         </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}