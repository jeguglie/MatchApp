{"ast":null,"code":"import _objectSpread from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/inherits\";import{Divider,Grid,Image,Label,Modal,Segment,Icon}from\"semantic-ui-react\";import Button from\"semantic-ui-react/dist/commonjs/elements/Button\";import React from\"react\";import classnames from'classnames';import ModalUserActions from\"./ModalUserActions\";import API from\"../../utils/API\";var moment=require('moment');var DEFAULT_STATE={openHide:false,openReport:false,openFake:false,liked:false,interests:'',like:false,showModal:false,user:{lastname:'',firstname:'',interests:[],gender:[],interested:[],imgs:[],country:'',last_date_online:'',bio:'',age:'',likes:''}};var ModalUser=/*#__PURE__*/function(_React$Component){_inherits(ModalUser,_React$Component);function ModalUser(props){var _this;_classCallCheck(this,ModalUser);_this=_possibleConstructorReturn(this,_getPrototypeOf(ModalUser).call(this,props));_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this._mounted=true;case 1:case\"end\":return _context.stop();}}},_callee);}));_this.loadUser=function(userIdFocus){API.getUserIdProfile(userIdFocus).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(res){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(res.status===200)_this._mounted&&_this.setState({user:res.data.user,showModal:true,liked:res.data.user.liked,like:res.data.like});case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}());};_this.userLike=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(userIdFocus){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return API.userLike(userIdFocus).then(function(response){if(response.status===200&&typeof response.data.liked!='undefined'){_this._mounted&&_this.setState({liked:response.data.liked});if(response.data.liked)_this.props.s_like(userIdFocus);if(response.data.unliked)_this.props.s_like_unliked(userIdFocus);if(response.data.likedback)_this.props.s_like_likedback(userIdFocus);}}).catch(function(err){return console.log(err);});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x2){return _ref3.apply(this,arguments);};}();_this.handleClose=function(){_this._mounted&&_this.setState({user:_objectSpread({},DEFAULT_STATE),liked:false,showModal:false});};_this.closeReport=function(){_this._mounted&&_this.setState({openReport:false});};_this.openReport=function(){_this._mounted&&_this.setState({openReport:true});};_this.closeFake=function(){_this._mounted&&_this.setState({openFake:false});};_this.openFake=function(){_this._mounted&&_this.setState({openFake:true});};_this.closeHide=function(){_this._mounted&&_this.setState({openHide:false});};_this.openHide=function(){_this._mounted&&_this.setState({openHide:true});};_this.state=_objectSpread({},DEFAULT_STATE);_this._mounted=false;_this.state.interests=_this.props.interests;return _this;}_createClass(ModalUser,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){this._mounted&&this.setState(_objectSpread({},DEFAULT_STATE));this._mounted=false;}},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,user=_this$state.user,liked=_this$state.liked,like=_this$state.like,showModal=_this$state.showModal,openReport=_this$state.openReport,openFake=_this$state.openFake,openHide=_this$state.openHide,interests=_this$state.interests;return showModal&&typeof user.imgs!=='undefined'?React.createElement(\"div\",null,React.createElement(ModalUserActions,{openReport:openReport,closeReport:this.closeReport,openFake:openFake,closeFake:this.closeFake,openHide:openHide,closeHide:this.closeHide,userID:user.user_id}),React.createElement(Modal,{dimmer:\"blurring\",size:'tiny',open:showModal,onClose:this.handleClose,className:\"ModalCard\"},React.createElement(Modal.Header,{className:\"CardHeader\"},React.createElement(\"h1\",{className:\"CardHeaderTile\"},\" \",user.firstname,\" \",user.lastname,\", \",React.createElement(\"strong\",null,user.age))),React.createElement(Modal.Content,{className:\"ModalProfilView\"},React.createElement(\"p\",null,user.online?React.createElement(\"span\",{className:'Online'},React.createElement(Icon,{name:'circle'}),\"Online\"):React.createElement(\"span\",{className:'LastConnection'},React.createElement(Icon,{name:'circle'}),\"Online \",moment(user.last_date_online).fromNow())),like?React.createElement(\"span\",{className:'spanLike'},React.createElement(Icon,{name:'heart'}),\"Like your profile\"):null,React.createElement(Divider,{hidden:true}),React.createElement(Grid,{centered:true,columns:2},React.createElement(Grid.Column,{className:\"RowImages\"},React.createElement(Image,{rounded:true,size:\"medium\",src:user.imgs[0]})),React.createElement(Grid.Row,{className:\"RowImages\",centered:true,columns:4},user.imgs.map(function(img,i){if(i>0)return React.createElement(Grid.Column,{key:i},React.createElement(Image,{rounded:true,size:\"small\",src:user.imgs[i]}));return null;}))),React.createElement(Modal.Description,null,user.bio&&user.bio.length?React.createElement(Segment,{className:\"BioSegment\",textAlign:\"center\",inverted:true},React.createElement(\"p\",null,user.bio)):React.createElement(Divider,{hidden:true}),React.createElement(Segment,{basic:true,textAlign:'center'},React.createElement(Button.Group,{fluid:true,widths:4},React.createElement(Button,{size:\"small\",id:\"like\",onClick:function onClick(){return _this2.userLike(user.user_id);}},React.createElement(Icon,{name:\"heart\"}),liked?'Unlike':'Like'),React.createElement(Button,{size:\"small\",id:\"hide\",onClick:this.openHide},React.createElement(Icon,{name:\"user x\"}),\"Hide\"),React.createElement(Button,{size:\"small\",id:\"fake\",onClick:this.openFake},React.createElement(Icon,{name:\"user secret\"}),\"Fake\"),React.createElement(Button,{size:\"small\",id:\"blockuser\",onClick:this.openReport},React.createElement(Icon,{name:\"warning\"}),\"Signal\"))),React.createElement(Divider,{hidden:true}),React.createElement(Label.Group,{size:\"small\"},React.createElement(\"p\",null),user.interests.map(function(data,i){return React.createElement(Label,{className:interests.find(function(interest){return interest===data;})?classnames(\"interestLabel\",\"sameInterest\"):\"interestLabel\",id:i,key:i,data:data},React.createElement(\"strong\",null,\"#\"),data);})))))):null;}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(nextProps,prevState){if(nextProps.interests!==prevState.interests){return{interests:nextProps.interests};}return null;}// Ref\n}]);return ModalUser;}(React.Component);export default ModalUser;","map":{"version":3,"sources":["/Users/jv/Desktop/MatchApp/client/src/components/ModalUser/ModalUser.js"],"names":["Divider","Grid","Image","Label","Modal","Segment","Icon","Button","React","classnames","ModalUserActions","API","moment","require","DEFAULT_STATE","openHide","openReport","openFake","liked","interests","like","showModal","user","lastname","firstname","gender","interested","imgs","country","last_date_online","bio","age","likes","ModalUser","props","componentDidMount","_mounted","loadUser","userIdFocus","getUserIdProfile","then","res","status","setState","data","userLike","response","s_like","unliked","s_like_unliked","likedback","s_like_likedback","catch","err","console","log","handleClose","closeReport","closeFake","closeHide","state","user_id","online","fromNow","map","img","i","length","find","interest","nextProps","prevState","Component"],"mappings":"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","sourcesContent":["import {Divider, Grid, Image, Label, Modal, Segment, Icon} from \"semantic-ui-react\";\nimport Button from \"semantic-ui-react/dist/commonjs/elements/Button\";\nimport React from \"react\";\nimport classnames from 'classnames';\nimport ModalUserActions from \"./ModalUserActions\";\nimport API from \"../../utils/API\";\nconst moment = require('moment');\n\n\nconst DEFAULT_STATE = {\n    openHide: false,\n    openReport: false,\n    openFake: false,\n    liked: false,\n    interests: '',\n    like: false,\n    showModal: false,\n    user: {\n        lastname: '',\n        firstname: '',\n        interests: [],\n        gender: [],\n        interested: [],\n        imgs: [],\n        country: '',\n        last_date_online: '',\n        bio: '',\n        age: '',\n        likes: ''\n    },\n};\n\nclass ModalUser extends React.Component {\n\n    constructor(props){\n        super(props);\n        this.state = {...DEFAULT_STATE};\n        this._mounted = false;\n        this.state.interests = this.props.interests\n\n    }\n\n    componentDidMount = async() => {\n        this._mounted = true;\n    };\n    componentWillUnmount() {\n        this._mounted && this.setState({...DEFAULT_STATE});\n        this._mounted = false;\n    }\n\n    static getDerivedStateFromProps(nextProps, prevState){\n        if (nextProps.interests !== prevState.interests) {\n            return ({interests: nextProps.interests});\n        }\n        return null;\n    }\n    // Ref\n    loadUser = (userIdFocus) => {\n        API.getUserIdProfile(userIdFocus)\n            .then(async (res) => {\n                if (res.status === 200)\n                    this._mounted && this.setState({user: res.data.user, showModal: true, liked: res.data.user.liked, like: res.data.like});\n            });\n    };\n\n    // Like\n    userLike = async(userIdFocus) => {\n        await API.userLike(userIdFocus)\n            .then(response => {\n                if (response.status === 200 && typeof response.data.liked != 'undefined') {\n                    this._mounted && this.setState({liked: response.data.liked});\n                    if (response.data.liked) this.props.s_like(userIdFocus);\n                    if (response.data.unliked) this.props.s_like_unliked(userIdFocus);\n                    if (response.data.likedback) this.props.s_like_likedback(userIdFocus);\n                }\n            })\n            .catch(err => console.log(err));\n    };\n    // Modal\n    handleClose = () => {this._mounted && this.setState({ user: {...DEFAULT_STATE}, liked: false, showModal: false});};\n    closeReport = () => { this._mounted && this.setState({openReport: false})};\n    openReport = () => {this._mounted && this.setState({openReport: true})};\n    closeFake = () => { this._mounted && this.setState({openFake: false})};\n    openFake = () => {this._mounted && this.setState({openFake: true})};\n    closeHide = () => { this._mounted && this.setState({openHide: false})};\n    openHide = () => {this._mounted && this.setState({openHide: true})};\n    render() {\n        const {user, liked, like, showModal, openReport, openFake, openHide, interests } = this.state;\n        return (\n            showModal && typeof user.imgs !== 'undefined' ?\n            <div>\n                <ModalUserActions\n                    openReport={openReport}\n                    closeReport={this.closeReport}\n                    openFake={openFake}\n                    closeFake={this.closeFake}\n                    openHide={openHide}\n                    closeHide={this.closeHide}\n                    userID={user.user_id}\n                />\n                <Modal\n                    dimmer={\"blurring\"}\n                    size={'tiny'}\n                    open={showModal}\n                    onClose={this.handleClose}\n                    className=\"ModalCard\">\n                    <Modal.Header className=\"CardHeader\"><h1\n                        className=\"CardHeaderTile\"> {user.firstname} {user.lastname}, <strong>{user.age}</strong></h1>\n                    </Modal.Header>\n                    <Modal.Content className=\"ModalProfilView\">\n                        <p>\n                            {user.online ?\n                                <span className={'Online'}>\n                                    <Icon name={'circle'} />\n                                    Online\n                                </span> :\n                                <span className={'LastConnection'}>\n                                     <Icon name={'circle'} />\n                                    Online {moment(user.last_date_online).fromNow()}\n                                </span>\n                            }\n                        </p>\n                        {like ?\n                            <span className={'spanLike'}>\n                                <Icon name={'heart'} />\n                                Like your profile\n                            </span> :\n                            null\n                        }\n                        <Divider hidden/>\n                        <Grid centered columns={2}>\n                            <Grid.Column className=\"RowImages\">\n                                <Image rounded size='medium' src={user.imgs[0]}/>\n                            </Grid.Column>\n                            <Grid.Row className=\"RowImages\" centered columns={4}>\n                                {user.imgs.map((img, i) => {\n                                    if (i > 0)\n                                        return (\n                                            <Grid.Column key={i}>\n                                                <Image rounded size='small' src={user.imgs[i]}/>\n                                            </Grid.Column>\n                                        );\n                                    return null;\n                                })}\n                            </Grid.Row>\n                        </Grid>\n                        <Modal.Description>\n                            {user.bio && user.bio.length ?\n                                <Segment className=\"BioSegment\" textAlign=\"center\" inverted>\n                                    <p>{user.bio}</p>\n                                </Segment> : <Divider hidden />\n                            }\n                            <Segment basic textAlign={'center'}>\n                                <Button.Group fluid widths={4}>\n                                    <Button size='small' id='like' onClick={() => this.userLike(user.user_id)}>\n                                        <Icon name='heart'/>\n                                        {liked ? 'Unlike' : 'Like'}\n                                    </Button>\n                                    <Button size='small' id='hide' onClick={this.openHide}>\n                                        <Icon name='user x'/>\n                                        Hide\n                                    </Button>\n                                    <Button size='small' id='fake' onClick={this.openFake}>\n                                        <Icon name='user secret'/>\n                                        Fake\n                                    </Button>\n                                    <Button size='small' id='blockuser' onClick={this.openReport}>\n                                        <Icon name='warning'/>\n                                        Signal\n                                    </Button>\n                                </Button.Group>\n                            </Segment>\n                            <Divider hidden/>\n                            <Label.Group size='small'>\n                                <p/>\n                                {user.interests.map((data, i) => {\n                                    return (\n                                        <Label\n                                            className={interests.find(interest => interest === data) ? classnames(\"interestLabel\",\"sameInterest\") : \"interestLabel\"}\n                                            id={i}\n                                            key={i}\n                                            data={data}>\n                                            <strong>#</strong>{data}</Label>\n                                    )\n                                })}\n                            </Label.Group>\n                        </Modal.Description>\n                    </Modal.Content>\n                </Modal>\n            </div> : null\n        )\n    }\n}\n\nexport default ModalUser;"]},"metadata":{},"sourceType":"module"}