{"ast":null,"code":"import _defineProperty from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import VALIDATE from'../../utils/validation';import API from\"../../utils/API\";import{store}from'react-notifications-component';import{Container,Image,Form,Button,Dimmer,Loader,Divider}from'semantic-ui-react';var DEFAULT_STATE={password:\"\",passwordconfirm:\"\",warnings:[],loading:false,w_password:\"\",w_passwordconfirm:\"\"};var DEFAULT_ERRORS={w_password:\"\",w_passwordconfirm:\"\"};var ChangePassword=/*#__PURE__*/function(_React$Component){_inherits(ChangePassword,_React$Component);function ChangePassword(props){var _this;_classCallCheck(this,ChangePassword);_this=_possibleConstructorReturn(this,_getPrototypeOf(ChangePassword).call(this,props));_this.send=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _this$state,password,passwordconfirm;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:// Clear warnings\n_this.warnings=_objectSpread({},DEFAULT_ERRORS);_this$state=_this.state,password=_this$state.password,passwordconfirm=_this$state.passwordconfirm;// Check Validity\nif(_this._mounted)_this.setState({loading:true});_context2.next=5;return VALIDATE.sleepLoader(300).then(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!VALIDATE.validatePassword(password)||!VALIDATE.validatePassword(passwordconfirm))_this.warnings.w_password=\"Please enter a strong password\";if(password!==passwordconfirm)_this.warnings.w_passwordconfirm=\"Passwords are not the same\";if(VALIDATE.checkWarnings(_this.warnings)){_context.next=7;break;}_context.next=5;return API.changepassword(_this.params.token,password,passwordconfirm).then(function(response){if(response.status===200)store.addNotification({title:'Password updated',message:\"Your password has been successfully updated\",type:\"success\",insert:\"top\",container:\"top-right\",animationIn:[\"animated\",\"fadeIn\"],animationOut:[\"animated\",\"fadeOut\"],dismiss:{duration:10000,onScreen:true}});if(typeof _this.props.match.params.token!=='undefined')_this.props.history.push(\"/login\");}).catch(function(error){if(error.response.status===400){_this.setState({w_password:error.response.data.warnings});}});case 5:_context.next=8;break;case 7:if(_this._mounted)_this.setState(_objectSpread({},_this.warnings));case 8:case\"end\":return _context.stop();}}},_callee);})));case 5:if(_this._mounted)_this.setState({loading:false});case 6:case\"end\":return _context2.stop();}}},_callee2);}));_this.handleChange=function(event){var w_password=_this.state.w_password;if(event.target.id===\"password\"&&w_password&&w_password.length>0)_this.setState({w_password:\"\"});_this.setState(_defineProperty({},event.target.id,event.target.value));};_this.state=_objectSpread({},DEFAULT_STATE);_this.warnings=_objectSpread({},DEFAULT_ERRORS);_this._mounted=false;_this.params=null;return _this;}_createClass(ChangePassword,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){this._mounted=false;}},{key:\"componentDidMount\",value:function componentDidMount(){this._mounted=true;this.params=this.props.match.params;}},{key:\"render\",value:function render(){var _this2=this;var _this$state2=this.state,loading=_this$state2.loading,w_password=_this$state2.w_password,w_passwordconfirm=_this$state2.w_passwordconfirm;var HelpLinks=function HelpLinks(){if(typeof _this2.props.match.params.token!=='undefined')return React.createElement(\"div\",{className:\"loginNoAccount\"},React.createElement(\"p\",{className:\"loginForgot\"},React.createElement(\"a\",{href:\"/forgotpassword\"},React.createElement(\"strong\",null,\"Send a reset link\"))),React.createElement(\"p\",null,\"No account ? \",React.createElement(\"a\",{href:\"/signup\"},\"Register\")));else return null;};return React.createElement(Container,{className:\"loginModal\"},React.createElement(Dimmer,{active:loading},React.createElement(Loader,{size:\"big\"},\"Request...\")),React.createElement(Divider,{hidden:true}),React.createElement(Image,{className:\"img-fluid\",src:\"/img/MatchApp-Logo.png\",alt:\"Responsive image\",size:\"medium\",centered:true}),React.createElement(\"div\",{className:\"shape\"}),React.createElement(Divider,{hidden:true}),React.createElement(\"h1\",{className:\"loginh1\"},\"Change Password\"),React.createElement(Form,{className:\"loginForm\"},React.createElement(Form.Field,{className:\"inputPassword\"},React.createElement(Form.Input,{error:w_password&&w_password.length>0?{content:w_password,pointing:'below'}:null,icon:\"lock\",iconPosition:\"left\",id:\"password\",onChange:this.handleChange,type:\"password\",size:\"huge\",placeholder:\"Password\"})),React.createElement(Form.Field,{className:\"inputPassword\"},React.createElement(Form.Input,{error:w_passwordconfirm&&w_passwordconfirm.length>0?{content:w_passwordconfirm,pointing:'below'}:null,icon:\"lock\",iconPosition:\"left\",id:\"passwordconfirm\",onChange:this.handleChange,type:\"password\",size:\"huge\",placeholder:\"Confirm Password\"})),React.createElement(Divider,{hidden:true}),React.createElement(Button,{className:\"loginButton\",loading:loading,size:\"huge\",type:\"submit\",onClick:this.send},\"Reset my password\")),React.createElement(Divider,{hidden:true}),React.createElement(HelpLinks,null),React.createElement(Divider,{hidden:true}));}}]);return ChangePassword;}(React.Component);export default ChangePassword;","map":{"version":3,"sources":["/Users/jv/Desktop/MatchApp/client/src/components/ForgotPassword/ChangePassword.js"],"names":["React","VALIDATE","API","store","Container","Image","Form","Button","Dimmer","Loader","Divider","DEFAULT_STATE","password","passwordconfirm","warnings","loading","w_password","w_passwordconfirm","DEFAULT_ERRORS","ChangePassword","props","send","state","_mounted","setState","sleepLoader","then","validatePassword","checkWarnings","changepassword","params","token","response","status","addNotification","title","message","type","insert","container","animationIn","animationOut","dismiss","duration","onScreen","match","history","push","catch","error","data","handleChange","event","target","id","length","value","HelpLinks","content","pointing","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport VALIDATE from '../../utils/validation';\nimport API from \"../../utils/API\";\nimport { store } from 'react-notifications-component';\nimport {Container, Image, Form, Button, Dimmer, Loader, Divider} from 'semantic-ui-react';\n\nconst DEFAULT_STATE = {\n    password: \"\",\n    passwordconfirm : \"\",\n    warnings: [],\n    loading: false,\n    w_password: \"\",\n    w_passwordconfirm: \"\",\n};\n\nconst DEFAULT_ERRORS = {\n    w_password: \"\",\n    w_passwordconfirm: \"\",\n};\n\nclass ChangePassword extends React.Component {\n\n    constructor (props) {\n        super(props);\n        this.state = {...DEFAULT_STATE};\n        this.warnings = {...DEFAULT_ERRORS};\n        this._mounted = false;\n        this.params = null;\n    };\n\n    componentWillUnmount() {\n        this._mounted = false;\n    }\n\n    componentDidMount() {\n        this._mounted = true;\n        this.params = this.props.match.params;\n    }\n\n    send = async() => {\n        // Clear warnings\n        this.warnings = {...DEFAULT_ERRORS};\n        const {password, passwordconfirm} = this.state;\n        // Check Validity\n        if (this._mounted)\n            this.setState({loading: true});\n        await VALIDATE.sleepLoader(300)\n            .then(async () => {\n                if (!VALIDATE.validatePassword(password) || !VALIDATE.validatePassword(passwordconfirm))\n                    this.warnings.w_password = \"Please enter a strong password\";\n                if  (password !== passwordconfirm)\n                    this.warnings.w_passwordconfirm = \"Passwords are not the same\";\n                if (!VALIDATE.checkWarnings(this.warnings)) {\n                    await API.changepassword(this.params.token, password, passwordconfirm)\n                        .then(response => {\n                            if (response.status === 200)\n                                store.addNotification({\n                                    title: 'Password updated',\n                                    message: \"Your password has been successfully updated\",\n                                    type: \"success\",\n                                    insert: \"top\",\n                                    container: \"top-right\",\n                                    animationIn: [\"animated\", \"fadeIn\"],\n                                    animationOut: [\"animated\", \"fadeOut\"],\n                                    dismiss: {\n                                        duration: 10000,\n                                        onScreen: true\n                                    }\n                                });\n                            if (typeof this.props.match.params.token !== 'undefined')\n                                this.props.history.push(\"/login\");\n                        })\n                        .catch(error => {\n                            if (error.response.status === 400){\n                                this.setState({w_password: error.response.data.warnings});\n                            }\n                        })\n                } else if (this._mounted)\n                    this.setState({...this.warnings});\n            });\n        if (this._mounted)\n            this.setState({loading: false});\n    };\n\n    handleChange = (event) => {\n        const {w_password} = this.state;\n        if (event.target.id === \"password\" && w_password && w_password.length > 0)\n            this.setState({w_password: \"\"});\n        this.setState({[event.target.id]: event.target.value});\n    }\n\n\n    render() {\n        const {loading, w_password, w_passwordconfirm} = this.state;\n        const HelpLinks = () => {\n            if (typeof this.props.match.params.token !== 'undefined')\n                return (\n                    <div className=\"loginNoAccount\">\n                        <p className=\"loginForgot\">\n                            <a  href=\"/forgotpassword\"\n                            >\n                                <strong>Send a reset link</strong>\n                            </a>\n                        </p>\n                        <p>No account ? <a href=\"/signup\">Register</a></p>\n                    </div>\n                )\n            else return null;\n        }\n        return (\n            <Container className=\"loginModal\">\n                <Dimmer active={loading}>\n                    <Loader size='big'>Request...</Loader>\n                </Dimmer>\n                <Divider hidden />\n                <Image className=\"img-fluid\"\n                       src=\"/img/MatchApp-Logo.png\"\n                       alt=\"Responsive image\"\n                       size=\"medium\"\n                       centered />\n                <div className=\"shape\"></div>\n                <Divider hidden />\n                <h1 className=\"loginh1\">Change Password</h1>\n                <Form className=\"loginForm\">\n                    <Form.Field className=\"inputPassword\">\n                        <Form.Input\n                            error={w_password && w_password.length > 0 ? {content: w_password, pointing: 'below'} : null}\n                            icon='lock'\n                            iconPosition='left'\n                            id=\"password\"\n                            onChange={this.handleChange}\n                            type=\"password\"\n                            size=\"huge\"\n                            placeholder=\"Password\"/>\n                    </Form.Field>\n                    <Form.Field className=\"inputPassword\">\n                        <Form.Input\n                            error={w_passwordconfirm && w_passwordconfirm.length > 0 ? {content: w_passwordconfirm, pointing: 'below'} : null}\n                            icon='lock'\n                            iconPosition='left'\n                            id=\"passwordconfirm\"\n                            onChange={this.handleChange}\n                            type=\"password\"\n                            size=\"huge\"\n                            placeholder=\"Confirm Password\"/>\n                    </Form.Field>\n                    <Divider hidden />\n                    <Button className=\"loginButton\"\n                            loading={loading} size='huge'\n                            type=\"submit\"\n                            onClick={this.send}>\n                        Reset my password\n                    </Button>\n                </Form>\n                <Divider hidden />\n                <HelpLinks />\n                <Divider hidden />\n            </Container>\n        );\n    }\n}\n\nexport default ChangePassword;"]},"metadata":{},"sourceType":"module"}