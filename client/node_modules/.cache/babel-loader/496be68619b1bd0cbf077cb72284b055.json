{"ast":null,"code":"var _jsxFileName = \"/Users/jv/Desktop/MatchApp/client/src/App.js\";\nimport React, { Component } from \"react\";\nimport { Route, Switch, Redirect } from \"react-router-dom\";\nimport Signup from \"./components/Signup/Signup.js\";\nimport Wall from './containers/Wall/Wall';\nimport Admin from './containers/Admin/Admin';\nimport Chat from './containers/Chat/Chat';\nimport Login from \"./components/Login/Login\";\nimport EditProfile from \"./components/EditProfil/EditProfil\";\nimport withAuth from \"./utils/withAuth\";\nimport withAuthAdmin from \"./utils/withAuthAdmin\";\nimport './App.scss';\nimport Menu from './components/Menu/Menu';\nimport Notifications from \"./components/Notifications/Notifications\";\nimport NotificationsHistory from \"./components/Notifications/NotificationsHistory/NotificationsHistory\";\nimport ForgotPassword from './components/ForgotPassword/ForgotPassword';\nimport ChangePassword from './components/ForgotPassword/ChangePassword';\nimport ChangeMyEmail from \"./components/EditProfil/ChangeMyMail/ChangeMyMail\";\nimport ChangeLocation from \"./components/EditProfil/ChangeLocation/ChangeLocation\";\nimport Cookies from \"universal-cookie\";\nconst cookies = new Cookies();\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.updateNotifs = () => {\n      this.innerRefNotifHistory && this.innerRefNotifHistory.current && this.innerRefNotifHistory.current.updateNotifs();\n      this.innerRef && this.innerRef.current && this.innerRef.current.updateNotifNb();\n    };\n\n    this.updateNotifNbNavbar = async () => {\n      this.innerRef && this.innerRef.current && this.innerRef.current.updateNotifNb();\n    };\n\n    this.s_message_send = (to_user_id, message, timestamp) => {\n      this.innerRefSockets && this.innerRefSockets.current && this.innerRefSockets.current.s_message_send(to_user_id, message, timestamp);\n    };\n\n    this.s_message_receive = (message, user_id_emitter, user_id_receiver) => {\n      this.innerRefChat && this.innerRefChat.current && this.innerRefChat.current.s_message_receive(message, user_id_emitter, user_id_receiver);\n    };\n\n    this.s_wallvisit = userIdFocus => {\n      this.innerRefSockets && this.innerRefSockets.current && this.innerRefSockets.current.s_wallvisit(userIdFocus);\n    };\n\n    this.s_like_likedback = userIdFocus => {\n      this.innerRefSockets && this.innerRefSockets.current && this.innerRefSockets.current.s_like_likedback(userIdFocus);\n    };\n\n    this.s_like_unliked = userIdFocus => {\n      this.innerRefSockets && this.innerRefSockets.current && this.innerRefSockets.current.s_like_unliked(userIdFocus);\n    };\n\n    this.s_like = userIdFocus => {\n      this.innerRefSockets && this.innerRefSockets.current && this.innerRefSockets.current.s_like(userIdFocus);\n    };\n\n    this.s_userlogin = token => {\n      this.innerRefSockets && this.innerRefSockets.current && this.innerRefSockets.current.s_userlogin(token);\n    };\n\n    this.s_logout = () => {\n      this.innerRefSockets && this.innerRefSockets.current && this.innerRefSockets.current.s_logout();\n    };\n\n    this.isConnected = bool => {\n      this.innerRef && this.innerRef.current.handleConnected(bool);\n\n      if (bool) {\n        if (cookies.get('token')) this.s_userlogin(cookies.get('token'));\n      }\n    };\n\n    this._mounted = false;\n    this.innerRef = React.createRef();\n    this.innerRefChat = React.createRef();\n    this.innerRefSockets = React.createRef();\n    this.innerRefNotifHistory = React.createRef();\n    this._mounted = false;\n  }\n\n  componentDidMount() {\n    this._mounted = true;\n  } // Notifications update\n\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, React.createElement(Menu, {\n      ref: this.innerRef,\n      logout: this.s_logout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }), React.createElement(Notifications, {\n      ref: this.innerRefSockets,\n      s_message_receive: this.s_message_receive,\n      updateNotifs: this.updateNotifs,\n      push: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      component: withAuth(() => React.createElement(Wall, {\n        sWallVisit: this.s_wallvisit,\n        s_like_likedback: this.s_like_likedback,\n        s_like_unliked: this.s_like_unliked,\n        s_like: this.s_like,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/profile\",\n      component: withAuth(EditProfile),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/signup\",\n      component: Signup,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/admin\",\n      component: withAuthAdmin(Admin),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/forgotpassword/:token\",\n      component: ChangePassword,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/forgotpassword\",\n      component: ForgotPassword,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/changepassword\",\n      component: withAuth(ChangePassword),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/changemail\",\n      component: withAuth(ChangeMyEmail),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/changelocation\",\n      component: withAuth(ChangeLocation),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/chat\",\n      component: withAuth(() => React.createElement(Chat, {\n        ref: this.innerRefChat,\n        s_message_send: this.s_message_send,\n        sWallVisit: this.s_wallvisit,\n        s_like_likedback: this.s_like_likedback,\n        s_like_unliked: this.s_like_unliked,\n        s_like: this.s_like,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/notifications\",\n      component: withAuth(() => React.createElement(NotificationsHistory, {\n        ref: this.innerRefNotifHistory,\n        s_like_likedback: this.s_like_likedback,\n        s_like_unliked: this.s_like_unliked,\n        updateNotifNb: this.updateNotifNbNavbar,\n        sWallVisit: this.s_wallvisit,\n        s_like: this.s_like,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/login\",\n      component: props => React.createElement(Login, Object.assign({}, props, {\n        s_userlogin: this.s_userlogin,\n        handleConnected: this.isConnected,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/login/:token\",\n      component: Login,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }), React.createElement(Redirect, {\n      from: \"*\",\n      to: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/jv/Desktop/MatchApp/client/src/App.js"],"names":["React","Component","Route","Switch","Redirect","Signup","Wall","Admin","Chat","Login","EditProfile","withAuth","withAuthAdmin","Menu","Notifications","NotificationsHistory","ForgotPassword","ChangePassword","ChangeMyEmail","ChangeLocation","Cookies","cookies","App","constructor","props","updateNotifs","innerRefNotifHistory","current","innerRef","updateNotifNb","updateNotifNbNavbar","s_message_send","to_user_id","message","timestamp","innerRefSockets","s_message_receive","user_id_emitter","user_id_receiver","innerRefChat","s_wallvisit","userIdFocus","s_like_likedback","s_like_unliked","s_like","s_userlogin","token","s_logout","isConnected","bool","handleConnected","get","_mounted","createRef","componentDidMount","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Route, Switch, Redirect} from \"react-router-dom\";\nimport Signup from \"./components/Signup/Signup.js\";\nimport Wall from './containers/Wall/Wall';\nimport Admin from './containers/Admin/Admin';\nimport Chat from './containers/Chat/Chat';\nimport Login from \"./components/Login/Login\";\nimport EditProfile from \"./components/EditProfil/EditProfil\";\nimport withAuth from \"./utils/withAuth\";\nimport withAuthAdmin from \"./utils/withAuthAdmin\";\nimport './App.scss';\nimport Menu from './components/Menu/Menu';\nimport Notifications from \"./components/Notifications/Notifications\";\nimport NotificationsHistory from \"./components/Notifications/NotificationsHistory/NotificationsHistory\";\nimport ForgotPassword from './components/ForgotPassword/ForgotPassword';\nimport ChangePassword from './components/ForgotPassword/ChangePassword';\nimport ChangeMyEmail from \"./components/EditProfil/ChangeMyMail/ChangeMyMail\";\nimport ChangeLocation from \"./components/EditProfil/ChangeLocation/ChangeLocation\";\nimport Cookies from \"universal-cookie\";\nconst cookies = new Cookies();\n\nclass App extends Component {\n\n    constructor(props) {\n        super(props);\n        this._mounted = false;\n        this.innerRef = React.createRef();\n        this.innerRefChat = React.createRef();\n        this.innerRefSockets = React.createRef();\n        this.innerRefNotifHistory = React.createRef();\n        this._mounted = false;\n    }\n\n    componentDidMount() { this._mounted = true }\n\n    // Notifications update\n    updateNotifs = () => {\n        this.innerRefNotifHistory && this.innerRefNotifHistory.current && this.innerRefNotifHistory.current.updateNotifs();\n        this.innerRef && this.innerRef.current && this.innerRef.current.updateNotifNb();\n    };\n    updateNotifNbNavbar = async () => { this.innerRef &&  this.innerRef.current && this.innerRef.current.updateNotifNb() };\n\n    // Chat Sockets\n    s_message_send = (to_user_id, message, timestamp) => { this.innerRefSockets && this.innerRefSockets.current && this.innerRefSockets.current.s_message_send(to_user_id, message, timestamp); };\n    s_message_receive = (message, user_id_emitter, user_id_receiver) => { this.innerRefChat && this.innerRefChat.current && this.innerRefChat.current.s_message_receive(message, user_id_emitter, user_id_receiver) };\n\n    // Sockets\n    s_wallvisit = (userIdFocus) => { this.innerRefSockets && this.innerRefSockets.current && this.innerRefSockets.current.s_wallvisit(userIdFocus) };\n    s_like_likedback = (userIdFocus) => { this.innerRefSockets && this.innerRefSockets.current && this.innerRefSockets.current.s_like_likedback(userIdFocus) };\n    s_like_unliked = (userIdFocus) => { this.innerRefSockets && this.innerRefSockets.current && this.innerRefSockets.current.s_like_unliked(userIdFocus) };\n    s_like = (userIdFocus) => { this.innerRefSockets && this.innerRefSockets.current && this.innerRefSockets.current.s_like(userIdFocus) };\n    s_userlogin = (token) => { this.innerRefSockets && this.innerRefSockets.current && this.innerRefSockets.current.s_userlogin(token) };\n    s_logout = () => { this.innerRefSockets && this.innerRefSockets.current && this.innerRefSockets.current.s_logout() };\n\n    // Handle Connect\n    isConnected = (bool) => {\n        this.innerRef && this.innerRef.current.handleConnected(bool);\n        if (bool) {\n            if (cookies.get('token'))\n                this.s_userlogin(cookies.get('token'));\n        }\n    };\n\n    render() {\n        return (\n            <div>\n                <Menu\n                    ref={this.innerRef}\n                    logout={this.s_logout}\n                />\n                <Notifications\n                    ref={this.innerRefSockets}\n                    s_message_receive={this.s_message_receive}\n                    updateNotifs={this.updateNotifs}\n                    push\n                />\n                <div className=\"content\">\n                    <Switch>\n                        <Route\n                            exact\n                            path=\"/\"\n                            component={withAuth(() =>\n                                <Wall\n                                    sWallVisit={this.s_wallvisit}\n                                    s_like_likedback={this.s_like_likedback}\n                                    s_like_unliked={this.s_like_unliked}\n                                    s_like={this.s_like} />)}\n                        />\n                        <Route exact path=\"/profile\" component={withAuth(EditProfile)}/>\n                        <Route exact path=\"/signup\" component={Signup}/>\n                        <Route exact path=\"/admin\" component={withAuthAdmin(Admin)}/>\n                        <Route exact path=\"/forgotpassword/:token\" component={ChangePassword}/>\n                        <Route exact path=\"/forgotpassword\" component={ForgotPassword}/>\n                        <Route exact path=\"/changepassword\" component={withAuth(ChangePassword)}/>\n                        <Route exact path=\"/changemail\" component={withAuth(ChangeMyEmail)}/>\n                        <Route exact path=\"/changelocation\" component={withAuth(ChangeLocation)}/>\n                        <Route\n                            exact\n                            path=\"/chat\"\n                            component={withAuth(() =>\n                                <Chat\n                                    ref={this.innerRefChat}\n                                    s_message_send={this.s_message_send}\n                                    sWallVisit={this.s_wallvisit}\n                                    s_like_likedback={this.s_like_likedback}\n                                    s_like_unliked={this.s_like_unliked}\n                                    s_like={this.s_like} />)}\n                        />\n                        <Route\n                            exact\n                            path=\"/notifications\"\n                            component={withAuth(() =>\n                            <NotificationsHistory ref={this.innerRefNotifHistory}\n                               s_like_likedback={this.s_like_likedback}\n                               s_like_unliked={this.s_like_unliked}\n                               updateNotifNb={this.updateNotifNbNavbar}\n                               sWallVisit={this.s_wallvisit}\n                               s_like={this.s_like} />)}\n                        />\n                        <Route\n                            exact\n                            path=\"/login\"\n                            component={ (props) =>\n                               <Login\n                                   {...props}\n                                   s_userlogin={this.s_userlogin}\n                                   handleConnected={this.isConnected} />}\n                        />\n                        <Route exact path={\"/login/:token\"} component={Login}/>\n                        <Redirect from=\"*\" to=\"\"/>\n                    </Switch>\n                </div>\n            </div>\n        );\n    }\n}\nexport default App;"]},"metadata":{},"sourceType":"module"}