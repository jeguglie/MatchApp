{"ast":null,"code":"var _jsxFileName = \"/Users/jv/Desktop/MatchApp/client/src/App.js\";\nimport React, { Component } from \"react\";\nimport { Route, Switch } from \"react-router-dom\";\nimport Aux from './hoc/Aux';\nimport Signup from \"./components/Signup/Signup.js\";\nimport Wall from './containers/Wall/Wall';\nimport Login from \"./components/Login/Login\";\nimport EditProfile from \"./components/EditProfil/EditProfil\";\nimport withAuth from \"./utils/withAuth\";\nimport './App.scss';\nimport BootstrapMenu from './components/Menu/BootstrapMenu';\nimport Footer from './containers/Footer/Footer';\nimport API from \"./utils/API\";\nimport Notifications from \"./components/Notifications/Notifications\";\nimport NotificationsHistory from \"./components/Notifications/NotificationsHistory/NotificationsHistory\";\nimport ForgotPassword from './components/ForgotPassword/ForgotPassword';\nimport ChangePassword from './components/ForgotPassword/ChangePassword';\nimport ChangeMyEmail from \"./components/EditProfil/ChangeMyMail/ChangeMyMail\";\nimport io from 'socket.io-client';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.s_like = userIdFocus => {\n      this.socket.emit(\"like\", userIdFocus);\n    };\n\n    this.s_userlogin = () => {\n      this.socket.emit(\"userlogin\");\n    };\n\n    this.s_logout = () => {\n      this.socket.emit(\"logout\");\n    };\n\n    this.s_n_add = () => this.socket.on(\"getnotif\", () => this.updateNotifNb());\n\n    this.updateNotifNb = () => this.setState(prevState => ({\n      notifNb: prevState.notifNb - 1\n    }));\n\n    this.isConnected = bool => {\n      this.setState({\n        connected: bool\n      });\n    };\n\n    this.componentDidMount = async () => {\n      this._mounted = true;\n      this.socket.on(\"getnotif\", () => {\n        this._mounted && this.setState(prevState => ({\n          notifNb: prevState.notifNb + 1\n        }));\n      });\n      API.withAuth().then(async res => {\n        if (res.status === 200) {\n          this.setState({\n            connected: true\n          });\n          await API.getNotifNb().then(res => {\n            if (res.status === 200) this._mounted && this.setState({\n              notifNb: res.data.notifNb\n            });\n          });\n        } else throw new Error(res.error);\n      }).catch(() => {\n        this.setState({\n          connected: false\n        });\n      });\n    };\n\n    this.state = {\n      connected: false,\n      notifNb: 0\n    };\n    this._mounted = false;\n    this.socket = io('http://localhost:8000');\n    this.s_wallvisit = this.s_wallvisit.bind(this);\n  } // Sockets\n\n\n  s_wallvisit(userIdFocus) {\n    this.socket.emit(\"wall:visit\", userIdFocus);\n  }\n\n  render() {\n    const _this$state = this.state,\n          connected = _this$state.connected,\n          notifications = _this$state.notifications,\n          notifNb = _this$state.notifNb;\n    return React.createElement(Aux, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(BootstrapMenu, {\n      isConnected: connected,\n      NotifNb: notifNb,\n      handleConnected: this.isConnected,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }), React.createElement(Notifications, {\n      push: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      component: withAuth(() => React.createElement(Wall, {\n        sWallVisit: this.s_wallvisit,\n        s_like: this.s_like,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/profile\",\n      component: withAuth(EditProfile),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/signup\",\n      component: Signup,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/forgotpassword/:token\",\n      component: ChangePassword,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/forgotpassword\",\n      component: ForgotPassword,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/changepassword\",\n      component: ChangePassword,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/changemail\",\n      component: withAuth(ChangeMyEmail),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/notifications\",\n      component: withAuth(() => React.createElement(NotificationsHistory, {\n        updateNotifNb: this.updateNotifNb,\n        sWallVisit: this.s_wallvisit,\n        s_like: this.s_like,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      isConnected: connected,\n      path: \"/login\",\n      render: props => React.createElement(Login, Object.assign({}, props, {\n        s_userlogin: this.s_userlogin,\n        handleConnected: this.isConnected,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/login/:token\",\n      component: Login,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }))), React.createElement(Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/jv/Desktop/MatchApp/client/src/App.js"],"names":["React","Component","Route","Switch","Aux","Signup","Wall","Login","EditProfile","withAuth","BootstrapMenu","Footer","API","Notifications","NotificationsHistory","ForgotPassword","ChangePassword","ChangeMyEmail","io","App","constructor","props","s_like","userIdFocus","socket","emit","s_userlogin","s_logout","s_n_add","on","updateNotifNb","setState","prevState","notifNb","isConnected","bool","connected","componentDidMount","_mounted","then","res","status","getNotifNb","data","Error","error","catch","state","s_wallvisit","bind","render","notifications"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Route, Switch } from \"react-router-dom\";\nimport Aux from './hoc/Aux';\nimport Signup from \"./components/Signup/Signup.js\";\nimport Wall from './containers/Wall/Wall';\nimport Login from \"./components/Login/Login\";\nimport EditProfile from \"./components/EditProfil/EditProfil\";\nimport withAuth from \"./utils/withAuth\";\nimport './App.scss';\nimport BootstrapMenu from './components/Menu/BootstrapMenu';\nimport Footer from './containers/Footer/Footer';\nimport API from \"./utils/API\";\nimport Notifications from \"./components/Notifications/Notifications\";\nimport NotificationsHistory from \"./components/Notifications/NotificationsHistory/NotificationsHistory\";\nimport ForgotPassword from './components/ForgotPassword/ForgotPassword';\nimport ChangePassword from './components/ForgotPassword/ChangePassword';\nimport ChangeMyEmail from \"./components/EditProfil/ChangeMyMail/ChangeMyMail\";\nimport io from 'socket.io-client';\n\n\nclass App extends Component {\n\n    constructor(props){\n        super(props);\n        this.state = {\n            connected: false,\n            notifNb: 0,\n        };\n        this._mounted = false;\n        this.socket = io('http://localhost:8000');\n        this.s_wallvisit = this.s_wallvisit.bind(this);\n    }\n\n    // Sockets\n    s_wallvisit(userIdFocus){this.socket.emit(\"wall:visit\", userIdFocus)};\n    s_like = (userIdFocus) => {this.socket.emit(\"like\", userIdFocus)};\n    s_userlogin = () => {this.socket.emit(\"userlogin\")};\n    s_logout = () => {this.socket.emit(\"logout\")};\n    s_n_add = () => this.socket.on(\"getnotif\", () => this.updateNotifNb());\n\n    // Notifications\n    updateNotifNb = ()  => this.setState((prevState) => ( {notifNb: prevState.notifNb - 1} ));\n    isConnected = (bool) => {\n        this.setState({connected: bool});\n    };\n\n    componentDidMount = async() => {\n        this._mounted = true;\n        this.socket.on(\"getnotif\", () => { this._mounted && this.setState((prevState) => ( {notifNb: prevState.notifNb + 1} )) });\n        API.withAuth()\n            .then(async(res) => {\n                if (res.status === 200) {\n                    this.setState({connected: true});\n                    await API.getNotifNb()\n                        .then(res => {\n                            if (res.status === 200)\n                                this._mounted && this.setState({notifNb: res.data.notifNb})\n                        })\n                }\n                else\n                    throw new Error(res.error);\n            })\n            .catch(() => {this.setState({connected: false})});\n    }\n\n    render() {\n        const { connected, notifications, notifNb } = this.state;\n        return (\n            <Aux>\n                <BootstrapMenu isConnected={connected} NotifNb={notifNb} handleConnected={this.isConnected} />\n                <Notifications push/>\n                <div className=\"content\">\n                    <Switch>\n\n                        <Route exact path=\"/\" component={withAuth(() => <Wall sWallVisit={this.s_wallvisit} s_like={this.s_like}/>)}/>\n                        <Route exact path=\"/profile\" component={withAuth(EditProfile)} />\n                        <Route exact path=\"/signup\" component={Signup} />\n                        <Route exact path=\"/forgotpassword/:token\" component={ChangePassword} />\n                        <Route exact path=\"/forgotpassword\" component={ForgotPassword} />\n                        <Route exact path=\"/changepassword\" component={ChangePassword} />\n                        <Route exact path=\"/changemail\" component={withAuth(ChangeMyEmail)} />\n                        <Route exact path=\"/notifications\" component={withAuth(() => <NotificationsHistory updateNotifNb={this.updateNotifNb} sWallVisit={this.s_wallvisit} s_like={this.s_like}/>)}/>\n                        <Route exact isConnected={connected} path=\"/login\" render={(props) => <Login {...props} s_userlogin={this.s_userlogin} handleConnected={this.isConnected} />} />\n                        <Route exact path={\"/login/:token\"} component={Login} />\n                    </Switch>\n                </div>\n                <Footer />\n            </Aux>\n        );\n    }\n}\nexport default App;"]},"metadata":{},"sourceType":"module"}