{"ast":null,"code":"import _objectSpread from\"/Users/jeguglie/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/jeguglie/Desktop/MatchApp/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jeguglie/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/jeguglie/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jeguglie/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/jeguglie/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/jeguglie/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/jeguglie/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/inherits\";import _ from'lodash';import React,{Component}from'react';import API from\"../../../utils/API\";import{Grid,Progress,Icon,Divider,Search,Dimmer,Loader}from\"semantic-ui-react\";import Interests from\"./Interests/Interests\";import Warnings from'../../../components/Warnings/Warnings';var DEFAULT_STATE={interests:[],clear:false,isLoading:false,value:'',warnings:[],results:[],loading:false};var DEFAULT_STATE_SEARCH={\"isLoading\":false,\"results\":[],\"value\":\"\"};// Store data results BDD of interest here\nvar DATA=[];var AddInterests=/*#__PURE__*/function(_Component){_inherits(AddInterests,_Component);// state = DEFAULT_STATE\nfunction AddInterests(_props){var _this;_classCallCheck(this,AddInterests);_this=_possibleConstructorReturn(this,_getPrototypeOf(AddInterests).call(this,_props));_this.componentDidUpdate=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(props,state){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(props.complete!==state.complete)_this._mounted&&_this.setState({complete:props.complete});if(props.loading!==state.loading)_this._mounted&&_this.setState({loading:props.loading});case 2:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();_this.handleResultSelect=function(e,_ref2){var result=_ref2.result;return _this.setState({value:result.title.trim()});};_this.handleSearchChange=function(e,_ref3){var value=_ref3.value;_this.setState({isLoading:true,value:value});setTimeout(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var re,isMatch;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(_this.state.value.length<1)){_context2.next=2;break;}return _context2.abrupt(\"return\",_this.setState(DEFAULT_STATE_SEARCH));case 2:re=new RegExp(_.escapeRegExp(_this.state.value),'i');isMatch=function isMatch(result){return re.test(result.title);};_this.setState({isLoading:false,results:_.filter(DATA,isMatch).slice(0,3)});case 5:case\"end\":return _context2.stop();}}},_callee2);})),300);};_this.handleKeyDown=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(data){var regex,new_interest,interests,warnings;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(data.key==='Enter')){_context3.next=13;break;}// Regex for interest\nregex=new RegExp('/(^|\\\\B)#(?![0-9_]+\\\\b)([a-zA-Z0-9_]{1,30})(\\\\b|\\\\r)/g');new_interest=data.target.value;interests=_this.state.interests;warnings=[];if(!new_interest||new_interest.length<2)warnings.push(\"Your interest must contain between 2 and 20 characters\");if(regex.test(new_interest))warnings.push(\"Your interest is not valid. Only letter and numeric value is accepted\");if(!(warnings.length<1)){_context3.next=12;break;}_context3.next=10;return API.addInterests(new_interest).then(function(response){if(response.status===200&&_this._mounted){interests.push(new_interest);_this.setState({interests:interests,warnings:response.data.warnings,value:''});}}).catch(function(error){_this._mounted&&_this.setState({warnings:error.response.data.warnings});});case 10:_context3.next=13;break;case 12:_this.setState({warnings:warnings});case 13:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref5.apply(this,arguments);};}();_this.deleteInterest=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(_ref7){var data,i;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:data=_ref7.data,i=_ref7.i;return _context5.abrupt(\"return\",_this.setState(function(_ref8){var interests=_ref8.interests;return{interests:interests.filter(function(e,index){return i!==index;})};},/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:return _context4.abrupt(\"return\",API.deleteInterest(data).then(function(response){return response.status===200&&_this._mounted&&_this.setState({warnings:response.data.warnings});}).catch(function(error){return _this._mounted&&_this.setState({warnings:error.response.data.warnings});}));case 1:case\"end\":return _context4.stop();}}},_callee4);}))));case 2:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x4){return _ref6.apply(this,arguments);};}();_this.prevSection=function(){_this._mounted&&_this.setState({loading:true});_this.props.prevsection();};_this.nextSection=function(){_this._mounted&&_this.setState({loading:true});_this.props.nextsection();};_this.state=DEFAULT_STATE;return _this;}_createClass(AddInterests,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){this._mounted=false;var CLEAR_STATE={interests:[],clear:false,isLoading:false,value:'',warnings:[],results:[],loading:false};this.setState(_objectSpread({},CLEAR_STATE));DATA=[];}},{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var _this2=this;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:window.scrollTo(0,0);this._mounted=true;// Set loader and get progress bar\nthis.setState({loading:true,interests:[]});API.getInterests().then(function(response){DATA=response.data.results;}).catch(function(error){_this2._mounted&&_this2.setState({warnings:error.response.data.warnings});});API.getUserInterests().then(function(response){if(response.data.interests!==false){DEFAULT_STATE.interests=response.data.interests;_this2._mounted&&_this2.setState({interests:response.data.interests});}}).catch(function(error){_this2._mounted&&_this2.setState({warnings:error.response.data.warnings});});this._mounted&&this.setState({loading:false});case 6:case\"end\":return _context6.stop();}}},_callee6,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"showWarnings\",value:function showWarnings(warnings){if(warnings&&warnings.length)return React.createElement(Grid.Row,{centered:true,textAlign:\"center\"},React.createElement(\"div\",{className:\"loginWarnings\"},React.createElement(Warnings,{data:warnings})));else return null;}},{key:\"render\",value:function render(){var _this3=this;var prevSection=this.prevSection,nextSection=this.nextSection;var _this$state=this.state,isLoading=_this$state.isLoading,value=_this$state.value,results=_this$state.results,warnings=_this$state.warnings,interests=_this$state.interests;var ProgressBar=function ProgressBar(){return React.createElement(Progress,{percent:_this3.props.complete,progress:true,indicating:true,size:\"medium\"});};return React.createElement(\"div\",{className:\"AddInterests\"},React.createElement(ProgressBar,null),React.createElement(Dimmer,{active:this.state.loading},React.createElement(Loader,{size:\"massive\"})),React.createElement(\"div\",{className:\"shapeAddInterests\"}),React.createElement(Grid,{verticalAlign:\"middle\"},this.showWarnings(warnings),React.createElement(Grid.Row,{centered:true},React.createElement(Interests,{interests:interests,deleteInterest:this.deleteInterest}))),React.createElement(Divider,{hidden:true}),React.createElement(Grid,{verticalAlign:\"middle\",className:\"TellOthersBox\"},React.createElement(Divider,{hidden:true}),React.createElement(Grid.Row,{centered:true},React.createElement(\"h1\",{className:\"InterestsTitle\"},\"Tell others what do you like\")),React.createElement(Grid.Row,{centered:true,className:\"TextInfoInterestsRow\"},React.createElement(\"p\",{className:\"TextInfoInterests\"},\"Choose an existing interest increase your chances of match!\")),React.createElement(Grid.Row,{centered:true},React.createElement(Search,{icon:\"hashtag\",onKeyDown:this.handleKeyDown,size:\"huge\",loading:isLoading,onResultSelect:this.handleResultSelect,onSearchChange:_.debounce(this.handleSearchChange,500,{leading:true}),results:results,value:value,showNoResults:false})),React.createElement(Divider,{hidden:true})),React.createElement(Grid,null,React.createElement(Grid.Row,{centered:true},React.createElement(Icon,{className:\"EditProfilArrow\",name:\"arrow circle left\",size:\"huge\",onClick:prevSection}),React.createElement(Icon,{className:\"EditProfilArrow\",name:\"arrow circle right\",size:\"huge\",onClick:nextSection}))));}}]);return AddInterests;}(Component);export default AddInterests;","map":{"version":3,"sources":["/Users/jeguglie/Desktop/MatchApp/client/src/components/EditProfil/AddInterests/AddInterests.js"],"names":["_","React","Component","API","Grid","Progress","Icon","Divider","Search","Dimmer","Loader","Interests","Warnings","DEFAULT_STATE","interests","clear","isLoading","value","warnings","results","loading","DEFAULT_STATE_SEARCH","DATA","AddInterests","props","componentDidUpdate","state","complete","_mounted","setState","handleResultSelect","e","result","title","trim","handleSearchChange","setTimeout","length","re","RegExp","escapeRegExp","isMatch","test","filter","slice","handleKeyDown","data","key","regex","new_interest","target","push","addInterests","then","response","status","catch","error","deleteInterest","i","index","prevSection","prevsection","nextSection","nextsection","CLEAR_STATE","window","scrollTo","getInterests","getUserInterests","ProgressBar","showWarnings","debounce","leading"],"mappings":"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","sourcesContent":["import _ from 'lodash';\nimport React, {Component} from 'react';\nimport API from \"../../../utils/API\";\nimport {Grid, Progress, Icon, Divider, Search, Dimmer, Loader} from \"semantic-ui-react\";\nimport Interests from \"./Interests/Interests\";\nimport Warnings from '../../../components/Warnings/Warnings';\n\nconst DEFAULT_STATE = {\n    interests: [],\n    clear: false,\n    isLoading: false,\n    value: '',\n    warnings: [],\n    results: [],\n    loading: false,\n};\n\nconst DEFAULT_STATE_SEARCH = {\n    \"isLoading\": false,\n    \"results\": [],\n    \"value\": \"\"\n};\n// Store data results BDD of interest here\nlet DATA = [];\n\nclass AddInterests extends Component {\n    // state = DEFAULT_STATE\n\n    constructor(props){\n        super(props);\n        this.state = DEFAULT_STATE;\n    }\n\n    componentWillUnmount() {\n        this._mounted = false;\n        const CLEAR_STATE = {\n            interests: [],\n            clear: false,\n            isLoading: false,\n            value: '',\n            warnings: [],\n            results: [],\n            loading: false,\n        };\n        this.setState({...CLEAR_STATE});\n        DATA = [];\n    }\n\n    async componentDidMount() {\n        window.scrollTo(0, 0);\n        this._mounted = true;\n        // Set loader and get progress bar\n        this.setState({loading: true, interests: []});\n        API.getInterests()\n            .then(response => {\n                  DATA = response.data.results;\n            })\n            .catch(error => {\n                this._mounted && this.setState({warnings: error.response.data.warnings})\n            });\n        API.getUserInterests()\n            .then(response => {\n                if (response.data.interests !== false){\n                    DEFAULT_STATE.interests = response.data.interests;\n                    this._mounted && this.setState({interests: response.data.interests})\n                }\n            })\n            .catch(error => {\n                this._mounted && this.setState({warnings: error.response.data.warnings})\n            });\n            this._mounted && this.setState({loading: false});\n    }\n\n    componentDidUpdate = async(props, state) =>{\n        if (props.complete !== state.complete)\n            this._mounted && this.setState({complete: props.complete})\n        if (props.loading !== state.loading)\n            this._mounted && this.setState({loading: props.loading})\n    };\n\n    // Semantic UI Search\n    handleResultSelect = (e, { result }) => this.setState({ value: result.title.trim() })\n    handleSearchChange = (e, { value }) => {\n        this.setState({ isLoading: true, value });\n\n        setTimeout(async () => {\n            if (this.state.value.length < 1)\n                return this.setState(DEFAULT_STATE_SEARCH);\n            const re = new RegExp(_.escapeRegExp(this.state.value), 'i')\n            const isMatch = (result) => re.test(result.title)\n\n            this.setState({\n                isLoading: false,\n                results: _.filter(DATA, isMatch).slice(0,3),\n            })\n        }, 300)\n    };\n\n\n    handleKeyDown = async (data) => {\n        if (data.key === 'Enter') {\n            // Regex for interest\n            const regex = new RegExp('/(^|\\\\B)#(?![0-9_]+\\\\b)([a-zA-Z0-9_]{1,30})(\\\\b|\\\\r)/g');\n            let new_interest = data.target.value;\n            let interests = this.state.interests;\n            let warnings = [];\n            if (!new_interest || new_interest.length < 2)\n                warnings.push(\"Your interest must contain between 2 and 20 characters\");\n            if (regex.test(new_interest))\n                warnings.push(\"Your interest is not valid. Only letter and numeric value is accepted\");\n            if (warnings.length < 1) {\n                await API.addInterests(new_interest)\n                    .then(response => {\n                        if(response.status === 200 && this._mounted) {\n                            interests.push(new_interest);\n                            this.setState({interests: interests, warnings: response.data.warnings, value: ''})\n                        }\n                    })\n                    .catch((error) => {\n                        this._mounted\n                        && this.setState({warnings: error.response.data.warnings})\n                    })\n            } else\n                this.setState({ warnings });\n        }\n    };\n\n    deleteInterest = async ({ data, i }) =>\n        this.setState(({ interests }) => ({\n            interests: interests.filter((e, index) => i !== index)\n        }), async() =>\n            API.deleteInterest(data)\n                .then(response => response.status === 200 && this._mounted\n                    && this.setState({warnings: response.data.warnings}))\n                .catch(error => this._mounted\n                    && this.setState({warnings: error.response.data.warnings})));\n\n    showWarnings(warnings) {\n        if (warnings && warnings.length)\n            return (\n                <Grid.Row centered textAlign=\"center\">\n                    <div className=\"loginWarnings\">\n                        <Warnings data={warnings}/>\n                    </div>\n                </Grid.Row>\n            );\n        else\n            return null\n    };\n\n    prevSection = () => {\n        this._mounted && this.setState({loading: true});\n        this.props.prevsection();\n    };\n\n    nextSection = () => {\n        this._mounted && this.setState({loading: true});\n        this.props.nextsection();\n    };\n    render() {\n        const { prevSection, nextSection } = this;\n        const {isLoading, value, results, warnings, interests} = this.state;\n        const ProgressBar = () => (\n            <Progress\n                percent={this.props.complete}\n                progress\n                indicating\n                size=\"medium\"/>\n        );\n        return(\n            <div className=\"AddInterests\">\n                <ProgressBar />\n                <Dimmer active={this.state.loading}>\n                    <Loader size='massive'/>\n                </Dimmer>\n                <div className=\"shapeAddInterests\"></div>\n                <Grid verticalAlign={\"middle\"}>\n                    {this.showWarnings(warnings)}\n                    <Grid.Row centered>\n                        <Interests\n                            interests={interests}\n                            deleteInterest={this.deleteInterest} />\n                    </Grid.Row>\n                </Grid>\n                <Divider hidden />\n                <Grid verticalAlign=\"middle\" className=\"TellOthersBox\">\n                    <Divider hidden />\n                    <Grid.Row centered>\n                        <h1 className=\"InterestsTitle\">\n                            Tell others what do you like\n                        </h1>\n                    </Grid.Row>\n                    <Grid.Row centered className=\"TextInfoInterestsRow\">\n                        <p className=\"TextInfoInterests\">Choose an existing interest increase your chances of match!</p>\n                    </Grid.Row>\n                    <Grid.Row centered>\n                        <Search\n                            icon=\"hashtag\"\n                            onKeyDown={this.handleKeyDown}\n                            size=\"huge\"\n                            loading={isLoading}\n                            onResultSelect={this.handleResultSelect}\n                            onSearchChange={_.debounce(this.handleSearchChange, 500, { leading: true })}\n                            results={results}\n                            value={value}\n                            showNoResults={false} />\n                    </Grid.Row>\n                    <Divider hidden />\n                </Grid>\n                <Grid>\n                    <Grid.Row centered>\n                        <Icon\n                            className=\"EditProfilArrow\"\n                            name='arrow circle left'\n                            size=\"huge\"\n                            onClick={prevSection}/>\n                        <Icon\n                            className=\"EditProfilArrow\"\n                            name='arrow circle right'\n                            size=\"huge\"\n                            onClick={nextSection}/>\n                    </Grid.Row>\n                </Grid>\n            </div>\n            )\n\n    }\n}\n\nexport default AddInterests;"]},"metadata":{},"sourceType":"module"}