{"ast":null,"code":"var _jsxFileName = \"/Users/jv/Desktop/MatchApp/client/src/containers/Wall/Wall.js\";\nimport React from 'react';\nimport { withRouter } from \"react-router\";\nimport UserMiniCard from \"../../components/UserMiniCard/UserMiniCard\";\nimport API from './../../utils/API';\nimport InputRange from 'react-input-range';\nimport InfiniteScroll from 'react-infinite-scroller';\nimport { Button, Grid, Segment, Divider, Checkbox, Icon } from \"semantic-ui-react\";\nimport 'react-input-range/lib/css/index.css';\nimport Aux from './../../hoc/Aux';\nimport ModalUser from '../../components/ModalUser/ModalUser';\nimport SearchTags from './SearchTags/SearchTags';\nimport { store } from \"react-notifications-component\";\nconst DEFAULT_STATE = {\n  loadingModal: '',\n  nextUsers: '',\n  hasMoreContent: false,\n  clear: false,\n  users: [],\n  warnings: [],\n  loading: true,\n  userView: false,\n  userIdFocusLoading: null,\n  interests: [],\n  visible: false,\n  aDescendant: false,\n  dDescendant: false\n};\n\nclass Wall extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidMount = async () => {\n      this._mounted = true;\n      this._mounted && this.setState({\n        loading: true\n      });\n      await API.checkUserView().then(res => {\n        if (res.status === 200) {\n          this._mounted && this.setState({\n            userView: true\n          });\n          this.searchMatch();\n        }\n      }).catch(() => {\n        store.addNotification({\n          message: \"Please complete your profile\",\n          type: \"info\",\n          insert: \"top\",\n          container: \"top-right\",\n          animationIn: [\"animated\", \"fadeIn\"],\n          animationOut: [\"animated\", \"fadeOut\"],\n          dismiss: {\n            duration: 5000,\n            onScreen: true\n          }\n        });\n        this.props.history.push('/profile');\n      });\n    };\n\n    this.handleChange = async (value, id) => {\n      if (id === \"distanceRange\") this._mounted && this.setState({\n        distanceRange: value\n      });else if (id === \"ageRange\") this._mounted && this.setState({\n        ageRange: value\n      });else if (id === \"popularityRange\") this._mounted && this.setState({\n        popularityRange: value\n      });\n    };\n\n    this.searchMatch = async () => {\n      this._mounted && this.setState({\n        loading: true\n      });\n      const {\n        distanceRange,\n        ageRange,\n        popularityRange\n      } = this.state;\n      let users = [];\n      await API.getUsers(distanceRange, ageRange, popularityRange).then(response => {\n        if (response.status === 200) users = response.data.users;\n      });\n      let nextUsers = 0;\n      if (users.length > 20) nextUsers = users.slice(21);\n      this._mounted && this.setState({\n        nextUsers: nextUsers,\n        users: users.slice(0, 21),\n        hasMoreContent: users.length > 20\n      });\n      this._mounted && this.setState({\n        loading: false\n      });\n    };\n\n    this.clickedUser = async userIdFocus => {\n      // Send notification\n      this.props.sWallVisit(userIdFocus); // Inner Ref Modal\n\n      this.innerRefModal.current && this.innerRefModal.current.loadUser(userIdFocus);\n      this._mounted && this.setState({\n        loadingMinCard: true,\n        userIdFocusLoad: userIdFocus\n      });\n    };\n\n    this.handleBottomPage = () => {\n      const {\n        nextUsers,\n        users\n      } = this.state;\n\n      if (nextUsers.length) {\n        for (let i = 0; i < nextUsers.length && i <= 20; i++) users.push(nextUsers[i]);\n\n        this._mounted && this.setState({\n          users: users,\n          nextUsers: nextUsers.slice(21)\n        });\n      } else this._mounted && this.setState({\n        hasMoreContent: false\n      });\n    };\n\n    this.ageFilter = () => {\n      const {\n        aDescendant\n      } = this.state;\n      this.innerRef.current && this.innerRef.current.ageFilter(aDescendant);\n      this.setState({\n        aDescendant: !aDescendant\n      });\n    };\n\n    this.distanceFilter = () => {\n      const {\n        dDescendant\n      } = this.state;\n      this.innerRef.current && this.innerRef.current.distanceFilter(dDescendant);\n      this.setState({\n        dDescendant: !dDescendant\n      });\n    };\n\n    this.state = { ...DEFAULT_STATE\n    };\n    this._mounted = false;\n    this.innerRefModal = React.createRef();\n    this.innerRef = React.createRef();\n  }\n\n  componentWillUnmount() {\n    this._mounted = false;\n  } // Filter\n\n\n  render() {\n    const {\n      hasMoreContent,\n      loading,\n      users,\n      userIdFocusLoad,\n      distanceRange,\n      ageRange,\n      popularityRange\n    } = this.state;\n    const userscards = React.createElement(Grid.Column, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, React.createElement(Grid.Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: 'ButtonFilters',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, React.createElement(Button.Group, {\n      size: 'small',\n      widths: 3,\n      fluid: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: this.ageFilter,\n      icon: true,\n      labelPosition: \"left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      name: this.state.aDescendant ? 'arrow down' : 'arrow up',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }), \"Age\"), React.createElement(Button, {\n      onClick: this.distanceFilter,\n      icon: true,\n      labelPosition: \"left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      name: this.state.dDescendant ? 'arrow down' : 'arrow up',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }), \"Distance\"), React.createElement(Button, {\n      onClick: this.searchMatch,\n      icon: true,\n      labelPosition: \"left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      name: \"list ol\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }), \"Match\")))), React.createElement(Divider, {\n      hidden: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }), React.createElement(Grid, {\n      stackable: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, React.createElement(UserMiniCard, {\n      userIdFocus: userIdFocusLoad,\n      inner: true,\n      users: users,\n      ref: this.innerRef,\n      clickedUser: this.clickedUser,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    })));\n    return React.createElement(\"div\", {\n      className: \"WallContainer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, React.createElement(ModalUser, {\n      s_like: this.props.s_like,\n      s_like_unliked: this.props.s_like_unliked,\n      s_like_likedback: this.props.s_like_likedback,\n      ref: this.innerRefModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }), React.createElement(Grid, {\n      centered: true,\n      columns: 'equal',\n      stackable: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, search, userscards), React.createElement(InfiniteScroll, {\n      pageStart: 0,\n      loadMore: this.handleBottomPage,\n      hasMore: hasMoreContent,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, \" \"));\n  }\n\n}\n\nexport default withRouter(Wall);","map":{"version":3,"sources":["/Users/jv/Desktop/MatchApp/client/src/containers/Wall/Wall.js"],"names":["React","withRouter","UserMiniCard","API","InputRange","InfiniteScroll","Button","Grid","Segment","Divider","Checkbox","Icon","Aux","ModalUser","SearchTags","store","DEFAULT_STATE","loadingModal","nextUsers","hasMoreContent","clear","users","warnings","loading","userView","userIdFocusLoading","interests","visible","aDescendant","dDescendant","Wall","Component","constructor","props","componentDidMount","_mounted","setState","checkUserView","then","res","status","searchMatch","catch","addNotification","message","type","insert","container","animationIn","animationOut","dismiss","duration","onScreen","history","push","handleChange","value","id","distanceRange","ageRange","popularityRange","state","getUsers","response","data","length","slice","clickedUser","userIdFocus","sWallVisit","innerRefModal","current","loadUser","loadingMinCard","userIdFocusLoad","handleBottomPage","i","ageFilter","innerRef","distanceFilter","createRef","componentWillUnmount","render","userscards","s_like","s_like_unliked","s_like_likedback","search"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { withRouter } from \"react-router\";\nimport UserMiniCard from \"../../components/UserMiniCard/UserMiniCard\";\nimport API from './../../utils/API';\nimport InputRange from 'react-input-range';\nimport InfiniteScroll from 'react-infinite-scroller';\nimport {Button, Grid, Segment, Divider, Checkbox, Icon} from \"semantic-ui-react\";\nimport 'react-input-range/lib/css/index.css';\nimport Aux from './../../hoc/Aux';\nimport ModalUser from '../../components/ModalUser/ModalUser';\nimport SearchTags from './SearchTags/SearchTags'\nimport {store} from \"react-notifications-component\";\n\nconst DEFAULT_STATE = {\n    loadingModal: '',\n    nextUsers: '',\n    hasMoreContent: false,\n    clear: false,\n    users: [],\n    warnings: [],\n    loading: true,\n    userView: false,\n    userIdFocusLoading: null,\n    interests: [],\n    visible: false,\n    aDescendant: false,\n    dDescendant: false,\n};\nclass Wall extends React.Component {\n\n    constructor(props){\n        super(props);\n        this.state = {...DEFAULT_STATE};\n        this._mounted = false;\n        this.innerRefModal = React.createRef();\n        this.innerRef = React.createRef();\n    }\n\n    componentDidMount = async() => {\n        this._mounted = true;\n        this._mounted && this.setState({loading: true});\n        await API.checkUserView()\n            .then(res => {\n                if (res.status === 200) {\n                    this._mounted && this.setState({userView: true});\n                    this.searchMatch();\n                }\n            })\n            .catch( () => {\n                store.addNotification({\n                    message: \"Please complete your profile\",\n                    type: \"info\",\n                    insert: \"top\",\n                    container: \"top-right\",\n                    animationIn: [\"animated\", \"fadeIn\"],\n                    animationOut: [\"animated\", \"fadeOut\"],\n                    dismiss: {\n                        duration: 5000,\n                        onScreen: true\n                    }\n                });\n                this.props.history.push('/profile');\n            });\n    };\n\n    componentWillUnmount() {\n        this._mounted = false;\n    }\n\n    // Filter\n    handleChange = async(value, id) => {\n        if (id === \"distanceRange\")\n            this._mounted && this.setState({distanceRange: value});\n        else if (id === \"ageRange\")\n            this._mounted && this.setState({ageRange: value});\n        else if (id === \"popularityRange\")\n            this._mounted && this.setState({popularityRange: value});\n    };\n\n    // Search button handle\n    searchMatch = async() => {\n        this._mounted && this.setState({loading: true});\n        const {distanceRange, ageRange, popularityRange } = this.state;\n        let users = [];\n        await API.getUsers(distanceRange, ageRange, popularityRange)\n            .then(response => {\n                if (response.status === 200)\n                    users = response.data.users;\n            });\n        let nextUsers = 0;\n        if(users.length > 20)\n           nextUsers = users.slice(21);\n        this._mounted && this.setState({\n            nextUsers: nextUsers,\n            users: users.slice(0, 21),\n            hasMoreContent: users.length > 20\n        });\n        this._mounted && this.setState({loading: false});\n\n    };\n\n\n    clickedUser = async(userIdFocus) => {\n        // Send notification\n        this.props.sWallVisit(userIdFocus);\n        // Inner Ref Modal\n        this.innerRefModal.current && this.innerRefModal.current.loadUser(userIdFocus);\n        this._mounted && this.setState({ loadingMinCard: true, userIdFocusLoad: userIdFocus});\n    };\n    handleBottomPage = () => {\n        const { nextUsers, users } = this.state;\n        if (nextUsers.length){\n            for (let i = 0; i < nextUsers.length && i <= 20; i++)\n                users.push(nextUsers[i]);\n            this._mounted && this.setState({users: users, nextUsers: nextUsers.slice(21)});\n        }\n        else\n            this._mounted && this.setState({hasMoreContent: false});\n    };\n    // Filters\n    ageFilter = () => {\n        const {aDescendant } = this.state;\n        this.innerRef.current && this.innerRef.current.ageFilter(aDescendant);\n        this.setState({aDescendant: !aDescendant});\n    };\n\n    distanceFilter = () => {\n        const {dDescendant } = this.state;\n        this.innerRef.current && this.innerRef.current.distanceFilter(dDescendant);\n        this.setState({dDescendant: !dDescendant});\n    };\n\n    render() {\n        const { hasMoreContent, loading, users, userIdFocusLoad, distanceRange, ageRange, popularityRange } = this.state;\n        const userscards = (\n            <Grid.Column>\n                <Grid.Row>\n                    <div className={'ButtonFilters'}>\n                        <Button.Group size={'small'} widths={3} fluid>\n                            <Button\n                                onClick={this.ageFilter}\n                                icon\n                                labelPosition='left'>\n                                <Icon name={this.state.aDescendant ? 'arrow down' : 'arrow up'}/>Age</Button>\n                            <Button\n                                onClick={this.distanceFilter}\n                                icon\n                                labelPosition='left'>\n                                <Icon name={this.state.dDescendant ? 'arrow down' : 'arrow up'} />\n                                Distance\n                            </Button>\n                            <Button\n                                onClick={this.searchMatch}\n                                icon\n                                labelPosition='left'>\n                                <Icon name='list ol' />\n                                Match\n                            </Button>\n                        </Button.Group>\n                    </div>\n                </Grid.Row>\n                <Divider hidden/>\n                <Grid stackable >\n                    <UserMiniCard\n                        userIdFocus={userIdFocusLoad}\n                        inner\n                        users={users}\n                        ref={this.innerRef}\n                        clickedUser={this.clickedUser}\n                    />\n                </Grid>\n            </Grid.Column>\n        );\n\n        return (\n            <div className=\"WallContainer\">\n                <ModalUser s_like={this.props.s_like} s_like_unliked={this.props.s_like_unliked} s_like_likedback={this.props.s_like_likedback} ref={this.innerRefModal} />\n                <Grid centered columns={'equal'} stackable>\n                    {search}\n                    {userscards}\n                </Grid>\n                <InfiniteScroll\n                    pageStart={0}\n                    loadMore={this.handleBottomPage}\n                    hasMore={hasMoreContent}\n                > </InfiniteScroll>\n            </div>\n        );\n    }\n}\n\nexport default withRouter(Wall);"]},"metadata":{},"sourceType":"module"}