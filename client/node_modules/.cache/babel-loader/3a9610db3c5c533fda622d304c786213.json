{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import{List,Image,Button,Transition,Grid,Divider}from'semantic-ui-react';import API from'../../../utils/API';import ModalUser from\"../../ModalUser/ModalUser\";var moment=require('moment');var NotificationsHistory=/*#__PURE__*/function(_React$Component){_inherits(NotificationsHistory,_React$Component);function NotificationsHistory(props){var _this;_classCallCheck(this,NotificationsHistory);_this=_possibleConstructorReturn(this,_getPrototypeOf(NotificationsHistory).call(this,props));_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this._mounted=true;_context.next=3;return API.getNotifications().then(function(res){if(res.status===200)_this._mounted&&_this.setState({notifications:res.data.notifications});});case 3:_context.next=5;return API.getUserInterests().then(function(response){if(response.status===200)_this._mounted&&_this.setState({interests:response.data.interests});});case 5:case\"end\":return _context.stop();}}},_callee);}));_this.handleDismiss=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(i,notif_id){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(_this._mounted){_this.state.notifications.splice(i,1);_this._mounted&&_this.setState({notifications:_this.state.notifications},/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return API.deletenotif(notif_id);case 2:_context2.next=4;return _this.props.updateNotifNb();case 4:case\"end\":return _context2.stop();}}},_callee2);})));}case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x,_x2){return _ref2.apply(this,arguments);};}();_this.clickedUser=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(userIdFocus){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:// Send notification\n_this.props.sWallVisit(userIdFocus);// Inner Ref Modal\n_this.innerRefModal.current&&_this.innerRefModal.current.loadUser(userIdFocus);case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x3){return _ref4.apply(this,arguments);};}();_this.updateNotifs=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return API.getNotifications().then(/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(res){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(res.status===200){_this._mounted&&_this.setState({notifications:res.data.notifications});_this.props.updateNotifNb();}case 1:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x4){return _ref6.apply(this,arguments);};}());case 2:case\"end\":return _context6.stop();}}},_callee6);}));_this.state={notifications:[],userIdFocus:null,loading:false,interests:[]};_this._mounted=false;_this.innerRefModal=React.createRef();return _this;}_createClass(NotificationsHistory,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){this._mounted=false;}},{key:\"renderSwitchType\",value:function renderSwitchType(type){switch(type){case 1:return'Visited your profile  ';case 2:return'Send you a message  ';case 3:return'Liked you back  ';case 4:return'Remove his like  ';case 5:return'Like your profile  ';default:return null;}}},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,notifications=_this$state.notifications,interests=_this$state.interests;return React.createElement(Grid,{columns:1,textAlign:'center'},React.createElement(ModalUser,{interests:interests,s_like:this.props.s_like,s_like_unliked:this.props.s_like_unliked,s_like_likedback:this.props.s_like_likedback,ref:this.innerRefModal}),React.createElement(Grid.Column,{textAlign:'left',mobile:16,tablet:8,computer:8,largeScreen:8,widescreen:8},React.createElement(\"div\",{className:\"NotificationsTitle\"},React.createElement(Grid.Row,null,React.createElement(\"h1\",null,\"Notifications history\"))),React.createElement(\"div\",{className:\"NotificationsHistoric\"},React.createElement(Grid.Row,null,React.createElement(Transition.Group,{as:List,duration:200,verticalAlign:\"middle\"},notifications.length<1?React.createElement(\"div\",{className:'nothingtoshow'},React.createElement(\"p\",null,\"Nothing to show\")):null,notifications.map(function(obj,i){return React.createElement(List.Item,{key:i},React.createElement(List.Content,null,React.createElement(List.Content,{floated:\"right\"},React.createElement(Button,{onClick:function onClick(){return _this2.handleDismiss(i,obj.notif_id);}},\"Dismiss\")),React.createElement(Image,{avatar:true,src:obj.img_link}),React.createElement(List.Content,{as:\"a\",className:\"NotifFirstname\",onClick:function onClick(){return _this2.clickedUser(obj.user_id);}},' ',\" \",obj.firstname),React.createElement(List.Description,{className:\"NotifDesc\"},_this2.renderSwitchType(obj.type),\"on \",moment(obj.date).fromNow())),i<notifications.length-1?React.createElement(Divider,null):null);}))))));}}]);return NotificationsHistory;}(React.Component);export default NotificationsHistory;","map":{"version":3,"sources":["/Users/jv/Desktop/MatchApp/client/src/components/Notifications/NotificationsHistory/NotificationsHistory.js"],"names":["React","List","Image","Button","Transition","Grid","Divider","API","ModalUser","moment","require","NotificationsHistory","props","componentDidMount","_mounted","getNotifications","then","res","status","setState","notifications","data","getUserInterests","response","interests","handleDismiss","i","notif_id","state","splice","deletenotif","updateNotifNb","clickedUser","userIdFocus","sWallVisit","innerRefModal","current","loadUser","updateNotifs","loading","createRef","type","s_like","s_like_unliked","s_like_likedback","length","map","obj","img_link","user_id","firstname","renderSwitchType","date","fromNow","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {List, Image, Button, Transition, Grid, Divider} from 'semantic-ui-react';\nimport API from '../../../utils/API';\nimport ModalUser from \"../../ModalUser/ModalUser\";\nconst moment = require('moment');\n\n\nclass NotificationsHistory extends React.Component{\n\n    constructor(props){\n        super(props);\n        this.state = {\n            notifications: [],\n            userIdFocus: null,\n            loading: false,\n            interests: [],\n        };\n        this._mounted = false;\n        this.innerRefModal = React.createRef();\n\n    }\n\n    componentDidMount = async() => {\n        this._mounted = true;\n        await API.getNotifications()\n            .then(res => {\n                if (res.status === 200)\n                    this._mounted && this.setState({notifications: res.data.notifications})\n            });\n        await API.getUserInterests()\n            .then(response => {\n                if (response.status === 200)\n                    this._mounted && this.setState({interests: response.data.interests})\n            });\n    };\n\n\n\n    componentWillUnmount() {\n        this._mounted = false;\n    }\n\n    renderSwitchType(type) {\n        switch (type) {\n            case 1:\n                return 'Visited your profile  ';\n            case 2:\n                return 'Send you a message  ';\n            case 3:\n                return 'Liked you back  ';\n            case 4:\n                return 'Remove his like  ';\n            case 5:\n                return 'Like your profile  ';\n            default:\n                return null;\n        }\n    };\n\n    handleDismiss = async(i, notif_id) => {\n        if (this._mounted) {\n            this.state.notifications.splice(i, 1);\n            this._mounted && this.setState({notifications: this.state.notifications}, async() => {\n                await API.deletenotif(notif_id);\n                await this.props.updateNotifNb();\n            });\n        }\n    };\n\n    clickedUser = async(userIdFocus) => {\n        // Send notification\n        this.props.sWallVisit(userIdFocus);\n        // Inner Ref Modal\n        this.innerRefModal.current && this.innerRefModal.current.loadUser(userIdFocus);\n    };\n\n    updateNotifs = async() => {\n        await API.getNotifications()\n            .then(async(res) => {\n                if (res.status === 200) {\n                    this._mounted && this.setState({notifications: res.data.notifications});\n                    this.props.updateNotifNb();\n                }\n            })\n    }\n\n\n    render(){\n        const { notifications, interests } = this.state;\n        return (\n            <Grid columns={1} textAlign={'center'}>\n                    <ModalUser\n                        interests={interests}\n                        s_like={this.props.s_like}\n                        s_like_unliked={this.props.s_like_unliked}\n                        s_like_likedback={this.props.s_like_likedback}\n                        ref={this.innerRefModal} />\n                <Grid.Column textAlign={'left'} mobile={16} tablet={8} computer={8} largeScreen={8} widescreen={8}>\n                    <div className='NotificationsTitle'>\n                        <Grid.Row>\n                            <h1>Notifications history</h1>\n                        </Grid.Row>\n                    </div>\n                    <div className={\"NotificationsHistoric\"}>\n                        <Grid.Row>\n                            <Transition.Group\n                                as={List}\n                                duration={200}\n                                verticalAlign='middle'\n                            >\n                                {notifications.length < 1 ?\n                                    <div className={'nothingtoshow'}>\n                                        <p>Nothing to show</p>\n                                    </div> :\n                                    null\n                                }\n                                {notifications.map((obj, i) => (\n                                    <List.Item key={i}>\n                                        <List.Content>\n                                            <List.Content floated='right'>\n                                                <Button\n                                                    onClick={() => this.handleDismiss(i, obj.notif_id)}>\n                                                    Dismiss\n                                                </Button>\n                                            </List.Content>\n                                            <Image avatar src={obj.img_link}/>\n                                            <List.Content\n                                                as='a'\n                                                className={\"NotifFirstname\"}\n                                                onClick={() => this.clickedUser(obj.user_id)}\n                                            >\n                                                {' '} {obj.firstname}</List.Content>\n                                            <List.Description className={\"NotifDesc\"}>\n                                                {this.renderSwitchType(obj.type)}\n                                                on {moment(obj.date).fromNow()}\n                                            </List.Description>\n                                        </List.Content>\n                                        {i < notifications.length  - 1? <Divider /> : null}\n                                    </List.Item>\n                                ))}\n                            </Transition.Group>\n                        </Grid.Row>\n                    </div>\n                </Grid.Column>\n            </Grid>\n        )\n    }\n}\n\nexport default NotificationsHistory;"]},"metadata":{},"sourceType":"module"}