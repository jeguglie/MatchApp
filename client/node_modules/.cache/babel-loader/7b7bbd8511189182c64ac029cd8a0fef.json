{"ast":null,"code":"import _defineProperty from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import{Divider,Form,TextArea,Grid,Progress,Icon,Select}from'semantic-ui-react';import API from\"../../../utils/API\";import VALIDATE from\"../../../utils/validation\";import _ from\"lodash\";var countries=VALIDATE.countries;var age=VALIDATE.age;var genderOptions=[{key:'male',value:'male',text:'Male'},{key:'female',value:'female',text:'Female'}];var interestedOptions=[{key:'male',value:'male',text:'Male'},{key:'female',value:'female',text:'Female'},{key:'other',value:'other',text:'Other'}];var DEFAULT_STATE={lastname:\"\",firstname:\"\",interested:\"\",country:'',gender:\"\",bio:\"\",email:\"\",birthday:\"\",save:false,age:'',loading:false,complete:0,w_lastname:'',w_age:'',w_firstname:'',w_gender:'',w_interested:'',w_country:'',w_bio:''};var DEFAULT_ERRORS={w_age:'',w_lastname:'',w_firstname:'',w_gender:'',w_interested:'',w_country:'',w_bio:''};var BasicsInformations=/*#__PURE__*/function(_React$Component){_inherits(BasicsInformations,_React$Component);function BasicsInformations(props){var _this;_classCallCheck(this,BasicsInformations);_this=_possibleConstructorReturn(this,_getPrototypeOf(BasicsInformations).call(this,props));_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:window.scrollTo(0,0);_this._mounted=true;_this._mounted&&_this.setState({complete:_this.props.complete});_context.next=5;return API.getEditProfilValues().then(function(response){if(typeof response.data.findProfil!=='undefined')if(_this._mounted===true)_this._mounted&&_this.setState(_objectSpread({},response.data.findProfil));}).catch(function(error){if(typeof error.response!=='undefined'&&typeof error.response.data!=='undefined'&&typeof error.response.data.warnings!=='undefined')if(_this._mounted===true)_this._mounted&&_this.setState(_objectSpread({},error.response.data.warnings));});case 5:case\"end\":return _context.stop();}}},_callee);}));_this.handleSave=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var detectCountry,detectAge;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!_this._mounted){_context2.next=19;break;}_this.warnings=_objectSpread({},DEFAULT_ERRORS);// Check country\ndetectCountry=false;detectAge=false;_this.countries.forEach(function(data){if(data.value===_this.state.country){detectCountry=true;return;}});_this.age.forEach(function(data){if(data.value===_this.state.age){detectAge=true;return;}});// let detectCountry = this.countries.some(data => data.value === this.state.country);\nif(!detectCountry)_this.warnings.w_country=\"Please select a valid country\";if(!detectAge)_this.warnings.w_age=\"Please select your age\";if(!VALIDATE.validateFirstName(_this.state.lastname))_this.warnings.w_lastname=\"Only characters are allowed for your lastname. Must contain between 3 and 13 characters\";if(!VALIDATE.validateFirstName(_this.state.firstname))_this.warnings.w_firstname=\"Only characters are allowed for your first name. Must contain between 3 and 13 characters\";if(_this.state.interested!==\"male\"&&_this.state.interested!==\"female\"&&_this.state.interested!==\"other\")_this.warnings.w_interested=\"Please select a valid interest option\";if(_this.state.gender!==\"male\"&&_this.state.gender!==\"female\"&&_this.state.interested!==\"other\")_this.warnings.w_gender=\"Please select a valid gender option\";if(_this.state.bio&&_this.state.bio.length>90)_this.warnings.w_bio=\"Your bio is too long, please use 90 maximum characters. You have \"+_this.state.bio.length;if(!(!VALIDATE.checkWarnings(_this.warnings)===true)){_context2.next=18;break;}_context2.next=16;return API.updateEditProfilValues(_this.state).then(function(){_this._mounted&&_this.setState({loading:false},function(){_this.props.nextsection();});}).catch(function(error){if(typeof error.response!=='undefined'&&typeof error.response.data!=='undefined'&&typeof error.response.data.warnings!=='undefined')_this._mounted&&_this.setState(_objectSpread({},error.response.data.warnings));});case 16:_context2.next=19;break;case 18:_this._mounted&&_this.setState(_objectSpread({},_this.warnings));case 19:case\"end\":return _context2.stop();}}},_callee2);}));_this.handleChange=_.debounce(function(e,_ref3){var _this$setState;var value=_ref3.value,id=_ref3.id;_this._mounted&&_this.setState((_this$setState={},_defineProperty(_this$setState,id,value),_defineProperty(_this$setState,\"w_\"+id,''),_this$setState));},300);_this.handleChangeFocus=function(e){var id=e.target.id;if(_this.state.id!=='')_this._mounted&&_this.setState(_defineProperty({},id,''));};_this._mounted=false;_this.state=_objectSpread({},DEFAULT_STATE);_this.state.complete=_this.props.complete;// Set key for countries\n_this.countries=countries;_this.age=age;_this.age=_this.age.map(function(item,index){return{key:index,text:item.value,value:item.value};});_this.countries=_this.countries.map(function(item,index){return{key:index,text:item.value,value:item.value};});// Set default errors\n_this.warnings=_objectSpread({},DEFAULT_ERRORS);return _this;}_createClass(BasicsInformations,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){this._mounted=false;}},{key:\"render\",value:function render(){var _this$state=this.state,w_age=_this$state.w_age,w_firstname=_this$state.w_firstname,age=_this$state.age,w_lastname=_this$state.w_lastname,w_gender=_this$state.w_gender,w_interested=_this$state.w_interested,w_country=_this$state.w_country,w_bio=_this$state.w_bio,complete=_this$state.complete;var ProgressBar=function ProgressBar(){return React.createElement(Progress,{percent:complete,progress:true,indicating:true,size:\"medium\"});};return React.createElement(\"div\",{className:\"BasicInfosContainer\"},React.createElement(\"div\",{className:\"BasicInformations\"},React.createElement(ProgressBar,null),React.createElement(Grid,{textAlign:\"center\"},React.createElement(Grid.Row,{centered:true},React.createElement(\"h1\",{className:\"CompleteTitle\"},\"Complete Basics Informations\"))),React.createElement(\"div\",{className:\"shapeBasicsInfos\"}),React.createElement(Divider,{hidden:true}),React.createElement(Grid,{columns:1,doubling:true},React.createElement(Grid.Column,null,React.createElement(Form,{className:\"BasicInfosForm\"},React.createElement(Form.Field,{error:w_age.length>0?w_age:null,id:\"age\",control:Select,value:age?age.toString():'',options:this.age,label:\"Select your age\",placeholder:\"Your Age\",onChange:this.handleChange}),React.createElement(Form.Group,{widths:\"equal\"},React.createElement(Form.Input,{error:w_lastname.length>0?w_lastname:null,fluid:true,label:\"Last Name\",color:\"white\",id:\"lastname\",onClick:this.handleChangeFocus,onChange:this.handleChange,placeholder:this.state.lastname}),React.createElement(Form.Input,{error:w_firstname.length>0?w_firstname:null,fluid:true,label:\"First Name\",id:\"firstname\",content:this.state.firstname,placeholder:this.state.firstname,onChange:this.handleChange})),React.createElement(Form.Group,{widths:\"equal\",className:\"DropdownBasic\"},React.createElement(Form.Field,{error:w_gender.length>0?w_gender:null,id:\"gender\",control:Select,value:this.state.gender,placeholder:\"Select Gender\",options:genderOptions,label:\"Select Gender\",onChange:this.handleChange}),React.createElement(Form.Field,{error:w_interested.length>0?w_interested:null,id:\"interested\",control:Select,value:this.state.interested,options:interestedOptions,label:\"Interested by \",placeholder:\"Interested by\",onChange:this.handleChange})),React.createElement(Form.Group,{widths:\"equal\"},React.createElement(Form.Input,{fluid:true,disabled:true,label:\"Email\",id:\"email\",placeholder:this.state.email,onChange:this.handleChange}),React.createElement(Form.Field,{error:w_country.length>0?w_country:null,id:\"country\",control:Select,value:this.state.country,options:this.countries,label:\"Select Country\",placeholder:\"Country\",search:true,onChange:this.handleChange})),React.createElement(Form.Field,{error:w_bio.length>0?w_bio:null,label:\"Bio\",control:TextArea,id:\"bio\",placeholder:this.state.bio!=null&&this.state.bio.length?this.state.bio:'',onChange:this.handleChange}))),React.createElement(Divider,{hidden:true}),React.createElement(Grid.Row,{centered:true},React.createElement(Icon,{className:\"EditProfilArrow\",name:\"arrow circle right\",size:\"huge\",onClick:this.handleSave})))));}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(nextProps,prevState){if(nextProps.complete!==prevState.complete)return{complete:nextProps.complete};return null;}}]);return BasicsInformations;}(React.Component);export default BasicsInformations;","map":{"version":3,"sources":["/Users/jv/Desktop/MatchApp/client/src/components/EditProfil/BasicInformations/BasicsInformations.js"],"names":["React","Divider","Form","TextArea","Grid","Progress","Icon","Select","API","VALIDATE","_","countries","age","genderOptions","key","value","text","interestedOptions","DEFAULT_STATE","lastname","firstname","interested","country","gender","bio","email","birthday","save","loading","complete","w_lastname","w_age","w_firstname","w_gender","w_interested","w_country","w_bio","DEFAULT_ERRORS","BasicsInformations","props","componentDidMount","window","scrollTo","_mounted","setState","getEditProfilValues","then","response","data","findProfil","catch","error","warnings","handleSave","detectCountry","detectAge","forEach","state","validateFirstName","length","checkWarnings","updateEditProfilValues","nextsection","handleChange","debounce","e","id","handleChangeFocus","target","map","item","index","ProgressBar","toString","nextProps","prevState","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {Divider, Form, TextArea, Grid, Progress, Icon, Select} from 'semantic-ui-react';\nimport API from \"../../../utils/API\";\nimport VALIDATE from \"../../../utils/validation\";\nimport _ from \"lodash\";\nconst countries = VALIDATE.countries;\nconst age = VALIDATE.age;\nconst genderOptions = [\n    { key: 'male', value: 'male', text: 'Male' },\n    { key: 'female', value: 'female', text: 'Female' }\n];\nconst interestedOptions = [\n    { key: 'male', value: 'male', text: 'Male' },\n    { key: 'female', value: 'female', text: 'Female' },\n    { key: 'other', value: 'other', text: 'Other' },\n];\n\nconst DEFAULT_STATE = {\n    lastname: \"\",\n    firstname: \"\",\n    interested: \"\",\n    country: '',\n    gender: \"\",\n    bio: \"\",\n    email: \"\",\n    birthday: \"\",\n    save: false,\n    age: '',\n    loading: false,\n    complete: 0,\n    w_lastname: '',\n    w_age: '',\n    w_firstname: '',\n    w_gender: '',\n    w_interested: '',\n    w_country: '',\n    w_bio: '',\n};\n\nconst DEFAULT_ERRORS = {\n    w_age: '',\n    w_lastname: '',\n    w_firstname: '',\n    w_gender: '',\n    w_interested: '',\n    w_country: '',\n    w_bio: '',\n};\n\nclass BasicsInformations extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this._mounted = false;\n        this.state = {...DEFAULT_STATE};\n        this.state.complete = this.props.complete;\n        // Set key for countries\n        this.countries = countries;\n        this.age = age;\n        this.age = this.age.map((item, index) => ({key: index, text: item.value, value: item.value }));\n        this.countries = this.countries.map((item, index) => ({key: index, text: item.value, value: item.value }));\n        // Set default errors\n        this.warnings = {...DEFAULT_ERRORS};\n\n    }\n\n    componentWillUnmount() {\n        this._mounted = false;\n    }\n\n    static getDerivedStateFromProps(nextProps, prevState){\n        if(nextProps.complete !== prevState.complete)\n            return { complete: nextProps.complete};\n        return null;\n    }\n\n    componentDidMount = async() => {\n        window.scrollTo(0, 0)\n        this._mounted = true;\n        this._mounted && this.setState({complete: this.props.complete});\n        await API.getEditProfilValues()\n            .then((response) => {\n                if (typeof response.data.findProfil !== 'undefined')\n                    if (this._mounted === true)\n                        this._mounted && this.setState({...response.data.findProfil});\n            })\n            .catch((error) => {\n                if (typeof error.response !== 'undefined'\n                    && typeof error.response.data !== 'undefined' && typeof error.response.data.warnings !== 'undefined')\n                    if (this._mounted === true)\n                        this._mounted && this.setState({...error.response.data.warnings});\n            })\n    }\n\n    handleSave = async() => {\n        if (this._mounted) {\n            this.warnings = {...DEFAULT_ERRORS};\n            // Check country\n            let detectCountry = false;\n            let detectAge  = false;\n            this.countries.forEach((data) => {\n                if (data.value === this.state.country) {\n                    detectCountry = true;\n                    return;\n                }\n            });\n            this.age.forEach((data) => {\n                if (data.value === this.state.age) {\n                    detectAge = true;\n                    return;\n                }\n            });\n            // let detectCountry = this.countries.some(data => data.value === this.state.country);\n            if (!detectCountry)\n                this.warnings.w_country = \"Please select a valid country\";\n            if (!detectAge)\n                this.warnings.w_age = \"Please select your age\";\n            if (!VALIDATE.validateFirstName(this.state.lastname))\n                this.warnings.w_lastname = \"Only characters are allowed for your lastname. Must contain between 3 and 13 characters\";\n            if (!VALIDATE.validateFirstName(this.state.firstname))\n                this.warnings.w_firstname = \"Only characters are allowed for your first name. Must contain between 3 and 13 characters\";\n            if (this.state.interested !== \"male\" && this.state.interested !== \"female\" && this.state.interested !== \"other\")\n                this.warnings.w_interested = \"Please select a valid interest option\";\n            if (this.state.gender !== \"male\" && this.state.gender !== \"female\" && this.state.interested !== \"other\")\n                this.warnings.w_gender = \"Please select a valid gender option\";\n            if (this.state.bio && this.state.bio.length > 90)\n                this.warnings.w_bio = \"Your bio is too long, please use 90 maximum characters. You have \" + this.state.bio.length;\n            if (!VALIDATE.checkWarnings(this.warnings) === true) {\n                await API.updateEditProfilValues(this.state)\n                    .then(() => {\n                        this._mounted && this.setState({loading: false}, () => {\n                            this.props.nextsection();\n                        });\n                    })\n                    .catch(error => {\n                        if (typeof error.response !== 'undefined'\n                            && typeof error.response.data !== 'undefined' && typeof error.response.data.warnings !== 'undefined')\n                            this._mounted && this.setState({...error.response.data.warnings});\n                    });\n            } else\n                this._mounted && this.setState({...this.warnings});\n        }\n    };\n    handleChange = _.debounce((e, { value, id }) => {\n        this._mounted && this.setState({[id]: value, [\"w_\" + id]: ''});\n    }, 300);\n\n    handleChangeFocus = (e) => {\n        let id = e.target.id;\n        if (this.state.id !== '')\n            this._mounted && this.setState({[id]: ''});\n    }\n\n    render() {\n        const {w_age, w_firstname, age, w_lastname, w_gender, w_interested, w_country, w_bio, complete} = this.state;\n        const ProgressBar = () => (\n            <Progress\n                percent={complete}\n                progress\n                indicating\n                size=\"medium\"/>\n        );\n        return (\n            <div className=\"BasicInfosContainer\">\n                <div className=\"BasicInformations\">\n                    <ProgressBar />\n                    <Grid textAlign=\"center\">\n                        <Grid.Row centered>\n                            <h1 className=\"CompleteTitle\">Complete Basics Informations</h1>\n                        </Grid.Row>\n                    </Grid>\n                    <div className=\"shapeBasicsInfos\"></div>\n                    <Divider hidden />\n                    <Grid columns={1} doubling>\n                        <Grid.Column>\n                            <Form className=\"BasicInfosForm\">\n                                <Form.Field\n                                    error={w_age.length > 0 ? w_age : null}\n                                    id=\"age\"\n                                    control={Select}\n                                    value={age ? age.toString() : ''}\n                                    options={this.age}\n                                    label=\"Select your age\"\n                                    placeholder='Your Age'\n                                    onChange={this.handleChange}\n                                />\n                                <Form.Group widths='equal'>\n                                    <Form.Input\n                                        error={w_lastname.length > 0 ? w_lastname : null}\n                                        fluid\n                                        label='Last Name'\n                                        color=\"white\"\n                                        id=\"lastname\"\n                                        onClick={this.handleChangeFocus}\n                                        onChange={this.handleChange}\n                                        placeholder={this.state.lastname}\n                                    />\n                                    <Form.Input\n                                        error={w_firstname.length > 0 ? w_firstname : null}\n                                        fluid\n                                        label='First Name'\n                                        id=\"firstname\"\n                                        content={this.state.firstname}\n                                        placeholder={this.state.firstname}\n                                        onChange={this.handleChange}\n                                    />\n                                </Form.Group>\n                                <Form.Group widths='equal' className=\"DropdownBasic\">\n                                    <Form.Field\n                                        error={w_gender.length > 0 ? w_gender : null}\n                                        id=\"gender\"\n                                        control={Select}\n                                        value={this.state.gender}\n                                        placeholder=\"Select Gender\"\n                                        options={genderOptions}\n                                        label=\"Select Gender\"\n                                        onChange={this.handleChange}\n                                    />\n                                    <Form.Field\n                                        error={w_interested.length > 0 ? w_interested : null}\n                                        id=\"interested\"\n                                        control={Select}\n                                        value={this.state.interested}\n                                        options={interestedOptions}\n                                        label=\"Interested by \"\n                                        placeholder='Interested by'\n                                        onChange={this.handleChange}\n                                    />\n                                </Form.Group>\n                                <Form.Group widths='equal'>\n                                    <Form.Input\n                                        fluid\n                                        disabled\n                                        label='Email'\n                                        id=\"email\"\n                                        placeholder={this.state.email}\n                                        onChange={this.handleChange}\n                                    />\n                                    <Form.Field\n                                        error={w_country.length > 0 ? w_country : null}\n                                        id=\"country\"\n                                        control={Select}\n                                        value={this.state.country}\n                                        options={this.countries}\n                                        label=\"Select Country\"\n                                        placeholder='Country'\n                                        search\n                                        onChange={this.handleChange}\n                                    />\n                                </Form.Group>\n                                <Form.Field\n                                    error={w_bio.length > 0 ? w_bio : null}\n                                    label='Bio'\n                                    control={TextArea}\n                                    id=\"bio\"\n                                    placeholder={this.state.bio != null && this.state.bio.length ? this.state.bio : ''}\n                                    onChange={this.handleChange}\n                                />\n                            </Form>\n                        </Grid.Column>\n                        <Divider hidden />\n                        <Grid.Row centered>\n                            <Icon className=\"EditProfilArrow\"\n                                  name='arrow circle right'\n                                  size=\"huge\"\n                                  onClick={this.handleSave}/>\n                        </Grid.Row>\n                    </Grid>\n                </div>\n            </div>\n        )\n    }\n}\nexport default BasicsInformations;"]},"metadata":{},"sourceType":"module"}