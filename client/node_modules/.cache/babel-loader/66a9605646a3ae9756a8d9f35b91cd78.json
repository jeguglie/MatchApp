{"ast":null,"code":"import _defineProperty from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import Warnings from\"../Warnings/Warnings\";import VALIDATE from'../../utils/validation';import API from\"../../utils/API\";import{store}from'react-notifications-component';import{Container,Image,Form,Button,Dimmer,Loader,Divider}from'semantic-ui-react';var DEFAULT_STATE={email:\"\",password:\"\",warnings:[],loading:false,w_email:\"\"};var DEFAULT_ERRORS={w_email:\"\"};var ForgotPassword=/*#__PURE__*/function(_React$Component){_inherits(ForgotPassword,_React$Component);function ForgotPassword(props){var _this;_classCallCheck(this,ForgotPassword);_this=_possibleConstructorReturn(this,_getPrototypeOf(ForgotPassword).call(this,props));_this.send=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var email;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:// Clear warnings\n_this.warnings=_objectSpread({},DEFAULT_ERRORS);email=_this.state.email;// Check Validity\nif(_this._mounted)_this.setState({loading:true});_context2.next=5;return VALIDATE.sleepLoader(300).then(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!VALIDATE.validateEmail(email))_this.warnings.w_email=\"Please enter a valid email\";if(VALIDATE.checkWarnings(_this.warnings)){_context.next=6;break;}_context.next=4;return API.userforgot(email).then(function(response){if(response.status===200)store.addNotification({title:'Forgot Password',message:\"A reset link as been sent\",type:\"warning\",insert:\"top\",container:\"top-right\",animationIn:[\"animated\",\"fadeIn\"],animationOut:[\"animated\",\"fadeOut\"],dismiss:{duration:10000,onScreen:true}});}).catch(function(error){if(error.response.status===400){_this.setState({w_email:error.response.data.warnings});}});case 4:_context.next=7;break;case 6:if(_this._mounted)_this.setState(_objectSpread({},_this.warnings));case 7:case\"end\":return _context.stop();}}},_callee);})));case 5:if(_this._mounted)_this.setState({loading:false});case 6:case\"end\":return _context2.stop();}}},_callee2);}));_this.handleChange=function(event){var w_email=_this.state.w_email;if(event.target.id===\"email\"&&w_email&&w_email.length>0)_this.setState({w_email:\"\"});_this.setState(_defineProperty({},event.target.id,event.target.value));};_this.state=_objectSpread({},DEFAULT_STATE);_this.warnings=_objectSpread({},DEFAULT_ERRORS);_this._mounted=false;_this.params=null;return _this;}_createClass(ForgotPassword,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){this._mounted=false;}},{key:\"componentDidMount\",value:function componentDidMount(){this._mounted=true;this.params=this.props.match.params;}},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,loading=_this$state.loading,w_email=_this$state.w_email;return React.createElement(Container,{className:\"loginModal\"},React.createElement(Dimmer,{active:loading},React.createElement(Loader,{size:\"big\"},\"Request...\")),React.createElement(Divider,{hidden:true}),React.createElement(Image,{className:\"img-fluid\",src:\"/img/MatchApp-Logo.png\",alt:\"Responsive image\",size:\"medium\",centered:true}),React.createElement(\"div\",{className:\"loginWarnings\"},React.createElement(Warnings,{data:this.state.warnings})),React.createElement(\"div\",{className:\"shape\"}),React.createElement(Divider,{hidden:true}),React.createElement(\"h1\",{className:\"loginh1\"},\"Forgot Password\"),React.createElement(Warnings,null),React.createElement(Form,{className:\"loginForm\"},React.createElement(Form.Field,null,React.createElement(Form.Input,{error:w_email&&w_email.length>0?{content:w_email,pointing:'below'}:null,id:\"email\",icon:\"users\",iconPosition:\"left\",autoFocus:true,onChange:this.handleChange,size:\"huge\",placeholder:\"Email\"})),React.createElement(Divider,{hidden:true}),React.createElement(Button,{className:\"loginButton\",loading:loading,size:\"huge\",type:\"submit\",onClick:this.send},\"Send reset link\")),React.createElement(Divider,{hidden:true}),React.createElement(\"div\",{className:\"loginNoAccount\"},React.createElement(\"p\",null,\"No account ? \",React.createElement(\"a\",{href:\"# \",onClick:function onClick(e){e.preventDefault();_this2.props.history.push('/signup');}},\"Register\"))),React.createElement(Divider,{hidden:true}));}}]);return ForgotPassword;}(React.Component);export default ForgotPassword;","map":{"version":3,"sources":["/Users/jv/Desktop/MatchApp/client/src/components/ForgotPassword/ForgotPassword.js"],"names":["React","Warnings","VALIDATE","API","store","Container","Image","Form","Button","Dimmer","Loader","Divider","DEFAULT_STATE","email","password","warnings","loading","w_email","DEFAULT_ERRORS","ForgotPassword","props","send","state","_mounted","setState","sleepLoader","then","validateEmail","checkWarnings","userforgot","response","status","addNotification","title","message","type","insert","container","animationIn","animationOut","dismiss","duration","onScreen","catch","error","data","handleChange","event","target","id","length","value","params","match","content","pointing","e","preventDefault","history","push","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Warnings from \"../Warnings/Warnings\";\nimport VALIDATE from '../../utils/validation';\nimport API from \"../../utils/API\";\nimport { store } from 'react-notifications-component';\nimport {Container, Image, Form, Button, Dimmer, Loader, Divider} from 'semantic-ui-react';\n\nconst DEFAULT_STATE = {\n    email: \"\",\n    password: \"\",\n    warnings: [],\n    loading: false,\n    w_email: \"\",\n};\n\nconst DEFAULT_ERRORS = {\n    w_email: \"\",\n};\n\nclass ForgotPassword extends React.Component {\n\n    constructor (props) {\n        super(props);\n        this.state = {...DEFAULT_STATE};\n        this.warnings = {...DEFAULT_ERRORS};\n        this._mounted = false;\n        this.params = null;\n    };\n\n    componentWillUnmount() {\n        this._mounted = false;\n    }\n\n    componentDidMount() {\n        this._mounted = true;\n       this.params = this.props.match.params;\n\n    }\n\n    send = async() => {\n        // Clear warnings\n        this.warnings = {...DEFAULT_ERRORS};\n        const {email} = this.state;\n        // Check Validity\n        if (this._mounted)\n            this.setState({loading: true});\n        await VALIDATE.sleepLoader(300)\n            .then(async () => {\n                if (!VALIDATE.validateEmail(email))\n                    this.warnings.w_email = \"Please enter a valid email\";\n                if (!VALIDATE.checkWarnings(this.warnings)) {\n                    await API.userforgot(email)\n                        .then(response => {\n                            if (response.status === 200)\n                                store.addNotification({\n                                    title: 'Forgot Password',\n                                    message: \"A reset link as been sent\",\n                                    type: \"warning\",\n                                    insert: \"top\",\n                                    container: \"top-right\",\n                                    animationIn: [\"animated\", \"fadeIn\"],\n                                    animationOut: [\"animated\", \"fadeOut\"],\n                                    dismiss: {\n                                        duration: 10000,\n                                        onScreen: true\n                                    }\n                                });\n                        })\n                        .catch(error => {\n                            if (error.response.status === 400){\n                                this.setState({w_email: error.response.data.warnings});\n                            }\n                        })\n                } else if (this._mounted)\n                    this.setState({...this.warnings});\n            });\n        if (this._mounted)\n            this.setState({loading: false});\n    };\n\n    handleChange = (event) => {\n        const {w_email} = this.state;\n        if (event.target.id === \"email\" && w_email && w_email.length > 0)\n            this.setState({w_email: \"\"});\n        this.setState({[event.target.id]: event.target.value});\n    }\n\n\n    render() {\n        const {loading, w_email} = this.state;\n        return (\n            <Container className=\"loginModal\">\n                <Dimmer active={loading}>\n                    <Loader size='big'>Request...</Loader>\n                </Dimmer>\n                <Divider hidden />\n                <Image className=\"img-fluid\"\n                       src=\"/img/MatchApp-Logo.png\"\n                       alt=\"Responsive image\"\n                       size=\"medium\"\n                       centered />\n                <div className=\"loginWarnings\">\n                    <Warnings data={this.state.warnings}/>\n                </div>\n                <div className=\"shape\"></div>\n                <Divider hidden />\n                <h1 className=\"loginh1\">Forgot Password</h1>\n                <Warnings />\n                <Form className=\"loginForm\">\n                    <Form.Field>\n                        <Form.Input\n                            error={w_email && w_email.length > 0 ? {content: w_email, pointing: 'below'} : null}\n                            id=\"email\"\n                            icon='users'\n                            iconPosition='left'\n                            autoFocus\n                            onChange={this.handleChange}\n                            size=\"huge\"\n                            placeholder=\"Email\" />\n                    </Form.Field>\n                    <Divider hidden />\n                    <Button className=\"loginButton\"\n                            loading={loading} size='huge'\n                            type=\"submit\"\n                            onClick={this.send}>\n                        Send reset link\n                    </Button>\n                </Form>\n                <Divider hidden />\n                <div className=\"loginNoAccount\">\n                    <p>No account ? <a href='# ' onClick={(e) => {e.preventDefault(); this.props.history.push('/signup')}}>Register</a></p>\n                </div>\n                <Divider hidden />\n            </Container>\n        );\n    }\n}\n\nexport default ForgotPassword;"]},"metadata":{},"sourceType":"module"}