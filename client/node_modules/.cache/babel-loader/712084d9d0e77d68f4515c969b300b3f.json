{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jeguglie/Desktop/MatchApp/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jeguglie/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/jeguglie/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jeguglie/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/jeguglie/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/jeguglie/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/jeguglie/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import{Redirect}from'react-router-dom';import API from'../utils/API';import Cookies from'universal-cookie';var cookies=new Cookies();function withAuth(ComponentToProtect){var _temp;return _temp=/*#__PURE__*/function(_React$Component){_inherits(_temp,_React$Component);function _temp(props){var _this;_classCallCheck(this,_temp);_this=_possibleConstructorReturn(this,_getPrototypeOf(_temp).call(this,props));_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this._mounted=true;if(!cookies.get('token')){_context.next=6;break;}_context.next=4;return API.withAuthAdmin().then(function(res){if(res.status===200){_this._mounted&&_this.setState({loading:false});}else throw new Error(res.error);}).catch(function(){_this._mounted&&_this.setState({loading:false,redirect:true});});case 4:_context.next=7;break;case 6:_this._mounted&&_this.setState({loading:false,redirect:true});case 7:case\"end\":return _context.stop();}}},_callee);}));_this.state={loading:true,redirect:false};_this._mounted=false;return _this;}_createClass(_temp,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){this._mounted=false;}},{key:\"render\",value:function render(){var _this$state=this.state,loading=_this$state.loading,redirect=_this$state.redirect;if(loading)return null;if(redirect)return React.createElement(Redirect,{to:\"/\"});return React.createElement(ComponentToProtect,this.props);}}]);return _temp;}(React.Component),_temp;}export default withAuth;","map":{"version":3,"sources":["/Users/jeguglie/Desktop/MatchApp/client/src/utils/withAuthAdmin.js"],"names":["React","Redirect","API","Cookies","cookies","withAuth","ComponentToProtect","props","componentDidMount","_mounted","get","withAuthAdmin","then","res","status","setState","loading","Error","error","catch","redirect","state","Component"],"mappings":"i2BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,KAAyB,kBAAzB,CACA,MAAOC,CAAAA,GAAP,KAAgB,cAAhB,CACA,MAAOC,CAAAA,OAAP,KAAoB,kBAApB,CACA,GAAMC,CAAAA,OAAO,CAAG,GAAID,CAAAA,OAAJ,EAAhB,CAEA,QAASE,CAAAA,QAAT,CAAkBC,kBAAlB,CAAsC,WAClC,uFACI,eAAYC,KAAZ,CAAmB,uCACf,uEAAMA,KAAN,GADe,MAQnBC,iBARmB,sEAQA,mIACf,MAAKC,QAAL,CAAgB,IAAhB,CADe,IAEXL,OAAO,CAACM,GAAR,CAAY,OAAZ,CAFW,+CAGLR,CAAAA,GAAG,CAACS,aAAJ,GACDC,IADC,CACI,SAAAC,GAAG,CAAI,CACT,GAAIA,GAAG,CAACC,MAAJ,GAAe,GAAnB,CAAwB,CACpB,MAAKL,QAAL,EAAiB,MAAKM,QAAL,CAAc,CAACC,OAAO,CAAE,KAAV,CAAd,CAAjB,CACH,CAFD,IAII,MAAM,IAAIC,CAAAA,KAAJ,CAAUJ,GAAG,CAACK,KAAd,CAAN,CACP,CAPC,EAQDC,KARC,CAQK,UAAM,CAAC,MAAKV,QAAL,EAAiB,MAAKM,QAAL,CAAc,CAACC,OAAO,CAAE,KAAV,CAAiBI,QAAQ,CAAE,IAA3B,CAAd,CAAjB,CAAiE,CAR7E,CAHK,qCAaX,MAAKX,QAAL,EAAiB,MAAKM,QAAL,CAAc,CAACC,OAAO,CAAE,KAAV,CAAiBI,QAAQ,CAAE,IAA3B,CAAd,CAAjB,CAbW,sDARA,GAEf,MAAKC,KAAL,CAAa,CACTL,OAAO,CAAE,IADA,CAETI,QAAQ,CAAE,KAFD,CAAb,CAIA,MAAKX,QAAL,CAAgB,KAAhB,CANe,aAOlB,CARL,qFAyB2B,CACnB,KAAKA,QAAL,CAAgB,KAAhB,CACH,CA3BL,uCA6Bc,iBACwB,KAAKY,KAD7B,CACEL,OADF,aACEA,OADF,CACWI,QADX,aACWA,QADX,CAEN,GAAIJ,OAAJ,CACI,MAAO,KAAP,CACJ,GAAII,QAAJ,CACI,MAAO,qBAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EAAP,CACJ,MAAO,qBAAC,kBAAD,CAAwB,KAAKb,KAA7B,CAAP,CACH,CApCL,mBAAqBP,KAAK,CAACsB,SAA3B,QAsCH,CAED,cAAejB,CAAAA,QAAf","sourcesContent":["import React from 'react';\nimport { Redirect } from 'react-router-dom';\nimport API from '../utils/API';\nimport Cookies from 'universal-cookie';\nconst cookies = new Cookies();\n\nfunction withAuth(ComponentToProtect) {\n    return class extends React.Component {\n        constructor(props) {\n            super(props);\n            this.state = {\n                loading: true,\n                redirect: false,\n            };\n            this._mounted = false;\n        }\n        componentDidMount= async() => {\n            this._mounted = true;\n            if (cookies.get('token'))\n                await API.withAuthAdmin()\n                    .then(res => {\n                        if (res.status === 200) {\n                            this._mounted && this.setState({loading: false});\n                        }\n                        else\n                            throw new Error(res.error);\n                    })\n                    .catch(() => {this._mounted && this.setState({loading: false, redirect: true})});\n            else\n                this._mounted && this.setState({loading: false, redirect: true});\n        }\n\n        componentWillUnmount() {\n            this._mounted = false;\n        }\n\n        render () {\n            const { loading, redirect } = this.state;\n            if (loading)\n                return null;\n            if (redirect)\n                return <Redirect to=\"/\" />;\n            return <ComponentToProtect {...this.props} />\n        }\n    }\n}\n\nexport default withAuth;\n"]},"metadata":{},"sourceType":"module"}