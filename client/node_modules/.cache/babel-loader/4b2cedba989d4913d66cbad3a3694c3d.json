{"ast":null,"code":"import _defineProperty from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import API from\"../../utils/API\";import{Button,Container,Form,Image,Grid,Divider,Dimmer,Loader}from\"semantic-ui-react\";import Warnings from\"../Warnings/Warnings\";import validate from'../../utils/validation';import{store}from\"react-notifications-component\";import Cookies from'universal-cookie';var cookies=new Cookies();var DEFAULT_STATE={lastname:\"\",firstname:\"\",email:\"\",username:\"\",password:\"\",cpassword:\"\",warnings:[],loading:false,w_lastname:'',w_firstname:'',w_email:'',w_username:'',w_password:'',w_cpassword:'',fetch:false};var DEFAULT_ERRORS={w_lastname:'',w_firstname:'',w_email:'',w_username:'',w_password:'',w_cpassword:''};var Signup=/*#__PURE__*/function(_React$Component){_inherits(Signup,_React$Component);function Signup(props){var _this;_classCallCheck(this,Signup);_this=_possibleConstructorReturn(this,_getPrototypeOf(Signup).call(this,props));_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!cookies.get('token')){_context.next=3;break;}_context.next=3;return API.withAuth().then(function(res){if(res.status===200)_this.props.history.push('/profile');}).catch(function(){return cookies.remove('token');});case 3:_this._mounted=true;case 4:case\"end\":return _context.stop();}}},_callee);}));_this.send=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var _this$state,lastname,firstname,email,username,password,cpassword;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_this$state=_this.state,lastname=_this$state.lastname,firstname=_this$state.firstname,email=_this$state.email,username=_this$state.username,password=_this$state.password,cpassword=_this$state.cpassword;_this.warnings=_objectSpread({},DEFAULT_ERRORS);if(!validate.validateEmail(email))_this.warnings.w_email=\"Please enter a valid email.\";if(!validate.validatePassword(password))_this.warnings.w_password=\"Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters.\";if(cpassword.localeCompare(password)!==0)_this.warnings.w_cpassword=\"Password does not match.\";if(!validate.validateUsername(username))_this.warnings.w_username=\"Please use a valid username.\";if(!validate.validateFirstName(firstname))_this.warnings.w_firstname=\"Please use a valid first name.\";if(!validate.validateFirstName(lastname))_this.warnings.w_lastname=\"Please use a valid last name.\";// Check if warning is set\nif(validate.checkWarnings(_this.warnings)){_context3.next=15;break;}if(_this._mounted)_this.setState({loading:true});_context3.next=12;return validate.sleepLoader(1200).then(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return API.signup(lastname,firstname,email,username,password,cpassword).then(function(){_this.props.history.push('/login');store.addNotification({title:'Confirm your account',message:\"Use the link sent by mail to activate your account\",type:\"success\",insert:\"top\",container:\"top-right\",animationIn:[\"animated\",\"fadeIn\"],animationOut:[\"animated\",\"fadeOut\"],dismiss:{duration:10000,onScreen:true}});}).catch(function(error){if(typeof error.response.data!=='undefined'&&typeof error.response.data.warnings!=='undefined')if(_this._mounted)_this.setState(_objectSpread({},error.response.data.warnings));});case 2:case\"end\":return _context2.stop();}}},_callee2);})));case 12:if(_this._mounted)_this.setState({loading:false});_context3.next=16;break;case 15:if(_this._mounted){_this.setState(_objectSpread({},_this.warnings));}case 16:case\"end\":return _context3.stop();}}},_callee3);}));_this.handleChange=function(event){var key=\"w_\"+event.target.id;if(_this.state[key].length>0)_this.setState(_defineProperty({},key,''));_this.setState(_defineProperty({},event.target.id,event.target.value));};_this.state=_objectSpread({},DEFAULT_STATE);_this.warnings=_objectSpread({},DEFAULT_ERRORS);_this._mounted=false;return _this;}_createClass(Signup,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){this._mounted=false;}},{key:\"render\",value:function render(){var _this2=this;var _this$state2=this.state,warnings=_this$state2.warnings,w_firstname=_this$state2.w_firstname,w_lastname=_this$state2.w_lastname,w_email=_this$state2.w_email,w_password=_this$state2.w_password,w_username=_this$state2.w_username,w_cpassword=_this$state2.w_cpassword,loading=_this$state2.loading;return React.createElement(Container,{className:\"SignupModal\"},React.createElement(\"div\",{className:\"shapeSignup\"}),React.createElement(Dimmer,{active:loading},React.createElement(Loader,{size:\"massive\"},\"Create your account...\")),React.createElement(Divider,{hidden:true}),React.createElement(Image,{className:\"img-fluid\",src:\"/img/MatchApp-Logo.png\",alt:\"Responsive image\",size:\"medium\",centered:true}),React.createElement(Grid,{textAlign:\"center\"},React.createElement(Grid.Row,{centered:true},React.createElement(\"div\",{className:\"SignupWarnings\"},React.createElement(Warnings,{data:warnings})))),React.createElement(Container,{textAlign:\"center\"},React.createElement(\"h1\",{className:\"SignupTitle\"},\"Create an account\")),React.createElement(Divider,{hidden:true}),React.createElement(Grid,{className:\"SignupFormContainer\"},React.createElement(Grid.Row,{centered:true},React.createElement(Form,null,React.createElement(Form.Group,{widths:\"equal\"},React.createElement(Form.Input,{error:w_firstname.length>0?w_firstname:null,label:\"First Name\",id:\"firstname\",icon:\"user\",iconPosition:\"left\",autoFocus:true,onChange:this.handleChange,size:\"huge\",placeholder:\"First Name\",autoComplete:\"off\"}),React.createElement(Form.Input,{error:w_lastname.length>0?w_lastname:null,label:\"Last Name\",id:\"lastname\",icon:\"user\",iconPosition:\"left\",onChange:this.handleChange,size:\"huge\",placeholder:\"Last Name\",autoComplete:\"off\"})),React.createElement(Form.Group,{widths:\"equal\",onSubmit:this.send},React.createElement(Form.Input,{error:w_email.length>0?w_email:null,label:\"Email\",id:\"email\",icon:\"mail\",iconPosition:\"left\",onChange:this.handleChange,size:\"huge\",placeholder:\"Email\",autoComplete:\"off\"}),React.createElement(Form.Input,{error:w_username.length>0?w_username:null,label:\"Choose a username\",id:\"username\",icon:\"user circle\",iconPosition:\"left\",onChange:this.handleChange,size:\"huge\",placeholder:\"Choose a username\",autoComplete:\"off\"})),React.createElement(Form.Group,{widths:\"equal\"},React.createElement(Form.Input,{error:w_password.length>0?w_password:null,label:\"Password\",icon:\"lock\",iconPosition:\"left\",id:\"password\",onChange:this.handleChange,type:\"password\",size:\"huge\",placeholder:\"Password\"}),React.createElement(Form.Input,{error:w_cpassword.length>0?w_cpassword:null,label:\"Confirm Password\",icon:\"lock\",iconPosition:\"left\",id:\"cpassword\",onChange:this.handleChange,type:\"password\",size:\"huge\",placeholder:\"Confirm Password\"})),React.createElement(Divider,{hidden:true}),React.createElement(Grid,{textAlign:\"center\"},React.createElement(Grid.Row,{centered:true},React.createElement(Button,{className:\"SignupButton\",loading:loading,size:\"huge\",type:\"submit\",onClick:this.send},\"Register\")))))),React.createElement(Grid,{textAlign:\"center\"},React.createElement(Grid.Row,{centered:true},React.createElement(\"div\",{className:\"SignupNoAccount\"},React.createElement(\"p\",null,\"Have an account ? \",React.createElement(\"a\",{href:\"# \",onClick:function onClick(e){e.preventDefault();_this2.props.history.push('/login');}},\"Log in\"))))),React.createElement(Divider,{hidden:true}));}}]);return Signup;}(React.Component);export default Signup;","map":{"version":3,"sources":["/Users/jv/Desktop/MatchApp/client/src/components/Signup/Signup.js"],"names":["React","API","Button","Container","Form","Image","Grid","Divider","Dimmer","Loader","Warnings","validate","store","Cookies","cookies","DEFAULT_STATE","lastname","firstname","email","username","password","cpassword","warnings","loading","w_lastname","w_firstname","w_email","w_username","w_password","w_cpassword","fetch","DEFAULT_ERRORS","Signup","props","componentDidMount","get","withAuth","then","res","status","history","push","catch","remove","_mounted","send","state","validateEmail","validatePassword","localeCompare","validateUsername","validateFirstName","checkWarnings","setState","sleepLoader","signup","addNotification","title","message","type","insert","container","animationIn","animationOut","dismiss","duration","onScreen","error","response","data","handleChange","event","key","target","id","length","value","e","preventDefault","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport API from \"../../utils/API\";\nimport {Button, Container, Form, Image, Grid, Divider, Dimmer,Loader} from \"semantic-ui-react\";\nimport Warnings from \"../Warnings/Warnings\";\nimport validate from '../../utils/validation';\nimport {store} from \"react-notifications-component\";\nimport Cookies from 'universal-cookie';\nconst cookies = new Cookies();\n\nconst DEFAULT_STATE = {\n    lastname: \"\",\n    firstname: \"\",\n    email: \"\",\n    username: \"\",\n    password: \"\",\n    cpassword: \"\",\n    warnings: [],\n    loading: false,\n    w_lastname: '',\n    w_firstname: '',\n    w_email: '',\n    w_username: '',\n    w_password: '',\n    w_cpassword: '',\n    fetch: false,\n};\n\nconst DEFAULT_ERRORS = {\n    w_lastname: '',\n    w_firstname: '',\n    w_email: '',\n    w_username: '',\n    w_password: '',\n    w_cpassword: '',\n};\n\nclass Signup extends React.Component {\n    constructor (props){\n        super(props);\n        this.state = {...DEFAULT_STATE};\n        this.warnings = {...DEFAULT_ERRORS};\n        this._mounted = false;\n    }\n\n    componentDidMount = async() =>{\n        if (cookies.get('token'))\n            await API.withAuth()\n                .then(res => {\n                    if (res.status === 200)\n                        this.props.history.push('/profile');\n                })\n                .catch(() => cookies.remove('token'));\n        this._mounted = true;\n    };\n\n    componentWillUnmount() {\n        this._mounted = false;\n    }\n\n    send = async() => {\n        const {lastname, firstname, email, username, password, cpassword} = this.state;\n        this.warnings = {...DEFAULT_ERRORS};\n        if (!validate.validateEmail(email))\n            this.warnings.w_email = \"Please enter a valid email.\";\n        if (!validate.validatePassword(password))\n            this.warnings.w_password = \"Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters.\";\n        if (cpassword.localeCompare(password) !== 0)\n            this.warnings.w_cpassword = \"Password does not match.\";\n        if (!validate.validateUsername(username))\n            this.warnings.w_username = \"Please use a valid username.\";\n        if (!validate.validateFirstName(firstname))\n            this.warnings.w_firstname = \"Please use a valid first name.\";\n        if (!validate.validateFirstName(lastname))\n            this.warnings.w_lastname = \"Please use a valid last name.\";\n        // Check if warning is set\n        if (!validate.checkWarnings(this.warnings)){\n            if(this._mounted)\n                this.setState({loading: true});\n            await validate.sleepLoader(1200)\n                .then(async () => {\n                    await API.signup(lastname, firstname, email, username, password, cpassword)\n                        .then(() => {\n                            this.props.history.push('/login');\n                            store.addNotification({\n                                title: 'Confirm your account',\n                                message: \"Use the link sent by mail to activate your account\",\n                                type: \"success\",\n                                insert: \"top\",\n                                container: \"top-right\",\n                                animationIn: [\"animated\", \"fadeIn\"],\n                                animationOut: [\"animated\", \"fadeOut\"],\n                                dismiss: {\n                                    duration: 10000,\n                                    onScreen: true\n                                }\n                            });\n                        })\n                        .catch(error => {\n                            if (typeof error.response.data !== 'undefined' && typeof error.response.data.warnings !== 'undefined')\n                                    if(this._mounted)\n                                        this.setState({...error.response.data.warnings});\n                            });\n                });\n            if (this._mounted)\n                this.setState({loading: false});\n        }\n        else if (this._mounted) {\n            this.setState({...this.warnings});\n        }\n    };\n\n    handleChange = (event) => {\n        const key = \"w_\" + event.target.id;\n        if (this.state[key].length > 0)\n            this.setState({[key]: ''});\n        this.setState({[event.target.id]: event.target.value});\n    };\n\n    render() {\n        const {warnings, w_firstname, w_lastname, w_email, w_password, w_username, w_cpassword, loading} = this.state;\n        return (\n        <Container className=\"SignupModal\">\n            <div className=\"shapeSignup\"></div>\n            <Dimmer active={loading}>\n                <Loader size='massive'>Create your account...</Loader>\n            </Dimmer>\n            <Divider hidden />\n            <Image className=\"img-fluid\"\n                   src=\"/img/MatchApp-Logo.png\"\n                   alt=\"Responsive image\"\n                   size=\"medium\"\n                   centered/>\n           <Grid textAlign=\"center\">\n               <Grid.Row centered>\n                   <div className=\"SignupWarnings\">\n                       <Warnings data={warnings} />\n                   </div>\n               </Grid.Row>\n           </Grid>\n            <Container textAlign='center'>\n                <h1 className=\"SignupTitle\">Create an account</h1>\n            </Container>\n            <Divider hidden />\n            <Grid className=\"SignupFormContainer\">\n                <Grid.Row centered>\n                    <Form>\n                        <Form.Group widths='equal'>\n                                <Form.Input\n                                    error={w_firstname.length > 0 ? w_firstname : null}\n                                    label=\"First Name\"\n                                    id=\"firstname\"\n                                    icon='user'\n                                    iconPosition='left'\n                                    autoFocus\n                                    onChange={this.handleChange}\n                                    size=\"huge\"\n                                    placeholder=\"First Name\"\n                                    autoComplete=\"off\" />\n                                <Form.Input\n                                    error={w_lastname.length > 0 ? w_lastname : null}\n                                    label=\"Last Name\"\n                                    id=\"lastname\"\n                                    icon='user'\n                                    iconPosition='left'\n                                    onChange={this.handleChange}\n                                    size=\"huge\"\n                                    placeholder=\"Last Name\"\n                                    autoComplete=\"off\" />\n                        </Form.Group>\n                        <Form.Group widths='equal' onSubmit={this.send}>\n                            <Form.Input\n                                error={w_email.length > 0 ? w_email : null}\n                                label=\"Email\"\n                                id=\"email\"\n                                icon='mail'\n                                iconPosition='left'\n                                onChange={this.handleChange}\n                                size=\"huge\"\n                                placeholder=\"Email\"\n                                autoComplete=\"off\" />\n                            <Form.Input\n                                error={w_username.length > 0 ? w_username : null}\n                                label=\"Choose a username\"\n                                id=\"username\"\n                                icon='user circle'\n                                iconPosition='left'\n                                onChange={this.handleChange}\n                                size=\"huge\"\n                                placeholder=\"Choose a username\"\n                                autoComplete=\"off\" />\n                        </Form.Group>\n                        <Form.Group widths='equal'>\n                            <Form.Input\n                                error={w_password.length > 0 ? w_password : null}\n                                label=\"Password\"\n                                icon='lock'\n                                iconPosition='left'\n                                id=\"password\"\n                                onChange={this.handleChange}\n                                type=\"password\"\n                                size=\"huge\"\n                                placeholder=\"Password\" />\n                            <Form.Input\n                                error={w_cpassword.length > 0 ? w_cpassword : null}\n                                label=\"Confirm Password\"\n                                icon='lock'\n                                iconPosition='left'\n                                id=\"cpassword\"\n                                onChange={this.handleChange}\n                                type=\"password\"\n                                size=\"huge\"\n                                placeholder=\"Confirm Password\" />\n                        </Form.Group>\n                        <Divider hidden />\n                        <Grid textAlign=\"center\">\n                            <Grid.Row centered>\n                                <Button\n                                    className=\"SignupButton\"\n                                    loading={loading}\n                                    size='huge'\n                                    type=\"submit\"\n                                    onClick={this.send}>Register\n                                </Button>\n                            </Grid.Row>\n                        </Grid>\n                    </Form>\n                </Grid.Row>\n            </Grid>\n            <Grid textAlign=\"center\">\n                <Grid.Row centered>\n                    <div className=\"SignupNoAccount\">\n                        <p>Have an account ? <a href='# ' onClick={(e) => {e.preventDefault(); this.props.history.push('/login')}}>Log in</a></p>\n                    </div>\n                </Grid.Row>\n            </Grid>\n            <Divider hidden />\n        </Container>\n        );\n    }\n}\n\nexport default Signup;"]},"metadata":{},"sourceType":"module"}