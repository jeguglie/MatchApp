{"ast":null,"code":"import _objectSpread from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/jv/Desktop/MatchApp/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import{Button,Segment,Grid,Progress,Icon,Loader,Dimmer,Divider}from'semantic-ui-react';import VALIDATE from\"../../../utils/validation\";import LocationComponent from\"./LocationComponent/LocationComponent\";import SimpleMap from\"./Map/Map\";import API from'../../../utils/API';import{store}from'react-notifications-component';// import PlacesWithStandaloneSearchBox from \"./SearchBoxGoogleMap/SearchBoxGoogleMap\";\nvar DEFAULT_STATE={loading:false,complete:0,innerRef:null};var Location=/*#__PURE__*/function(_React$Component){_inherits(Location,_React$Component);function Location(_props){var _this;_classCallCheck(this,Location);_this=_possibleConstructorReturn(this,_getPrototypeOf(Location).call(this,_props));_this.componentDidUpdate=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(props,state){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(props.complete!==state.complete)_this._mounted&&_this.setState({complete:props.complete});if(props.loading!==state.loading)_this._mounted&&_this.setState({loading:props.loading});case 2:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();_this.getInnerRef=function(ref){_this.innerRef=ref;};_this.prevSection=function(){_this._mounted&&_this.setState({loading:true});_this.props.prevsection();};_this.getLocation=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this.innerRef&&_this.innerRef.getLocation();if(!(_this.innerRef&&_this._mounted&&_this.innerRef.state&&_this.innerRef.state.coords)){_context2.next=5;break;}_this.innerRef&&_this._mounted&&_this.setState({innerRef:_this.innerRef});_context2.next=5;return API.updategeolocate(_this.innerRef.state.coords.latitude,_this.innerRef.state.coords.longitude).then(function(response){if(response.status===200){store.addNotification({title:'Your position was successfully updated',message:\"Start to match !\",type:\"success\",insert:\"top\",container:\"top-right\",animationIn:[\"animated\",\"fadeIn\"],animationOut:[\"animated\",\"fadeOut\"],dismiss:{duration:10000,onScreen:true}});}}).catch(function(e){return console.log(e);});case 5:case\"end\":return _context2.stop();}}},_callee2);}));_this.state=_objectSpread({},DEFAULT_STATE);_this.state.complete=_this.props.complete;// Bind for location REF\n_this.getInnerRef=_this.getInnerRef.bind(_assertThisInitialized(_this));_this.getLocation=_this.getLocation.bind(_assertThisInitialized(_this));_this._mounted=false;return _this;}_createClass(Location,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:window.scrollTo(0,0);this._mounted=true;this._mounted&&this.setState({loading:true});_context3.next=5;return VALIDATE.sleepLoader(200);case 5:this._mounted&&this.setState({complete:this.props.complete});this._mounted&&this.setState({loading:false});case 7:case\"end\":return _context3.stop();}}},_callee3,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var getInnerRef=this.getInnerRef,getLocation=this.getLocation,prevSection=this.prevSection;var _this$state=this.state,complete=_this$state.complete,loading=_this$state.loading;return React.createElement(\"div\",{className:\"Location\"},React.createElement(Dimmer,{active:loading},React.createElement(Loader,{size:\"massive\"})),React.createElement(Progress,{percent:complete,progress:true,indicating:true,size:\"medium\"}),React.createElement(Grid,{textAlign:\"center\"},React.createElement(Grid.Row,{centered:true},React.createElement(\"h1\",{className:\"CompleteTitle\"},\"Add your location\"))),React.createElement(Divider,{hidden:true}),React.createElement(Divider,{hidden:true}),React.createElement(LocationComponent,{ref:getInnerRef}),React.createElement(\"div\",{className:\"shapeLastStep\"}),React.createElement(\"div\",{className:\"WrapMap\"},React.createElement(Segment,null,React.createElement(\"div\",{className:\"mapAddLocation\"},React.createElement(SimpleMap,{innerRef:this.state.innerRef})))),React.createElement(Segment,{basic:true,textAlign:\"center\"},React.createElement(Button,{onClick:getLocation,className:\"buttonLastStep\",size:\"big\",content:\"Geolocate my position\"}),React.createElement(Divider,{horizontal:true,id:\"ordivider\"},\"Or\"),React.createElement(Button,{onClick:this.props.useCustomAddress,className:\"buttonLastStep\",size:\"big\",content:\"Use a custom address\"})),React.createElement(Grid,null,React.createElement(Divider,{hidden:true}),React.createElement(Grid.Row,{centered:true},React.createElement(Icon,{className:\"EditProfilArrow\",name:\"arrow circle left\",size:\"huge\",onClick:prevSection}))));}}]);return Location;}(React.Component);export default Location;","map":{"version":3,"sources":["/Users/jv/Desktop/MatchApp/client/src/components/EditProfil/Location/Location.js"],"names":["React","Button","Segment","Grid","Progress","Icon","Loader","Dimmer","Divider","VALIDATE","LocationComponent","SimpleMap","API","store","DEFAULT_STATE","loading","complete","innerRef","Location","props","componentDidUpdate","state","_mounted","setState","getInnerRef","ref","prevSection","prevsection","getLocation","coords","updategeolocate","latitude","longitude","then","response","status","addNotification","title","message","type","insert","container","animationIn","animationOut","dismiss","duration","onScreen","catch","e","console","log","bind","window","scrollTo","sleepLoader","useCustomAddress","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {Button, Segment, Grid, Progress, Icon, Loader, Dimmer, Divider} from 'semantic-ui-react';\nimport VALIDATE from \"../../../utils/validation\";\nimport LocationComponent from \"./LocationComponent/LocationComponent\";\nimport SimpleMap from \"./Map/Map\";\nimport API from '../../../utils/API';\nimport { store } from 'react-notifications-component';\n\n// import PlacesWithStandaloneSearchBox from \"./SearchBoxGoogleMap/SearchBoxGoogleMap\";\n\nconst DEFAULT_STATE = {\n    loading: false,\n    complete: 0,\n    innerRef: null,\n\n};\nclass Location extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {...DEFAULT_STATE};\n        this.state.complete = this.props.complete;\n        // Bind for location REF\n        this.getInnerRef = this.getInnerRef.bind(this);\n        this.getLocation = this.getLocation.bind(this);\n        this._mounted = false;\n    }\n\n    async componentDidMount() {\n        window.scrollTo(0, 0);\n        this._mounted = true;\n        this._mounted && this.setState({loading: true});\n        await VALIDATE.sleepLoader(200);\n        this._mounted && this.setState({complete: this.props.complete});\n        this._mounted && this.setState({loading: false});\n    }\n\n    componentDidUpdate = async(props, state) =>{\n        if (props.complete !== state.complete)\n            this._mounted && this.setState({complete: props.complete})\n        if (props.loading !== state.loading)\n            this._mounted && this.setState({loading: props.loading})\n    };\n\n    // React geolocate\n    innerRef;\n    getInnerRef = (ref) => {\n        this.innerRef = ref;\n\n    };\n    prevSection = () => {\n        this._mounted && this.setState({loading: true});\n        this.props.prevsection();\n    };\n\n    getLocation = async() => {\n        this.innerRef && this.innerRef.getLocation();\n        if (this.innerRef && this._mounted &&  this.innerRef.state && this.innerRef.state.coords) {\n            this.innerRef && this._mounted && this.setState({innerRef: this.innerRef});\n            await API.updategeolocate(this.innerRef.state.coords.latitude, this.innerRef.state.coords.longitude)\n                .then(response => {\n                    if (response.status === 200) {\n                        store.addNotification({\n                            title: 'Your position was successfully updated',\n                            message: \"Start to match !\",\n                            type: \"success\",\n                            insert: \"top\",\n                            container: \"top-right\",\n                            animationIn: [\"animated\", \"fadeIn\"],\n                            animationOut: [\"animated\", \"fadeOut\"],\n                            dismiss: {\n                                duration: 10000,\n                                onScreen: true\n                            }\n                        });\n                    }\n                })\n                .catch(e => console.log(e));\n        }\n    };\n\n\n\n    render() {\n        const {getInnerRef, getLocation, prevSection } = this;\n        const {complete, loading} = this.state;\n        return (\n                <div className=\"Location\">\n                    <Dimmer active={loading}>\n                        <Loader size='massive'/>\n                    </Dimmer>\n                    <Progress\n                        percent={complete}\n                        progress\n                        indicating\n                        size=\"medium\"\n                    />\n                    <Grid textAlign=\"center\">\n                        <Grid.Row centered>\n                            <h1 className=\"CompleteTitle\">\n                                Add your location\n                            </h1>\n                        </Grid.Row>\n                    </Grid>\n                    <Divider hidden />\n                    <Divider hidden />\n                    <LocationComponent\n                        ref={getInnerRef}\n                    />\n                    <div className=\"shapeLastStep\"></div>\n                    <div className=\"WrapMap\">\n                    <Segment>\n                        <div className=\"mapAddLocation\">\n                            <SimpleMap innerRef={this.state.innerRef} />\n                        </div>\n                    </Segment>\n                    </div>\n                    <Segment basic textAlign='center'>\n                        <Button\n                            onClick={getLocation}\n                            className=\"buttonLastStep\"\n                            size=\"big\"\n                            content='Geolocate my position' />\n                        <Divider horizontal id={\"ordivider\"}>Or</Divider>\n                        <Button\n                            onClick={this.props.useCustomAddress}\n                            className=\"buttonLastStep\"\n                            size=\"big\"\n                            content='Use a custom address' />\n                    </Segment>\n                    <Grid>\n                        <Divider hidden />\n                        <Grid.Row centered >\n                            <Icon\n                                className=\"EditProfilArrow\"\n                                name='arrow circle left'\n                                size=\"huge\"\n                                onClick={prevSection}/>\n                        </Grid.Row>\n                    </Grid>\n                </div>\n\n        )\n    }\n}\nexport default Location;"]},"metadata":{},"sourceType":"module"}