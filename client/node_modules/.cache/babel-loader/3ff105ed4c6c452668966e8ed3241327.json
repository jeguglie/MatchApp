{"ast":null,"code":"var _jsxFileName = \"/Users/jv/Desktop/MatchApp/client/src/components/EditProfil/BasicInformations/BasicsInformations.js\";\nimport React from 'react';\nimport { Divider, Form, TextArea, Grid, Progress, Icon, Select } from 'semantic-ui-react';\nimport API from \"../../../utils/API\";\nimport VALIDATE from \"../../../utils/validation\";\nimport _ from \"lodash\";\nconst countries = VALIDATE.countries;\nconst age = VALIDATE.age;\nconst genderOptions = [{\n  key: 'male',\n  value: 'male',\n  text: 'Male'\n}, {\n  key: 'female',\n  value: 'female',\n  text: 'Female'\n}];\nconst interestedOptions = [{\n  key: 'male',\n  value: 'male',\n  text: 'Male'\n}, {\n  key: 'female',\n  value: 'female',\n  text: 'Female'\n}, {\n  key: 'other',\n  value: 'other',\n  text: 'Other'\n}];\nconst DEFAULT_STATE = {\n  lastname: \"\",\n  firstname: \"\",\n  interested: \"\",\n  country: '',\n  gender: \"\",\n  bio: \"\",\n  email: \"\",\n  birthday: \"\",\n  save: false,\n  age: '',\n  loading: false,\n  complete: 0,\n  w_lastname: '',\n  w_age: '',\n  w_firstname: '',\n  w_gender: '',\n  w_interested: '',\n  w_country: '',\n  w_bio: ''\n};\nconst DEFAULT_ERRORS = {\n  w_age: '',\n  w_lastname: '',\n  w_firstname: '',\n  w_gender: '',\n  w_interested: '',\n  w_country: '',\n  w_bio: ''\n};\n\nclass BasicsInformations extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidMount = async () => {\n      window.scrollTo(0, 0);\n      this._mounted = true;\n      this._mounted && this.setState({\n        complete: this.props.complete\n      });\n      await API.getEditProfilValues().then(response => {\n        if (typeof response.data.findProfil !== 'undefined') if (this._mounted === true) this._mounted && this.setState({ ...response.data.findProfil\n        });\n      }).catch(error => {\n        if (typeof error.response !== 'undefined' && typeof error.response.data !== 'undefined' && typeof error.response.data.warnings !== 'undefined') if (this._mounted === true) this._mounted && this.setState({ ...error.response.data.warnings\n        });\n      });\n    };\n\n    this.handleSave = async () => {\n      if (this._mounted) {\n        this.warnings = { ...DEFAULT_ERRORS\n        }; // Check country\n\n        let detectCountry = false;\n        let detectAge = false;\n        this.countries.forEach(data => {\n          if (data.value === this.state.country) {\n            detectCountry = true;\n            return;\n          }\n        });\n        this.age.forEach(data => {\n          if (data.value === this.state.age) {\n            detectAge = true;\n            return;\n          }\n        }); // let detectCountry = this.countries.some(data => data.value === this.state.country);\n\n        if (!detectCountry) this.warnings.w_country = \"Please select a valid country\";\n        if (!detectAge) this.warnings.w_age = \"Please select your age\";\n        if (!VALIDATE.validateFirstName(this.state.lastname)) this.warnings.w_lastname = \"Only characters are allowed for your lastname. Must contain between 3 and 13 characters\";\n        if (!VALIDATE.validateFirstName(this.state.firstname)) this.warnings.w_firstname = \"Only characters are allowed for your first name. Must contain between 3 and 13 characters\";\n        if (this.state.interested !== \"male\" && this.state.interested !== \"female\" && this.state.interested !== \"other\") this.warnings.w_interested = \"Please select a valid interest option\";\n        if (this.state.gender !== \"male\" && this.state.gender !== \"female\" && this.state.interested !== \"other\") this.warnings.w_gender = \"Please select a valid gender option\";\n        if (this.state.bio && this.state.bio.length > 90) this.warnings.w_bio = \"Your bio is too long, please use 90 maximum characters. You have \" + this.state.bio.length;\n\n        if (!VALIDATE.checkWarnings(this.warnings) === true) {\n          await API.updateEditProfilValues(this.state).then(() => {\n            this._mounted && this.setState({\n              loading: false\n            }, () => {\n              this.props.nextsection();\n            });\n          }).catch(error => {\n            if (typeof error.response !== 'undefined' && typeof error.response.data !== 'undefined' && typeof error.response.data.warnings !== 'undefined') this._mounted && this.setState({ ...error.response.data.warnings\n            });\n          });\n        } else this._mounted && this.setState({ ...this.warnings\n        });\n      }\n    };\n\n    this.handleChange = _.debounce((e, {\n      value,\n      id\n    }) => {\n      this._mounted && this.setState({\n        [id]: value,\n        [\"w_\" + id]: ''\n      });\n    }, 300);\n\n    this.handleChangeFocus = (e, {\n      value,\n      id\n    }) => {\n      this._mounted && this.setState({\n        [id]: '',\n        [\"w_\" + id]: ''\n      });\n    };\n\n    this._mounted = false;\n    this.state = { ...DEFAULT_STATE\n    };\n    this.state.complete = this.props.complete; // Set key for countries\n\n    this.countries = countries;\n    this.age = age;\n    this.age = this.age.map((item, index) => ({\n      key: index,\n      text: item.value,\n      value: item.value\n    }));\n    this.countries = this.countries.map((item, index) => ({\n      key: index,\n      text: item.value,\n      value: item.value\n    })); // Set default errors\n\n    this.warnings = { ...DEFAULT_ERRORS\n    };\n  }\n\n  componentWillUnmount() {\n    this._mounted = false;\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    if (nextProps.complete !== prevState.complete) return {\n      complete: nextProps.complete\n    };\n    return null;\n  }\n\n  render() {\n    const {\n      firstname,\n      lastname,\n      email,\n      bio,\n      w_age,\n      w_firstname,\n      age,\n      w_lastname,\n      w_gender,\n      w_interested,\n      w_country,\n      w_bio,\n      complete\n    } = this.state;\n\n    const ProgressBar = () => React.createElement(Progress, {\n      percent: complete,\n      progress: true,\n      indicating: true,\n      size: \"medium\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    });\n\n    return React.createElement(\"div\", {\n      className: \"BasicInfosContainer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"BasicInformations\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, React.createElement(ProgressBar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }), React.createElement(Grid, {\n      textAlign: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, React.createElement(Grid.Row, {\n      centered: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"CompleteTitle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, \"Complete Basics Informations\"))), React.createElement(\"div\", {\n      className: \"shapeBasicsInfos\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }), React.createElement(Divider, {\n      hidden: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }), React.createElement(Grid, {\n      columns: 1,\n      doubling: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, React.createElement(Grid.Column, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(Form, {\n      className: \"BasicInfosForm\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, React.createElement(Form.Field, {\n      error: w_age.length > 0 ? w_age : null,\n      id: \"age\",\n      control: Select,\n      value: age ? age.toString() : '',\n      options: age,\n      label: \"Select your age\",\n      placeholder: \"Your Age\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }), React.createElement(Form.Group, {\n      widths: \"equal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, React.createElement(Form.Input, {\n      error: w_lastname.length > 0 ? w_lastname : null,\n      fluid: true,\n      label: \"Last Name\",\n      color: \"white\",\n      id: \"lastname\",\n      value: lastname,\n      onClick: this.handleChangeFocus,\n      onChange: _.debounce(this.handleChange, 500, {\n        leading: true\n      }),\n      placeholder: \"Last Name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }), React.createElement(Form.Input, {\n      error: w_firstname.length > 0 ? w_firstname : null,\n      fluid: true,\n      label: \"First Name\",\n      id: \"firstname\",\n      value: firstname,\n      onChange: this.handleChange,\n      placeholder: \"First Name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    })), React.createElement(Form.Group, {\n      widths: \"equal\",\n      className: \"DropdownBasic\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, React.createElement(Form.Field, {\n      error: w_gender.length > 0 ? w_gender : null,\n      id: \"gender\",\n      control: Select,\n      value: this.state.gender,\n      options: genderOptions,\n      label: \"Select Gender\",\n      placeholder: \"Gender\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }), React.createElement(Form.Field, {\n      error: w_interested.length > 0 ? w_interested : null,\n      id: \"interested\",\n      control: Select,\n      value: this.state.interested,\n      options: interestedOptions,\n      label: \"Interested by \",\n      placeholder: \"Interested by\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    })), React.createElement(Form.Group, {\n      widths: \"equal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, React.createElement(Form.Input, {\n      fluid: true,\n      disabled: true,\n      label: \"Email\",\n      id: \"email\",\n      placeholder: \"Email\",\n      value: email,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }), React.createElement(Form.Field, {\n      error: w_country.length > 0 ? w_country : null,\n      id: \"country\",\n      control: Select,\n      value: this.state.country,\n      options: this.countries,\n      label: \"Select Country\",\n      placeholder: \"Country\",\n      search: true,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    })), React.createElement(Form.Field, {\n      error: w_bio.length > 0 ? w_bio : null,\n      label: \"Bio\",\n      control: TextArea,\n      id: \"bio\",\n      placeholder: \"Bio\",\n      value: bio != null && bio.length ? bio : '',\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }))), React.createElement(Divider, {\n      hidden: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }), React.createElement(Grid.Row, {\n      centered: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      className: \"EditProfilArrow\",\n      name: \"arrow circle right\",\n      size: \"huge\",\n      onClick: this.handleSave,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      },\n      __self: this\n    })))));\n  }\n\n}\n\nexport default BasicsInformations;","map":{"version":3,"sources":["/Users/jv/Desktop/MatchApp/client/src/components/EditProfil/BasicInformations/BasicsInformations.js"],"names":["React","Divider","Form","TextArea","Grid","Progress","Icon","Select","API","VALIDATE","_","countries","age","genderOptions","key","value","text","interestedOptions","DEFAULT_STATE","lastname","firstname","interested","country","gender","bio","email","birthday","save","loading","complete","w_lastname","w_age","w_firstname","w_gender","w_interested","w_country","w_bio","DEFAULT_ERRORS","BasicsInformations","Component","constructor","props","componentDidMount","window","scrollTo","_mounted","setState","getEditProfilValues","then","response","data","findProfil","catch","error","warnings","handleSave","detectCountry","detectAge","forEach","state","validateFirstName","length","checkWarnings","updateEditProfilValues","nextsection","handleChange","debounce","e","id","handleChangeFocus","map","item","index","componentWillUnmount","getDerivedStateFromProps","nextProps","prevState","render","ProgressBar","toString","leading"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {Divider, Form, TextArea, Grid, Progress, Icon, Select} from 'semantic-ui-react';\nimport API from \"../../../utils/API\";\nimport VALIDATE from \"../../../utils/validation\";\nimport _ from \"lodash\";\nconst countries = VALIDATE.countries;\nconst age = VALIDATE.age;\nconst genderOptions = [\n    { key: 'male', value: 'male', text: 'Male' },\n    { key: 'female', value: 'female', text: 'Female' }\n];\nconst interestedOptions = [\n    { key: 'male', value: 'male', text: 'Male' },\n    { key: 'female', value: 'female', text: 'Female' },\n    { key: 'other', value: 'other', text: 'Other' },\n];\n\nconst DEFAULT_STATE = {\n    lastname: \"\",\n    firstname: \"\",\n    interested: \"\",\n    country: '',\n    gender: \"\",\n    bio: \"\",\n    email: \"\",\n    birthday: \"\",\n    save: false,\n    age: '',\n    loading: false,\n    complete: 0,\n    w_lastname: '',\n    w_age: '',\n    w_firstname: '',\n    w_gender: '',\n    w_interested: '',\n    w_country: '',\n    w_bio: '',\n};\n\nconst DEFAULT_ERRORS = {\n    w_age: '',\n    w_lastname: '',\n    w_firstname: '',\n    w_gender: '',\n    w_interested: '',\n    w_country: '',\n    w_bio: '',\n};\n\nclass BasicsInformations extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this._mounted = false;\n        this.state = {...DEFAULT_STATE};\n        this.state.complete = this.props.complete;\n        // Set key for countries\n        this.countries = countries;\n        this.age = age;\n        this.age = this.age.map((item, index) => ({key: index, text: item.value, value: item.value }));\n        this.countries = this.countries.map((item, index) => ({key: index, text: item.value, value: item.value }));\n        // Set default errors\n        this.warnings = {...DEFAULT_ERRORS};\n\n    }\n\n    componentWillUnmount() {\n        this._mounted = false;\n    }\n\n    static getDerivedStateFromProps(nextProps, prevState){\n        if(nextProps.complete !== prevState.complete)\n            return { complete: nextProps.complete};\n        return null;\n    }\n\n    componentDidMount = async() => {\n        window.scrollTo(0, 0)\n        this._mounted = true;\n        this._mounted && this.setState({complete: this.props.complete});\n        await API.getEditProfilValues()\n            .then((response) => {\n                if (typeof response.data.findProfil !== 'undefined')\n                    if (this._mounted === true)\n                        this._mounted && this.setState({...response.data.findProfil});\n            })\n            .catch((error) => {\n                if (typeof error.response !== 'undefined'\n                    && typeof error.response.data !== 'undefined' && typeof error.response.data.warnings !== 'undefined')\n                    if (this._mounted === true)\n                        this._mounted && this.setState({...error.response.data.warnings});\n            })\n    }\n\n    handleSave = async() => {\n        if (this._mounted) {\n            this.warnings = {...DEFAULT_ERRORS};\n            // Check country\n            let detectCountry = false;\n            let detectAge  = false;\n            this.countries.forEach((data) => {\n                if (data.value === this.state.country) {\n                    detectCountry = true;\n                    return;\n                }\n            });\n            this.age.forEach((data) => {\n                if (data.value === this.state.age) {\n                    detectAge = true;\n                    return;\n                }\n            });\n            // let detectCountry = this.countries.some(data => data.value === this.state.country);\n            if (!detectCountry)\n                this.warnings.w_country = \"Please select a valid country\";\n            if (!detectAge)\n                this.warnings.w_age = \"Please select your age\";\n            if (!VALIDATE.validateFirstName(this.state.lastname))\n                this.warnings.w_lastname = \"Only characters are allowed for your lastname. Must contain between 3 and 13 characters\";\n            if (!VALIDATE.validateFirstName(this.state.firstname))\n                this.warnings.w_firstname = \"Only characters are allowed for your first name. Must contain between 3 and 13 characters\";\n            if (this.state.interested !== \"male\" && this.state.interested !== \"female\" && this.state.interested !== \"other\")\n                this.warnings.w_interested = \"Please select a valid interest option\";\n            if (this.state.gender !== \"male\" && this.state.gender !== \"female\" && this.state.interested !== \"other\")\n                this.warnings.w_gender = \"Please select a valid gender option\";\n            if (this.state.bio && this.state.bio.length > 90)\n                this.warnings.w_bio = \"Your bio is too long, please use 90 maximum characters. You have \" + this.state.bio.length;\n            if (!VALIDATE.checkWarnings(this.warnings) === true) {\n                await API.updateEditProfilValues(this.state)\n                    .then(() => {\n                        this._mounted && this.setState({loading: false}, () => {\n                            this.props.nextsection();\n                        });\n                    })\n                    .catch(error => {\n                        if (typeof error.response !== 'undefined'\n                            && typeof error.response.data !== 'undefined' && typeof error.response.data.warnings !== 'undefined')\n                            this._mounted && this.setState({...error.response.data.warnings});\n                    });\n            } else\n                this._mounted && this.setState({...this.warnings});\n        }\n    };\n    handleChange = _.debounce((e, { value, id }) => {\n        this._mounted && this.setState({[id]: value, [\"w_\" + id]: ''});\n    }, 300);\n    handleChangeFocus = (e, { value, id }) => {\n        this._mounted && this.setState({[id]: '', [\"w_\" + id]: ''});\n    }\n    render() {\n        const {firstname, lastname, email, bio, w_age, w_firstname, age, w_lastname, w_gender, w_interested, w_country, w_bio, complete} = this.state;\n        const ProgressBar = () => (\n            <Progress\n                percent={complete}\n                progress\n                indicating\n                size=\"medium\"/>\n        );\n        return (\n            <div className=\"BasicInfosContainer\">\n                <div className=\"BasicInformations\">\n                    <ProgressBar />\n                    <Grid textAlign=\"center\">\n                        <Grid.Row centered>\n                            <h1 className=\"CompleteTitle\">Complete Basics Informations</h1>\n                        </Grid.Row>\n                    </Grid>\n                    <div className=\"shapeBasicsInfos\"></div>\n                    <Divider hidden />\n                    <Grid columns={1} doubling>\n                        <Grid.Column>\n                            <Form className=\"BasicInfosForm\">\n                                <Form.Field\n                                    error={w_age.length > 0 ? w_age : null}\n                                    id=\"age\"\n                                    control={Select}\n                                    value={age ? age.toString() : ''}\n                                    options={age}\n                                    label=\"Select your age\"\n                                    placeholder='Your Age'\n                                    onChange={this.handleChange}\n                                />\n                                <Form.Group widths='equal'>\n                                    <Form.Input\n                                        error={w_lastname.length > 0 ? w_lastname : null}\n                                        fluid\n                                        label='Last Name'\n                                        color=\"white\"\n                                        id=\"lastname\"\n                                        value={lastname}\n                                        onClick={this.handleChangeFocus}\n                                        onChange={_.debounce(this.handleChange, 500, { leading: true })}\n                                        placeholder=\"Last Name\"\n                                    />\n                                    <Form.Input\n                                        error={w_firstname.length > 0 ? w_firstname : null}\n                                        fluid\n                                        label='First Name'\n                                        id=\"firstname\"\n                                        value={firstname}\n                                        onChange={this.handleChange}\n                                        placeholder=\"First Name\"\n                                    />\n                                </Form.Group>\n                                <Form.Group widths='equal' className=\"DropdownBasic\">\n                                    <Form.Field\n                                        error={w_gender.length > 0 ? w_gender : null}\n                                        id=\"gender\"\n                                        control={Select}\n                                        value={this.state.gender}\n                                        options={genderOptions}\n                                        label=\"Select Gender\"\n                                        placeholder='Gender'\n                                        onChange={this.handleChange}\n                                    />\n                                    <Form.Field\n                                        error={w_interested.length > 0 ? w_interested : null}\n                                        id=\"interested\"\n                                        control={Select}\n                                        value={this.state.interested}\n                                        options={interestedOptions}\n                                        label=\"Interested by \"\n                                        placeholder='Interested by'\n                                        onChange={this.handleChange}\n                                    />\n                                </Form.Group>\n                                <Form.Group widths='equal'>\n                                    <Form.Input\n                                        fluid\n                                        disabled\n                                        label='Email'\n                                        id=\"email\"\n                                        placeholder=\"Email\"\n                                        value={email}\n                                        onChange={this.handleChange}\n                                    />\n                                    <Form.Field\n                                        error={w_country.length > 0 ? w_country : null}\n                                        id=\"country\"\n                                        control={Select}\n                                        value={this.state.country}\n                                        options={this.countries}\n                                        label=\"Select Country\"\n                                        placeholder='Country'\n                                        search\n                                        onChange={this.handleChange}\n                                    />\n                                </Form.Group>\n                                <Form.Field\n                                    error={w_bio.length > 0 ? w_bio : null}\n                                    label='Bio'\n                                    control={TextArea}\n                                    id=\"bio\"\n                                    placeholder=\"Bio\"\n                                    value={bio != null && bio.length ? bio : ''}\n                                    onChange={this.handleChange}\n                                />\n                            </Form>\n                        </Grid.Column>\n                        <Divider hidden />\n                        <Grid.Row centered>\n                            <Icon className=\"EditProfilArrow\"\n                                  name='arrow circle right'\n                                  size=\"huge\"\n                                  onClick={this.handleSave}/>\n                        </Grid.Row>\n                    </Grid>\n                </div>\n            </div>\n        )\n    }\n}\nexport default BasicsInformations;"]},"metadata":{},"sourceType":"module"}