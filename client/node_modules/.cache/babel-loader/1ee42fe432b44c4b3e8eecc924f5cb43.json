{"ast":null,"code":"import _defineProperty from \"/Users/jeguglie/Desktop/MatchApp/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/jeguglie/Desktop/MatchApp/client/src/components/EditProfil/BasicInformations/BasicsInformations.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport { Divider, Form, TextArea, Grid, Progress, Icon, Select, Loader, Dimmer } from 'semantic-ui-react';\nimport API from \"../../../utils/API\";\nimport VALIDATE from \"../../../utils/validation\";\nimport classnames from 'classnames';\nimport Warnings from \"../../Warnings/Warnings\";\n\nconst _require = require('../../../utils/validation'),\n      countries = _require.countries;\n\nconst genderOptions = [{\n  key: 'male',\n  value: 'male',\n  text: 'Male'\n}, {\n  key: 'female',\n  value: 'female',\n  text: 'Female'\n}];\nconst DEFAULT_STATE = {\n  lastname: \"\",\n  firstname: \"\",\n  interested: \"\",\n  country: '',\n  gender: \"\",\n  bio: \"\",\n  email: \"\",\n  birthday: \"\",\n  save: false,\n  loading: false,\n  complete: 0,\n  w_lastname: '',\n  w_firstname: '',\n  w_gender: '',\n  w_interested: '',\n  w_country: '',\n  w_bio: ''\n};\nconst DEFAULT_ERRORS = {\n  w_lastname: '',\n  w_firstname: '',\n  w_gender: '',\n  w_interested: '',\n  w_country: '',\n  w_bio: ''\n};\n\nclass BasicsInformations extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSave = async () => {\n      if (this._mounted) {\n        this.warnings = _objectSpread({}, DEFAULT_ERRORS); // Check country\n\n        let detectCountry = false;\n        countries.forEach(data => {\n          if (data.value === this.state.country) {\n            detectCountry = true;\n            return;\n          }\n        }); // let detectCountry = this.countries.some(data => data.value === this.state.country);\n\n        if (!detectCountry) this.warnings.w_country = \"Please select a valid country\";\n        if (!VALIDATE.validateFirstName(this.state.lastname)) this.warnings.w_lastname = \"Only characters are allowed for your lastname. Must contain between 3 and 13 characters\";\n        if (!VALIDATE.validateFirstName(this.state.firstname)) this.warnings.w_firstname = \"Only characters are allowed for your first name. Must contain between 3 and 13 characters\";\n        if (this.state.interested !== \"male\" && this.state.interested !== \"female\") this.warnings.w_interested = \"Please select a valid interest option\";\n        if (this.state.gender !== \"male\" && this.state.gender !== \"female\") this.warnings.w_gender = \"Please select a valid gender option\";\n        if (this.state.bio && this.state.bio.length > 90) this.warnings.w_bio = \"Your bio is too long, please use 90 maximum characters. You have \" + this.state.bio.length;\n\n        if (VALIDATE.checkWarnings(this.warnings) === true) {\n          await API.updateEditProfilValues(this.state).then(() => {\n            this.setState({\n              loading: false\n            }, () => {\n              this.props.nextsection();\n            });\n          }).catch(error => {\n            if (typeof error.response !== 'undefined' && typeof error.response.data !== 'undefined' && typeof error.response.data.warnings !== 'undefined') this.setState(_objectSpread({}, error.response.data.warnings));\n          });\n        } else this.setState(_objectSpread({}, this.warnings));\n      }\n    };\n\n    this.handleChange = (e, {\n      value,\n      id\n    }) => {\n      // Unset warnings if change\n      this.setState({\n        [id]: value,\n        [\"w_\" + id]: ''\n      });\n    };\n\n    this.state = _objectSpread({}, DEFAULT_STATE);\n    this.state.complete = this.props.complete; // Set key for countries\n\n    this.countries = countries.map((item, index) => ({\n      key: index,\n      text: item.value,\n      value: item.value\n    })); // Set default errors\n\n    this.warnings = _objectSpread({}, DEFAULT_ERRORS);\n  }\n\n  componentWillUnmount() {\n    this.setState({\n      save: false,\n      loading: false\n    });\n    this._mounted = false;\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    if (nextProps.complete !== prevState.complete) return {\n      complete: nextProps.complete\n    };\n    return null;\n  }\n\n  async componentDidMount() {\n    this._mounted = true;\n    this.setState({\n      loading: true\n    });\n    await this.props.getcomplete();\n    this.setState({\n      complete: this.props.complete\n    });\n    await API.getEditProfilValues().then(response => {\n      if (typeof response.data.findProfil !== 'undefined') if (this._mounted === true) this.setState(_objectSpread({}, response.data.findProfil));\n    }).catch(error => {\n      if (typeof error.response !== 'undefined' && typeof error.response.data !== 'undefined' && typeof error.response.data.warnings !== 'undefined') if (this._mounted === true) this.setState(_objectSpread({}, error.response.data.warnings));\n    });\n    this.setState({\n      loading: false\n    });\n  }\n\n  render() {\n    const _this$state = this.state,\n          w_firstname = _this$state.w_firstname,\n          w_lastname = _this$state.w_lastname,\n          w_gender = _this$state.w_gender,\n          w_interested = _this$state.w_interested,\n          w_country = _this$state.w_country,\n          w_bio = _this$state.w_bio,\n          complete = _this$state.complete;\n\n    const ProgressBar = () => React.createElement(Progress, {\n      percent: complete,\n      progress: true,\n      indicating: true,\n      size: \"medium\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    });\n\n    const Warnings = () => {\n      if (this.state.warnings && this.state.warnings.length > 0) return React.createElement(Grid.Row, {\n        centered: true,\n        textAlign: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"loginWarnings\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(Warnings, {\n        data: this.state.warnings,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      })));else return null;\n    };\n\n    return React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: classnames(\"ui middle\", \"BasicInformations\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(ProgressBar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }), React.createElement(Dimmer, {\n      active: this.state.loading,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(Loader, {\n      size: \"massive\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    })), React.createElement(Grid, {\n      textAlign: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(Grid.Row, {\n      centered: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"CompleteTitle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, \"Complete Basics Informations\"))), React.createElement(Divider, {\n      hidden: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }), React.createElement(Divider, {\n      hidden: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"shapeBasicsInfos\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }), React.createElement(Grid, {\n      textAlign: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, React.createElement(Warnings, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    })), React.createElement(Grid, {\n      columns: 1,\n      doubling: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(Grid.Column, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, React.createElement(Form, {\n      className: \"formEdit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      widths: \"equal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(Form.Input, {\n      error: w_lastname.length > 0 ? w_lastname : null,\n      fluid: true,\n      label: \"Last Name\",\n      color: \"white\",\n      id: \"lastname\",\n      value: this.state.lastname,\n      onChange: this.handleChange,\n      placeholder: \"Last Name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }), React.createElement(Form.Input, {\n      error: w_firstname.length > 0 ? w_firstname : null,\n      fluid: true,\n      label: \"First Name\",\n      id: \"firstname\",\n      value: this.state.firstname,\n      onChange: this.handleChange,\n      placeholder: \"First Name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    })), React.createElement(Form.Group, {\n      widths: \"equal\",\n      className: \"DropdownBasic\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, React.createElement(Form.Field, {\n      error: w_gender.length > 0 ? w_gender : null,\n      id: \"gender\",\n      control: Select,\n      value: this.state.gender,\n      options: genderOptions,\n      label: \"Select Gender\",\n      placeholder: \"Gender\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }), React.createElement(Form.Field, {\n      error: w_interested.length > 0 ? w_interested : null,\n      id: \"interested\",\n      control: Select,\n      value: this.state.interested,\n      options: genderOptions,\n      label: \"Interested by \",\n      placeholder: \"Interested by\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    })), React.createElement(Form.Group, {\n      widths: \"equal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, React.createElement(Form.Input, {\n      fluid: true,\n      disabled: true,\n      label: \"Email\",\n      id: \"email\",\n      placeholder: \"Email\",\n      value: this.state.email,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }), React.createElement(Form.Field, {\n      error: w_country.length > 0 ? w_country : null,\n      id: \"country\",\n      control: Select,\n      value: this.state.country,\n      options: this.countries,\n      label: \"Select Country\",\n      placeholder: \"Country\",\n      search: true,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    })), React.createElement(Form.Field, {\n      error: w_bio.length > 0 ? w_bio : null,\n      label: \"Bio\",\n      control: TextArea,\n      id: \"bio\",\n      placeholder: \"Bio\",\n      value: this.state.bio != null && this.state.bio.length ? this.state.bio : '',\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }))), React.createElement(Divider, {\n      hidden: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }), React.createElement(Grid.Row, {\n      centered: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      className: \"EditProfilArrow\",\n      name: \"arrow alternate circle right outline\",\n      size: \"huge\",\n      onClick: this.handleSave,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    })))));\n  }\n\n}\n\nexport default BasicsInformations;","map":{"version":3,"sources":["/Users/jeguglie/Desktop/MatchApp/client/src/components/EditProfil/BasicInformations/BasicsInformations.js"],"names":["React","Divider","Form","TextArea","Grid","Progress","Icon","Select","Loader","Dimmer","API","VALIDATE","classnames","Warnings","require","countries","genderOptions","key","value","text","DEFAULT_STATE","lastname","firstname","interested","country","gender","bio","email","birthday","save","loading","complete","w_lastname","w_firstname","w_gender","w_interested","w_country","w_bio","DEFAULT_ERRORS","BasicsInformations","Component","constructor","props","handleSave","_mounted","warnings","detectCountry","forEach","data","state","validateFirstName","length","checkWarnings","updateEditProfilValues","then","setState","nextsection","catch","error","response","handleChange","e","id","map","item","index","componentWillUnmount","getDerivedStateFromProps","nextProps","prevState","componentDidMount","getcomplete","getEditProfilValues","findProfil","render","ProgressBar"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {Divider, Form, TextArea, Grid, Progress, Icon, Select, Loader, Dimmer} from 'semantic-ui-react';\nimport API from \"../../../utils/API\";\nimport VALIDATE from \"../../../utils/validation\";\nimport classnames from 'classnames';\nimport Warnings from \"../../Warnings/Warnings\";\nconst { countries } = require('../../../utils/validation');\n\nconst genderOptions = [\n    { key: 'male', value: 'male', text: 'Male' },\n    { key: 'female', value: 'female', text: 'Female' },\n];\n\n\nconst DEFAULT_STATE = {\n    lastname: \"\",\n    firstname: \"\",\n    interested: \"\",\n    country: '',\n    gender: \"\",\n    bio: \"\",\n    email: \"\",\n    birthday: \"\",\n    save: false,\n    loading: false,\n    complete: 0,\n    w_lastname: '',\n    w_firstname: '',\n    w_gender: '',\n    w_interested: '',\n    w_country: '',\n    w_bio: '',\n};\n\nconst DEFAULT_ERRORS = {\n    w_lastname: '',\n    w_firstname: '',\n    w_gender: '',\n    w_interested: '',\n    w_country: '',\n    w_bio: '',\n};\n\nclass BasicsInformations extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {...DEFAULT_STATE};\n        this.state.complete = this.props.complete;\n        // Set key for countries\n        this.countries = countries.map((item, index) => ({key: index, text: item.value, value: item.value }));\n        // Set default errors\n        this.warnings = {...DEFAULT_ERRORS};\n    }\n\n    componentWillUnmount() {\n        this.setState({save: false, loading: false});\n        this._mounted = false;\n    }\n\n    static getDerivedStateFromProps(nextProps, prevState){\n        if(nextProps.complete !== prevState.complete)\n            return { complete: nextProps.complete}\n        return null;\n    }\n\n\n    async componentDidMount() {\n        this._mounted = true;\n        this.setState({loading: true});\n        await this.props.getcomplete();\n        this.setState({complete: this.props.complete});\n            await API.getEditProfilValues()\n                .then((response) => {\n                        if (typeof response.data.findProfil !== 'undefined')\n                            if (this._mounted === true)\n                                this.setState({...response.data.findProfil});\n                    })\n                .catch((error) => {\n                    if (typeof error.response !== 'undefined'\n                        && typeof error.response.data !== 'undefined' && typeof error.response.data.warnings !== 'undefined')\n                        if(this._mounted === true)\n                            this.setState({...error.response.data.warnings});\n                })\n            this.setState({loading: false});\n        }\n\n    handleSave = async() => {\n        if (this._mounted) {\n            this.warnings = {...DEFAULT_ERRORS};\n            // Check country\n            let detectCountry = false;\n            countries.forEach((data) => {\n                if (data.value === this.state.country) {\n                    detectCountry = true;\n                    return;\n                }\n            });\n            // let detectCountry = this.countries.some(data => data.value === this.state.country);\n            if (!detectCountry)\n                this.warnings.w_country = \"Please select a valid country\";\n            if (!VALIDATE.validateFirstName(this.state.lastname))\n                this.warnings.w_lastname = \"Only characters are allowed for your lastname. Must contain between 3 and 13 characters\";\n            if (!VALIDATE.validateFirstName(this.state.firstname))\n                this.warnings.w_firstname = \"Only characters are allowed for your first name. Must contain between 3 and 13 characters\";\n            if (this.state.interested !== \"male\" && this.state.interested !== \"female\")\n                this.warnings.w_interested = \"Please select a valid interest option\";\n            if (this.state.gender !== \"male\" && this.state.gender !== \"female\")\n                this.warnings.w_gender = \"Please select a valid gender option\";\n            if (this.state.bio && this.state.bio.length > 90)\n                this.warnings.w_bio = \"Your bio is too long, please use 90 maximum characters. You have \" + this.state.bio.length;\n            if (VALIDATE.checkWarnings(this.warnings) === true) {\n                await API.updateEditProfilValues(this.state)\n                    .then(() => {\n                        this.setState({loading: false}, () => {\n                            this.props.nextsection();\n                        });\n                    })\n                    .catch(error => {\n                        if (typeof error.response !== 'undefined'\n                            && typeof error.response.data !== 'undefined' && typeof error.response.data.warnings !== 'undefined')\n                            this.setState({...error.response.data.warnings});\n                    });\n            } else\n                this.setState({...this.warnings});\n        }\n    };\n    handleChange = (e, { value, id }) => {\n        // Unset warnings if change\n        this.setState({ [id]: value, [\"w_\" + id]: ''});\n    };\n\n    render() {\n        const {w_firstname, w_lastname, w_gender, w_interested, w_country, w_bio, complete} = this.state;\n        const ProgressBar = () => (\n            <Progress\n                percent={complete}\n                progress\n                indicating\n                size=\"medium\"/>\n        );\n        const Warnings = () => {\n            if (this.state.warnings && this.state.warnings.length > 0)\n                return (\n                    <Grid.Row centered textAlign=\"center\">\n                        <div className=\"loginWarnings\">\n                            <Warnings data={this.state.warnings} />\n                        </div>\n                    </Grid.Row>\n                )\n            else return null\n        }\n        return (\n            <div className=\"container-fluid\">\n                <div className={classnames(\"ui middle\", \"BasicInformations\")}>\n                    <ProgressBar />\n                    <Dimmer active={this.state.loading}>\n                        <Loader size='massive'/>\n                    </Dimmer>\n                    <Grid textAlign=\"center\">\n                        <Grid.Row centered>\n                            <h1 className=\"CompleteTitle\">Complete Basics Informations</h1>\n                        </Grid.Row>\n                    </Grid>\n                    <Divider hidden />\n                    <Divider hidden />\n                    <div className=\"shapeBasicsInfos\"></div>\n                    <Grid textAlign=\"center\">\n                        <Warnings/>\n                    </Grid>\n                    <Grid columns={1} doubling>\n                        <Grid.Column>\n                            <Form className=\"formEdit\">\n                                <Form.Group widths='equal'>\n                                    <Form.Input\n                                        error={w_lastname.length > 0 ? w_lastname : null}\n                                        fluid\n                                        label='Last Name'\n                                        color=\"white\"\n                                        id=\"lastname\"\n                                        value={this.state.lastname}\n                                        onChange={this.handleChange}\n                                        placeholder=\"Last Name\"\n                                    />\n                                    <Form.Input\n                                        error={w_firstname.length > 0 ? w_firstname : null}\n                                        fluid\n                                        label='First Name'\n                                        id=\"firstname\"\n                                        value={this.state.firstname}\n                                        onChange={this.handleChange}\n                                        placeholder=\"First Name\"\n                                    />\n                                </Form.Group>\n                                <Form.Group widths='equal' className=\"DropdownBasic\">\n                                    <Form.Field\n                                        error={w_gender.length > 0 ? w_gender : null}\n                                        id=\"gender\"\n                                        control={Select}\n                                        value={this.state.gender}\n                                        options={genderOptions}\n                                        label=\"Select Gender\"\n                                        placeholder='Gender'\n                                        onChange={this.handleChange}\n                                    />\n                                    <Form.Field\n                                        error={w_interested.length > 0 ? w_interested : null}\n                                        id=\"interested\"\n                                        control={Select}\n                                        value={this.state.interested}\n                                        options={genderOptions}\n                                        label=\"Interested by \"\n                                        placeholder='Interested by'\n                                        onChange={this.handleChange}\n                                    />\n                                </Form.Group>\n                                <Form.Group widths='equal'>\n                                    <Form.Input\n                                        fluid\n                                        disabled\n                                        label='Email'\n                                        id=\"email\"\n                                        placeholder=\"Email\"\n                                        value={this.state.email}\n                                        onChange={this.handleChange}\n                                    />\n                                    <Form.Field\n                                        error={w_country.length > 0 ? w_country : null}\n                                        id=\"country\"\n                                        control={Select}\n                                        value={this.state.country}\n                                        options={this.countries}\n                                        label=\"Select Country\"\n                                        placeholder='Country'\n                                        search\n                                        onChange={this.handleChange}\n                                    />\n                                </Form.Group>\n                                <Form.Field\n                                    error={w_bio.length > 0 ? w_bio : null}\n                                    label='Bio'\n                                    control={TextArea}\n                                    id=\"bio\"\n                                    placeholder=\"Bio\"\n                                    value={this.state.bio != null && this.state.bio.length ? this.state.bio : ''}\n                                    onChange={this.handleChange}\n                                />\n                            </Form>\n                        </Grid.Column>\n                        <Divider hidden />\n                        <Grid.Row centered>\n                            <Icon className=\"EditProfilArrow\"\n                                  name='arrow alternate circle right outline'\n                                  size=\"huge\"\n                                  onClick={this.handleSave}/>\n                        </Grid.Row>\n                    </Grid>\n                </div>\n            </div>\n        )\n    }\n}\nexport default BasicsInformations;"]},"metadata":{},"sourceType":"module"}