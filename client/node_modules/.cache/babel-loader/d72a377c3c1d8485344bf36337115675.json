{"ast":null,"code":"var _jsxFileName = \"/Users/jv/Desktop/MatchApp/client/src/containers/Wall/Wall.js\";\nimport React from 'react';\nimport { withRouter } from \"react-router\";\nimport UserMiniCard from \"../../components/UserMiniCard/UserMiniCard\";\nimport API from './../../utils/API';\nimport InfiniteScroll from 'react-infinite-scroller';\nimport { Button, Grid, Divider, Icon } from \"semantic-ui-react\";\nimport ModalUser from '../../components/ModalUser/ModalUser';\nimport { store } from \"react-notifications-component\";\nimport Filter from './Filter/Filter';\nconst DEFAULT_STATE = {\n  loadingModal: '',\n  nextUsers: '',\n  hasMoreContent: false,\n  clear: false,\n  users: [],\n  warnings: [],\n  loading: true,\n  userView: false,\n  userIdFocusLoading: null,\n  interests: [],\n  userInterests: [],\n  visible: false,\n  aDescendant: false,\n  dDescendant: false,\n  distanceRange: 250,\n  ageRange: {\n    min: 18,\n    max: 27\n  },\n  popularityRange: {\n    min: 0,\n    max: 50\n  }\n};\n\nclass Wall extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidMount = async () => {\n      this._mounted = true;\n      this._mounted && this.setState({\n        loading: true\n      });\n      await API.checkUserView().then(async res => {\n        if (res.status === 200) {\n          await API.getUserInterests().then(response => {\n            if (response.status === 200) this._mounted && this.setState({\n              interests: response.data.interests\n            });\n          });\n          this._mounted && this.setState({\n            userView: true\n          });\n          this.searchMatch(this.state.distanceRange, this.state.ageRange, this.state.popularityRange, []);\n        }\n      }).catch(() => {\n        store.addNotification({\n          message: \"Please complete your profile\",\n          type: \"info\",\n          insert: \"top\",\n          container: \"top-right\",\n          animationIn: [\"animated\", \"fadeIn\"],\n          animationOut: [\"animated\", \"fadeOut\"],\n          dismiss: {\n            duration: 5000,\n            onScreen: true\n          }\n        });\n        this.props.history.push('/profile');\n      });\n    };\n\n    this.searchMatch = async (distanceRange, ageRange, popularityRange, interests) => {\n      this._mounted && this.setState(prevState => ({\n        loading: true,\n        interests: interests && interests.length ? interests : prevState.interests\n      }));\n      let users = [];\n      await API.getUsers(distanceRange, ageRange, popularityRange, interests).then(response => {\n        if (response.status === 200) users = response.data.users;\n      });\n      let nextUsers = 0;\n      if (users.length > 20) nextUsers = users.slice(21);\n      this._mounted && this.setState({\n        nextUsers: nextUsers,\n        users: users.slice(0, 21),\n        hasMoreContent: users.length > 20\n      });\n      this._mounted && this.setState({\n        loading: false\n      });\n    };\n\n    this.clickedUser = async userIdFocus => {\n      // Send notification\n      this.props.sWallVisit(userIdFocus); // Inner Ref Modal\n\n      this.innerRefModal.current && this.innerRefModal.current.loadUser(userIdFocus);\n      this._mounted && this.setState({\n        loadingMinCard: true,\n        userIdFocusLoad: userIdFocus\n      });\n    };\n\n    this.handleBottomPage = () => {\n      const {\n        nextUsers,\n        users\n      } = this.state;\n\n      if (nextUsers.length) {\n        for (let i = 0; i < nextUsers.length && i <= 20; i++) users.push(nextUsers[i]);\n\n        this._mounted && this.setState({\n          users: users,\n          nextUsers: nextUsers.slice(21)\n        });\n      } else this._mounted && this.setState({\n        hasMoreContent: false\n      });\n    };\n\n    this.ageFilter = () => {\n      const {\n        aDescendant\n      } = this.state;\n      this.setState({\n        loading: true\n      });\n      this.innerRef.current && this.innerRef.current.ageFilter(aDescendant);\n      this.setState({\n        aDescendant: !aDescendant,\n        loading: false\n      });\n    };\n\n    this.distanceFilter = () => {\n      const {\n        dDescendant\n      } = this.state;\n      this.setState({\n        loading: true\n      });\n      this.innerRef.current && this.innerRef.current.distanceFilter(dDescendant);\n      this.setState({\n        dDescendant: !dDescendant,\n        loading: false\n      });\n    };\n\n    this.state = { ...DEFAULT_STATE\n    };\n    this._mounted = false;\n    this.innerRefModal = React.createRef();\n    this.innerRef = React.createRef();\n  }\n\n  componentWillUnmount() {\n    this._mounted = false;\n  } // Search button handle\n\n\n  render() {\n    const {\n      hasMoreContent,\n      loading,\n      users,\n      aDescendant,\n      interests,\n      dDescendant,\n      userIdFocusLoad\n    } = this.state;\n    const userscards = React.createElement(Grid.Column, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, React.createElement(Grid.Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: 'ButtonFilters',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(Button.Group, {\n      size: 'small',\n      widths: 3,\n      fluid: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: this.ageFilter,\n      icon: true,\n      labelPosition: \"left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      name: aDescendant ? 'arrow down' : 'arrow up',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }), \"Age\"), React.createElement(Button, {\n      onClick: this.distanceFilter,\n      icon: true,\n      labelPosition: \"left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      name: dDescendant ? 'arrow down' : 'arrow up',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }), \"Distance\"), React.createElement(Button, {\n      onClick: () => this.searchMatch(this.state.distanceRange, this.state.ageRange, this.state.popularityRange, []),\n      icon: true,\n      labelPosition: \"left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      name: \"list ol\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }), \"Match\")))), React.createElement(Divider, {\n      hidden: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }), React.createElement(Grid, {\n      stackable: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(UserMiniCard, {\n      userIdFocus: userIdFocusLoad,\n      inner: true,\n      users: users,\n      ref: this.innerRef,\n      clickedUser: this.clickedUser,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    })));\n    return React.createElement(\"div\", {\n      className: \"WallContainer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(ModalUser, {\n      interests: interests,\n      s_like: this.props.s_like,\n      s_like_unliked: this.props.s_like_unliked,\n      s_like_likedback: this.props.s_like_likedback,\n      ref: this.innerRefModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }), React.createElement(Grid, {\n      centered: true,\n      columns: 'equal',\n      stackable: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, React.createElement(Filter, {\n      loading: loading,\n      searchMatch: this.searchMatch,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }), userscards), React.createElement(InfiniteScroll, {\n      pageStart: 0,\n      loadMore: this.handleBottomPage,\n      hasMore: hasMoreContent,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, \" \"));\n  }\n\n}\n\nexport default withRouter(Wall);","map":{"version":3,"sources":["/Users/jv/Desktop/MatchApp/client/src/containers/Wall/Wall.js"],"names":["React","withRouter","UserMiniCard","API","InfiniteScroll","Button","Grid","Divider","Icon","ModalUser","store","Filter","DEFAULT_STATE","loadingModal","nextUsers","hasMoreContent","clear","users","warnings","loading","userView","userIdFocusLoading","interests","userInterests","visible","aDescendant","dDescendant","distanceRange","ageRange","min","max","popularityRange","Wall","Component","constructor","props","componentDidMount","_mounted","setState","checkUserView","then","res","status","getUserInterests","response","data","searchMatch","state","catch","addNotification","message","type","insert","container","animationIn","animationOut","dismiss","duration","onScreen","history","push","prevState","length","getUsers","slice","clickedUser","userIdFocus","sWallVisit","innerRefModal","current","loadUser","loadingMinCard","userIdFocusLoad","handleBottomPage","i","ageFilter","innerRef","distanceFilter","createRef","componentWillUnmount","render","userscards","s_like","s_like_unliked","s_like_likedback"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { withRouter } from \"react-router\";\nimport UserMiniCard from \"../../components/UserMiniCard/UserMiniCard\";\nimport API from './../../utils/API';\nimport InfiniteScroll from 'react-infinite-scroller';\nimport { Button, Grid, Divider, Icon } from \"semantic-ui-react\";\nimport ModalUser from '../../components/ModalUser/ModalUser';\nimport { store } from \"react-notifications-component\";\nimport Filter from './Filter/Filter';\n\nconst DEFAULT_STATE = {\n    loadingModal: '',\n    nextUsers: '',\n    hasMoreContent: false,\n    clear: false,\n    users: [],\n    warnings: [],\n    loading: true,\n    userView: false,\n    userIdFocusLoading: null,\n    interests: [],\n    userInterests: [],\n    visible: false,\n    aDescendant: false,\n    dDescendant: false,\n    distanceRange: 250,\n    ageRange: {\n        min: 18,\n        max: 27,\n    },\n    popularityRange: {\n        min: 0,\n        max: 50,\n    },\n\n};\nclass Wall extends React.Component {\n\n    constructor(props){\n        super(props);\n        this.state = {...DEFAULT_STATE};\n        this._mounted = false;\n        this.innerRefModal = React.createRef();\n        this.innerRef = React.createRef();\n    }\n\n    componentDidMount = async() => {\n        this._mounted = true;\n        this._mounted && this.setState({loading: true});\n        await API.checkUserView()\n            .then(async(res) => {\n                if (res.status === 200) {\n                    await API.getUserInterests()\n                        .then(response => {\n                            if (response.status === 200)\n                                this._mounted && this.setState({interests: response.data.interests})\n                        });\n                    this._mounted && this.setState({userView: true});\n                    this.searchMatch(this.state.distanceRange, this.state.ageRange, this.state.popularityRange, []);\n                }\n            })\n            .catch( () => {\n                store.addNotification({\n                    message: \"Please complete your profile\",\n                    type: \"info\",\n                    insert: \"top\",\n                    container: \"top-right\",\n                    animationIn: [\"animated\", \"fadeIn\"],\n                    animationOut: [\"animated\", \"fadeOut\"],\n                    dismiss: {\n                        duration: 5000,\n                        onScreen: true\n                    }\n                });\n                this.props.history.push('/profile');\n            });\n    };\n\n    componentWillUnmount() {\n        this._mounted = false;\n    }\n\n    // Search button handle\n    searchMatch = async(distanceRange, ageRange, popularityRange, interests) => {\n        this._mounted && this.setState(prevState => ({loading: true, interests: interests && interests.length ? interests : prevState.interests}));\n        let users = [];\n        await API.getUsers(distanceRange, ageRange, popularityRange, interests)\n            .then(response => {\n                if (response.status === 200)\n                    users = response.data.users;\n            });\n        let nextUsers = 0;\n        if(users.length > 20)\n           nextUsers = users.slice(21);\n        this._mounted && this.setState({\n            nextUsers: nextUsers,\n            users: users.slice(0, 21),\n            hasMoreContent: users.length > 20\n        });\n        this._mounted && this.setState({loading: false});\n\n    };\n\n\n    clickedUser = async(userIdFocus) => {\n        // Send notification\n        this.props.sWallVisit(userIdFocus);\n        // Inner Ref Modal\n        this.innerRefModal.current && this.innerRefModal.current.loadUser(userIdFocus);\n        this._mounted && this.setState({ loadingMinCard: true, userIdFocusLoad: userIdFocus});\n    };\n    handleBottomPage = () => {\n        const { nextUsers, users } = this.state;\n        if (nextUsers.length){\n            for (let i = 0; i < nextUsers.length && i <= 20; i++)\n                users.push(nextUsers[i]);\n            this._mounted && this.setState({users: users, nextUsers: nextUsers.slice(21)});\n        }\n        else\n            this._mounted && this.setState({hasMoreContent: false});\n    };\n    // Filters\n    ageFilter = () => {\n        const {aDescendant } = this.state;\n        this.setState({loading: true});\n        this.innerRef.current && this.innerRef.current.ageFilter(aDescendant);\n        this.setState({aDescendant: !aDescendant, loading: false});\n    };\n\n    distanceFilter = () => {\n        const {dDescendant } = this.state;\n        this.setState({loading: true});\n        this.innerRef.current && this.innerRef.current.distanceFilter(dDescendant);\n        this.setState({dDescendant: !dDescendant, loading: false});\n    };\n\n    render() {\n        const { hasMoreContent, loading, users, aDescendant, interests, dDescendant, userIdFocusLoad} = this.state;\n        const userscards = (\n            <Grid.Column>\n                <Grid.Row>\n                    <div className={'ButtonFilters'}>\n                        <Button.Group size={'small'} widths={3} fluid>\n                            <Button\n                                onClick={this.ageFilter}\n                                icon\n                                labelPosition='left'>\n                                <Icon name={aDescendant ? 'arrow down' : 'arrow up'}/>Age</Button>\n                            <Button\n                                onClick={this.distanceFilter}\n                                icon\n                                labelPosition='left'>\n                                <Icon name={dDescendant ? 'arrow down' : 'arrow up'} />\n                                Distance\n                            </Button>\n                            <Button\n                                onClick={() => this.searchMatch(this.state.distanceRange, this.state.ageRange, this.state.popularityRange, [])}\n                                icon\n                                labelPosition='left'>\n                                <Icon name='list ol' />\n                                Match\n                            </Button>\n                        </Button.Group>\n                    </div>\n                </Grid.Row>\n                <Divider hidden/>\n                <Grid stackable >\n                    <UserMiniCard\n                        userIdFocus={userIdFocusLoad}\n                        inner\n                        users={users}\n                        ref={this.innerRef}\n                        clickedUser={this.clickedUser}\n                    />\n                </Grid>\n            </Grid.Column>\n        );\n\n        return (\n            <div className=\"WallContainer\">\n                <ModalUser interests={interests} s_like={this.props.s_like} s_like_unliked={this.props.s_like_unliked} s_like_likedback={this.props.s_like_likedback} ref={this.innerRefModal} />\n                <Grid centered columns={'equal'} stackable>\n                    <Filter loading={loading} searchMatch={this.searchMatch} />\n                    {userscards}\n                </Grid>\n                <InfiniteScroll\n                    pageStart={0}\n                    loadMore={this.handleBottomPage}\n                    hasMore={hasMoreContent}\n                > </InfiniteScroll>\n            </div>\n        );\n    }\n}\n\nexport default withRouter(Wall);"]},"metadata":{},"sourceType":"module"}